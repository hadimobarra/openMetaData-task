"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[6116],{46116:function(e,t,n){n.r(t);var a=n(70655),r=n(71230),i=n(15746),l=n(91894),s=n(56256),u=n(9242),c=n(19650),o=n(71577),m=n(60236),d=n(96486),f=n(67294),p=n(59293),h=n(63153),E=n(84419),b=n(53867),w=n(96162),v=n(85303),Z=n(48132),y=n(96840),C=n(50168),k=n(87684),R=(0,y.DW)(w.lx.POLICIES);t.default=function(){var e=(0,p.k6)(),t=(0,p.UO)().fqn,n=(0,a.CR)((0,f.useState)(!1),2),w=n[0],g=n[1],N=(0,a.CR)((0,f.useState)({}),2),S=N[0],_=N[1],A=(0,a.CR)((0,f.useState)({name:"",description:"",resources:[],operations:[],condition:"",effect:v.Q.Allow}),2),D=A[0],P=A[1],j=(0,f.useMemo)((function(){return[{name:"Settings",url:(0,y.si)()},{name:"Policies",url:R},{name:(0,Z.C_)(S),url:(0,y.Hr)(t)},{name:"Add New Rule",url:""}]}),[t,S]),q=function(){e.push((0,y.Hr)(t))};return(0,f.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:g(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,h.u7)(t,"owner,location,teams,roles")];case 2:return e=a.sent(),_(null!=e?e:{}),[3,5];case 3:return n=a.sent(),(0,C.Eo)(n),[3,5];case 4:return g(!1),[7];case 5:return[2]}}))}))}),[t]),w?f.createElement(b.Z,null):f.createElement(r.Z,{className:"tw-bg-body-main tw-h-auto p-y-lg",gutter:[16,16]},f.createElement(i.Z,{offset:5,span:14},f.createElement(E.Z,{className:"m-b-md",titleLinks:j}),f.createElement(l.Z,null,f.createElement(s.Z.Paragraph,{className:"tw-text-base","data-testid":"add-rule-title"},"Add New Rule"),f.createElement(u.Z,{"data-testid":"rule-form",id:"rule-form",initialValues:{ruleEffect:D.effect},layout:"vertical",onFinish:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n,r,i;return(0,a.Jh)(this,(function(l){switch(l.label){case 0:e=(0,a.pi)((0,a.pi)({},D),{name:(0,d.trim)(D.name)}),t=e.condition,n=(0,a._T)(e,["condition"]),r=(0,m.qu)(S,(0,a.pi)((0,a.pi)({},S),{rules:(0,a.ev)((0,a.ev)([],(0,a.CR)(S.rules)),[t?(0,a.pi)((0,a.pi)({},n),{condition:t}):n])})),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,h.$j)(r,S.id)];case 2:return l.sent()&&q(),[3,4];case 3:return i=l.sent(),(0,C.Eo)(i),[3,4];case 4:return[2]}}))}))}},f.createElement(k.Z,{ruleData:D,setRuleData:P}),f.createElement(c.Z,{align:"center",className:"tw-w-full tw-justify-end"},f.createElement(o.Z,{"data-testid":"cancel-btn",type:"link",onClick:q},"Cancel"),f.createElement(o.Z,{"data-testid":"submit-btn",form:"rule-form",htmlType:"submit",type:"primary"},"Submit"))))))}}}]);