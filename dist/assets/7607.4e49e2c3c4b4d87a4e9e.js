"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[7607],{77607:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var n=a(70655),r=a(96486),l=a(67294),i=a(59293),s=a(31485),c=a(67814),o=a(19650),m=a(94184),u=a.n(m),d=a(67800),f=a(16139),v=a(61637),p=a(48132),y=a(38464),w=a(67521),h=a(10584),E=a(97809),g=a(84419),b=a(46892),N=a(53867),C=a(50146),R=a(71577),x=a(56256),S=a(71230),k=a(15746),T=a(74313),Z=a(62761),G=a(22653),z=a(41264),A=a(22334),D=a(6603),j=function(e){var t=e.glossaryTermFQN,a=void 0===t?"":t,i=e.relatedTerms,s=e.onCancel,c=e.onSave,o=e.header,m=e.visible,u=(0,n.CR)((0,l.useState)(""),2),f=u[0],v=u[1],p=(0,n.CR)((0,l.useState)(!0),2),y=p[0],w=p[1],h=(0,n.CR)((0,l.useState)([]),2),E=h[0],g=h[1],b=(0,n.CR)((0,l.useState)(null!=i?i:[]),2),j=b[0],B=b[1],F=function(e){void 0===e&&(e=""),w(!0),(0,T.rg)(e,1,Z.IV,"","","",G.W.GLOSSARY).then((function(t){var r=(0,A.j0)(t.data.hits.hits).filter((function(e){return!(null==i?void 0:i.some((function(t){return t.fullyQualifiedName===e.fullyQualifiedName})))&&e.fullyQualifiedName!==a})),l=e?r:function(e){var t=j.map((function(e){return e.fullyQualifiedName||e.name})),a=e.filter((function(e){return!t.includes(e.fullyQualifiedName||e.name)}));return(0,n.ev)((0,n.ev)([],(0,n.CR)(j)),(0,n.CR)(a))}(r);g(l)})).catch((function(){g(j)})).finally((function(){return w(!1)}))},Q=function(e,t){if(t){var a=E.find((function(t){return t.id===e}))||{};B((0,n.ev)((0,n.ev)([],(0,n.CR)(j)),[a]))}else B((function(t){return t.filter((function(t){return t.id!==e}))}))};return(0,l.useEffect)((function(){!(0,r.isUndefined)(i)&&i.length&&g(i),F()}),[]),l.createElement(C.Z,{centered:!0,destroyOnClose:!0,closable:!1,"data-testid":"confirmation-modal",footer:l.createElement("div",{"data-testid":"cta-container"},l.createElement(R.Z,{"data-testid":"cancelButton",key:"remove-edge-btn",type:"text",onClick:s},(0,d.t)("label.cancel")),l.createElement(R.Z,{"data-testid":"saveButton",key:"save-btn",type:"primary",onClick:function(){return c(j)}},(0,d.t)("label.save"))),title:l.createElement(x.Z.Text,{strong:!0,"data-testid":"header"},o),visible:m,width:800},l.createElement("div",{className:"h-full"},l.createElement(D.Z,{placeholder:(0,d.t)("label.search-for-user")+"...",searchValue:f,typingInterval:500,onSearch:function(e){v(e),F(e)}}),y?l.createElement(N.Z,null):E.length>0?l.createElement(S.Z,{gutter:[16,16]},E.map((function(e){return l.createElement(k.Z,{key:(0,r.uniqueId)(),span:8},l.createElement(z.Z,{isActionVisible:!0,isCheckBoxes:!0,item:{name:"",displayName:e.displayName||e.name,id:e.id,type:"tag",isChecked:(t=e.id,j.some((function(e){return e.id===t})))},key:e.id,onSelect:Q}));var t}))):l.createElement(x.Z.Text,{className:"flex justify-center mt-10 text-grey-muted text-base"},f?(0,d.t)("label.no-terms-found-for-searchText",{searchText:f}):(0,d.t)("label.no-terms-found"))))},B=a(71266),F=a(66116),Q=function(e){var t=e.children,a=e.className,n=void 0===a?"":a;return l.createElement("div",{className:u()("tw-mt-4",n)},t)},L=function(e){var t=e.parentGlossaryData,a=e.allowAccess,i=e.glossaryData,s=e.onSave,m=e.onCancel,C=e.slashedBreadcrumb,R=e.saveState,x=void 0===R?"initial":R,S=(0,l.useRef)(),k=(0,n.CR)((0,l.useState)({name:!1,invalidName:!1,invalidReferences:!1,description:!1}),2),T=k[0],Z=k[1],G=(0,n.CR)((0,l.useState)(""),2),z=G[0],A=G[1],D=(0,n.CR)((0,l.useState)(""),1)[0],L=(0,n.CR)((0,l.useState)(!1),2),O=L[0],U=L[1],$=(0,n.CR)((0,l.useState)(!1),2),_=$[0],q=$[1],V=(0,n.CR)((0,l.useState)([]),2),I=V[0],M=V[1],P=(0,n.CR)((0,l.useState)([]),2),X=P[0],Y=P[1],W=(0,n.CR)((0,l.useState)([]),2),H=W[0],J=W[1],K=(0,n.CR)((0,l.useState)(""),2),ee=K[0],te=K[1],ae=(0,n.CR)((0,l.useState)([]),2),ne=ae[0],re=ae[1];(0,l.useEffect)((function(){(null==i?void 0:i.reviewers)&&(null==i?void 0:i.reviewers.length)&&M(null==i?void 0:i.reviewers)}),[i]);var le=function(){var e;return(null===(e=S.current)||void 0===e?void 0:e.getEditorContent())||""},ie=function(){q(!1)},se=function(){U(!1)},ce=function(e,t){M((function(e){return e.filter((function(e){return e.name!==t}))}))},oe=function(e,t){J((function(e){return e.filter((function(e){return e.name!==t}))}))},me=function(e){if(a){var t=e.target.value,l=e.target.name,i=(0,r.cloneDeep)(T),s=i.name,c=i.invalidName;switch(l){case"name":A(t),s=!1,c=!1;break;case"synonyms":te(t)}Z((function(e){return(0,n.pi)((0,n.pi)({},e),{name:s,invalidName:c})}))}},ue=function(e,t,a){var r=(0,n.ev)([],(0,n.CR)(ne));r[e][t]=a,re(r),Z((function(e){return(0,n.pi)((0,n.pi)({},e),{invalidReferences:!1})}))},de=function(e){var t,a,r=!0;try{for(var l=(0,n.XA)(e),i=l.next();!i.done;i=l.next()){var s=i.value;if(!(0,p.jv)(s.endpoint||"")){r=!1;break}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(a=l.return)&&a.call(l)}finally{if(t)throw t.error}}return r};return l.createElement(b.Z,{classes:"tw-max-w-full-hd tw-h-full tw-pt-4",header:l.createElement(g.Z,{titleLinks:C}),layout:v.Q["2ColRTL"],rightPanel:l.createElement(l.Fragment,null,l.createElement("h6",{className:"tw-heading tw-text-base"},"Configure Glossary Term"),l.createElement("div",{className:"tw-mb-5"},"Every term in the glossary has a unique definition. Along with defining the standard term for a concept, the synonyms as well as related terms (for e.g., parent and child terms) can be specified. References can be added to the assets related to the terms. New terms can be added or updated to the Glossary. The glossary terms can be reviewed by certain users, who can accept or reject the terms."))},l.createElement("div",{className:"tw-form-container"},l.createElement("h6",{className:"tw-heading tw-text-base"},"Add Glossary Term"),l.createElement("div",{className:"tw-pb-3","data-testid":"add-glossary-term"},l.createElement(Q,null,l.createElement("label",{className:"tw-block tw-form-label",htmlFor:"name"},(0,p.lp)("Name:")),l.createElement("input",{className:"tw-form-inputs tw-form-inputs-padding","data-testid":"name",id:"name",name:"name",placeholder:"Name",type:"text",value:z,onChange:me}),T.name?(0,p.Ti)("Glossary term name is required."):T.invalidName?(0,p.Ti)("Glossary term name is invalid."):null),l.createElement(Q,null,l.createElement("label",{className:"tw-block tw-form-label tw-mb-0",htmlFor:"description"},(0,p.lp)("Description:")),l.createElement(E.Z,{"data-testid":"description",initialValue:D,readonly:!a,ref:S}),T.description&&(0,p.Ti)("Description is required.")),l.createElement(Q,null,l.createElement(o.Z,{className:"w-full",direction:"vertical"},l.createElement("label",{htmlFor:"tags"},"Tags:"),l.createElement(w.j,{"data-testid":"tags",setTags:function(e){return Y(e)}}))),l.createElement(Q,null,l.createElement("label",{className:"tw-block tw-form-label",htmlFor:"synonyms"},"Synonyms:"),l.createElement("input",{className:"tw-form-inputs tw-form-inputs-padding","data-testid":"synonyms",id:"synonyms",name:"synonyms",placeholder:"Enter comma seprated keywords",type:"text",value:ee,onChange:me})),l.createElement("div",{"data-testid":"references"},l.createElement("div",{className:"tw-flex tw-items-center tw-mt-6"},l.createElement("p",{className:"w-form-label tw-mr-3"},"References"),l.createElement(h.z,{className:"tw-h-5 tw-px-2",size:"x-small",theme:"primary",variant:"contained",onClick:function(){re((0,n.ev)((0,n.ev)([],(0,n.CR)(ne)),[{name:"",endpoint:""}]))}},l.createElement(c.G,{icon:"plus"}))),ne.map((function(e,t){return l.createElement("div",{className:"tw-flex tw-items-center",key:t},l.createElement("div",{className:"tw-grid tw-grid-cols-2 tw-gap-x-2 tw-w-11/12"},l.createElement(Q,null,l.createElement("input",{className:"tw-form-inputs tw-form-inputs-padding",id:"name-"+t,name:"key",placeholder:"Name",type:"text",value:e.name,onChange:function(e){return ue(t,"name",e.target.value)}})),l.createElement(Q,null,l.createElement("input",{className:"tw-form-inputs tw-form-inputs-padding",id:"url-"+t,name:"endpoint",placeholder:"url",type:"text",value:e.endpoint,onChange:function(e){return ue(t,"endpoint",e.target.value)}}))),l.createElement("button",{className:"focus:tw-outline-none tw-mt-3 tw-w-1/12",onClick:function(e){!function(e){var t=(0,n.ev)([],(0,n.CR)(ne));t.splice(e,1),re(t)}(t),e.preventDefault()}},l.createElement(y.ZP,{alt:"delete",icon:"icon-delete",title:"Delete",width:"16px"})))})),T.invalidReferences?(0,p.Ti)("Endpoints should be valid URL."):null),l.createElement(Q,null,l.createElement("div",{className:"tw-flex tw-items-center tw-mt-4"},l.createElement("p",{className:"w-form-label tw-mr-3"},"Related terms "),l.createElement(h.z,{className:"tw-h-5 tw-px-2",size:"x-small",theme:"primary",variant:"contained",onClick:function(){return q(!0)}},l.createElement(c.G,{icon:"plus"}))),l.createElement("div",{className:"tw-my-4"},Boolean(H.length)&&H.map((function(e,t){var a;return l.createElement(F.Z,{editable:!0,isRemovable:!0,className:"tw-bg-gray-200",key:t,removeTag:oe,tag:null!==(a=e.name)&&void 0!==a?a:"",type:"contained"})})))),l.createElement(Q,null,l.createElement("div",{className:"tw-flex tw-items-center tw-mt-4"},l.createElement("p",{className:"w-form-label tw-mr-3"},"Reviewers "),l.createElement(h.z,{className:"tw-h-5 tw-px-2","data-testid":"add-reviewers",size:"x-small",theme:"primary",variant:"contained",onClick:function(){return U(!0)}},l.createElement(c.G,{icon:"plus"}))),l.createElement("div",{className:"tw-my-4"},Boolean(I.length)&&I.map((function(e,t){var a;return l.createElement(F.Z,{editable:!0,isRemovable:!0,className:"tw-bg-gray-200",key:t,removeTag:ce,tag:null!==(a=e.name)&&void 0!==a?a:"",type:"contained"})})))),l.createElement(Q,{className:"tw-flex tw-justify-end"},l.createElement(h.z,{"data-testid":"cancel-glossary-term",size:"regular",theme:"primary",variant:"text",onClick:m},"Cancel"),a?l.createElement(l.Fragment,null,"waiting"===x?l.createElement(h.z,{disabled:!0,className:"tw-w-16 tw-h-10 disabled:tw-opacity-100",size:"regular",theme:"primary",variant:"contained"},l.createElement(N.Z,{size:"small",type:"white"})):"success"===x?l.createElement(h.z,{disabled:!0,className:"tw-w-16 tw-h-10 disabled:tw-opacity-100",size:"regular",theme:"primary",variant:"contained"},l.createElement(c.G,{icon:"check"})):l.createElement(h.z,{className:u()("tw-w-16 tw-h-10",{"tw-opacity-40":!a}),"data-testid":"save-glossary-term",size:"regular",theme:"primary",variant:"contained",onClick:function(){var e=ne.map((function(e){var t,a;return{name:null===(t=e.name)||void 0===t?void 0:t.trim(),endpoint:null===(a=e.endpoint)||void 0===a?void 0:a.trim()}})).filter((function(e){return!(0,r.isEmpty)(e.endpoint)&&!(0,r.isEmpty)(e.name)})),a=H.map((function(e){return{id:e.id,type:"tag"}}));if(function(e){var t,a={name:!z.trim(),invalidName:f.tG.test(z),invalidReferences:!de(e),description:!(null===(t=le())||void 0===t?void 0:t.trim())};return Z(a),!Object.values(a).includes(!0)}(e)){var n=z.trim(),l={name:n,displayName:n,description:le(),reviewers:I.map((function(e){return{id:e.id,type:e.type}})),relatedTerms:H.length>0?a:void 0,references:e.length>0?e:void 0,parent:(0,r.isUndefined)(t)?void 0:{type:"glossaryTerm",id:t.id},synonyms:ee?ee.split(","):void 0,glossary:{id:i.id,type:"glossary"},tags:X};s(l)}}},"Save")):null)),l.createElement(j,{header:(0,d.t)("label.add-related-terms"),relatedTerms:H,visible:_,onCancel:ie,onSave:function(e){J(e),ie()}}),l.createElement(B.Z,{header:(0,d.t)("label.add-reviewers"),reviewer:I,visible:O,onCancel:se,onSave:function(e){M(e),se()}})))},O=a(74380),U=a(93389),$=a(79839),_=a(72819),q=a(6929),V=a(39570),I=a(96840),M=a(50168),P=function(){var e=(0,i.UO)(),t=e.glossaryName,a=e.glossaryTermsFQN,c=(0,i.k6)(),o=(0,U.BL)().permissions,m=(0,n.CR)((0,l.useState)("initial"),2),u=m[0],d=m[1],f=(0,n.CR)((0,l.useState)(!0),2),v=f[0],p=f[1],y=(0,n.CR)((0,l.useState)(),2),w=y[0],h=y[1],E=(0,n.CR)((0,l.useState)([]),2),g=E[0],b=E[1],C=(0,n.CR)((0,l.useState)(),2),R=C[0],x=C[1],S=(0,l.useMemo)((function(){return(0,V.P_)(_.OX.Create,$.A.GLOSSARY_TERM,o)}),[o]),k=function(){var e,n=a||t||"";e=(0,I.$x)(n),c.push(e)},T=function(e,t){(0,M.Eo)(e,t),d("initial")};return(0,l.useEffect)((function(){(0,s.S5)(t,["tags","owner","reviewers"]).then((function(e){e?h(e):(h(void 0),(0,M.Eo)(q.Z["api-error-messages"]["fetch-glossary-error"]))})).catch((function(e){h(void 0),(0,M.Eo)(e,q.Z["api-error-messages"]["fetch-glossary-error"])})).finally((function(){return p(!1)}))}),[t]),(0,l.useEffect)((function(){var e;a&&(e=a,(0,s.GM)(e,["children","relatedTerms","reviewers","tags"]).then((function(e){e?x(e):(x(void 0),(0,M.Eo)(q.Z["api-error-messages"]["fetch-glossary-term-error"]))})).catch((function(e){x(void 0);var t=(0,r.get)(e,"response.data.message","");(0,M.Eo)(t||q.Z["api-error-messages"]["fetch-glossary-term-error"])})))}),[a]),(0,l.useEffect)((function(){var e=[];(0,r.isUndefined)(a)?e.push({name:t,url:(0,I.$x)(t)}):e=a.split(".").map((function(e,a,n){var l=(0,r.cloneDeep)(n);return 0===a?{name:t,url:(0,I.$x)(t)}:{name:e,url:(0,I.$x)(l.splice(0,a+1).join("."))}})),b((0,n.ev)((0,n.ev)([{name:"Glossary",url:(0,I.$x)()}],(0,n.CR)(e)),[{name:"Add Glossary Term",url:"",activeTitle:!0}]))}),[a,t]),l.createElement(O.Z,null,v?l.createElement(N.Z,null):l.createElement("div",{className:"self-center"},l.createElement(L,{allowAccess:S,glossaryData:w,parentGlossaryData:R,saveState:u,slashedBreadcrumb:g,onCancel:function(){k()},onSave:function(e){d("waiting"),(0,s.n_)(e).then((function(e){e.data?(d("success"),setTimeout((function(){d("initial"),k()}),500)):T(q.Z["api-error-messages"]["add-glossary-term-error"])})).catch((function(e){T(e,q.Z["api-error-messages"]["add-glossary-term-error"])}))}})))}}}]);