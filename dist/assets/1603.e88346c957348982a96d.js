"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[1603],{64666:function(e,t,n){var a=n(8081),i=n.n(a),o=n(23645),s=n.n(o)()(i());s.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.manage-button .ant-space-item:first-child {\n  width: 40px;\n  align-self: baseline;\n}\n.manage-dropdown-button {\n  border: none;\n  background-color: #e1eece;\n  padding: 0;\n}\n.manage-dropdown-button .ant-btn {\n  padding: 0 8px 0 8px;\n}\n.manage-dropdown-button:hover,\n.manage-dropdown-button:focus {\n  background-color: #54c5d0;\n}\n.manage-dropdown-button:hover .manage-dropdown-icon,\n.manage-dropdown-button:focus .manage-dropdown-icon {\n  color: #ffffff;\n}\n.ant-dropdown-menu {\n  padding: 8px 0px;\n  background: #ffffff;\n  border: 1px solid #dde3ea;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);\n  border-radius: 4px;\n}\n.ant-dropdown-menu .ant-dropdown-menu-item {\n  padding: 5px 16px;\n}\n',""]),t.Z=s},72945:function(e,t,n){n.d(t,{Z:function(){return b}});var a,i=n(70655),o=n(50146),s=n(55742),l=n(96486),r=n(67294),c=n(59293),d=n(74313),m={loading:"initial",state:!1,softDelete:!0},u=n(64632),p=n(6929),E=n(48132),f=n(22215),g=n(50168),w=n(10584),y=n(53867);!function(e){e.SOFT_DELETE="soft-delete",e.HARD_DELETE="hard-delete"}(a||(a={}));var b=function(e){var t=e.allowSoftDelete,n=void 0===t||t,b=e.visible,h=e.deleteMessage,D=e.softDeleteMessagePostFix,x=void 0===D?"":D,T=e.hardDeleteMessagePostFix,Z=void 0===T?"":T,v=e.entityName,C=e.entityType,S=e.onCancel,N=e.entityId,A=e.prepareType,R=void 0===A||A,L=e.isRecursiveDelete,P=e.afterDeleteAction,I=(0,c.k6)(),k=(0,i.CR)((0,r.useState)(m),2),_=k[0],O=k[1],F=(0,i.CR)((0,r.useState)(""),2),M=F[0],H=F[1],z=(0,i.CR)((0,r.useState)(n?a.SOFT_DELETE:a.HARD_DELETE),2),V=z[0],B=z[1],G=(0,i.CR)((0,r.useState)(!1),2),K=G[0],U=G[1],Y=function(e){void 0===e&&(e=!1);var t="Soft deleting will deactivate the "+v+". This will disable any discovery, read or write operations on "+v+".",n=(0,E.fP)((0,f.DX)(C),"");return e?t:n},J=[{title:"Delete "+C+" “"+v+"”",description:Y(!0)+" "+x,type:a.SOFT_DELETE,isAllowd:n},{title:"Permanently Delete "+C+" “"+v+"”",description:(h||Y())+" "+Z,type:a.HARD_DELETE,isAllowd:!0}],j=function(){O(m),H(""),B(a.SOFT_DELETE),S()},W=(0,r.useCallback)((function(){return"DELETE"===M&&(V===a.SOFT_DELETE||V===a.HARD_DELETE)}),[M]);return(0,r.useEffect)((function(){B(n?a.SOFT_DELETE:a.HARD_DELETE),O((0,i.pi)((0,i.pi)({},m),{softDelete:n}))}),[n]),r.createElement(o.Z,{closable:!1,confirmLoading:K,"data-testid":"delete-modal",footer:r.createElement("div",{className:"tw-justify-end","data-testid":"footer"},r.createElement(w.z,{className:"tw-mr-2","data-testid":"discard-button",disabled:"waiting"===_.loading,size:"regular",theme:"primary",variant:"text",onClick:j},"Cancel"),"waiting"===_.loading?r.createElement(w.z,{disabled:!0,className:"tw-w-16 tw-h-8 tw-rounded-md disabled:tw-opacity-100","data-testid":"loading-button",size:"custom",theme:"primary",variant:"contained"},r.createElement(y.Z,{size:"small",type:"white"})):r.createElement(w.z,{className:"tw-h-8 tw-px-3 tw-py-2 tw-rounded-md","data-testid":"confirm-button",disabled:!W(),size:"custom",theme:"primary",variant:"contained",onClick:function(){U(!1),O((function(e){return(0,i.pi)((0,i.pi)({},e),{loading:"waiting"})})),(0,d.Ks)(R?[u.py.DASHBOARD_SERVICE,u.py.DATABASE_SERVICE,u.py.MESSAGING_SERVICE,u.py.PIPELINE_SERVICE,u.py.METADATA_SERVICE].includes(C||"")?"services/"+C+"s":C===u.py.GLOSSARY?"glossaries":C===u.py.POLICY?"policies":C===u.py.TEST_SUITE||C===u.py.KPI?C:C+"s":C,null!=N?N:"",Boolean(L),!_.softDelete).then((function(e){200===e.status?setTimeout((function(){j(),(0,g.XA)(p.Z["api-success-messages"]["delete-entity-success"].replace("Entity",(0,l.startCase)(C))),P?P():setTimeout((function(){I.push("/")}),500)}),1e3):(0,g.Eo)(p.Z["api-error-messages"]["unexpected-server-response"])})).catch((function(e){(0,g.Eo)(e,p.Z["api-error-messages"]["delete-entity-error"])})).finally((function(){j(),U(!1)}))}},"Confirm")),okText:"Delete",title:"Delete "+v,visible:b,onCancel:j},r.createElement(s.ZP.Group,{value:V,onChange:function(e){var t,n=e.target.value;B(n),void 0===(t=n===a.SOFT_DELETE)&&(t=!0),O((function(e){return(0,i.pi)((0,i.pi)({},e),{state:!0,softDelete:t})}))}},J.map((function(e){return e.isAllowd&&r.createElement(s.ZP,{"data-testid":e.type,key:e.type,value:e.type},r.createElement("p",{className:"tw-text-sm tw-mb-1 tw-font-medium","data-testid":e.type+"-option"},e.title),r.createElement("p",{className:"tw-text-grey-muted tw-text-xs tw-mb-2"},e.description))}))),r.createElement("div",null,r.createElement("p",{className:"tw-mb-2"},"Type ",r.createElement("strong",null,"DELETE")," to confirm"),r.createElement("input",{autoComplete:"off",className:"tw-form-inputs tw-form-inputs-padding","data-testid":"confirmation-text-input",disabled:"waiting"===_.loading,name:"entityName",placeholder:"DELETE",type:"text",value:M,onChange:function(e){H(e.target.value)}})))}},41603:function(e,t,n){n.d(t,{Z:function(){return k}});var a=n(70655),i=n(67814),o=n(28682),s=n(94199),l=n(71230),r=n(15746),c=n(56256),d=n(13013),m=n(71577),u=n(94184),p=n.n(u),E=n(67294),f=n(437),g=n(52114),w=n(71859),y=n(38464),b=n(72945),h=n(93379),D=n.n(h),x=n(7795),T=n.n(x),Z=n(90569),v=n.n(Z),C=n(3565),S=n.n(C),N=n(19216),A=n.n(N),R=n(44589),L=n.n(R),P=n(64666),I={};I.styleTagTransform=L(),I.setAttributes=S(),I.insert=v().bind(null,"head"),I.domAPI=T(),I.insertStyleElement=A(),D()(P.Z,I),P.Z&&P.Z.locals&&P.Z.locals;var k=function(e){var t=e.allowSoftDelete,n=e.afterDeleteAction,u=e.buttonClassName,h=e.deleteMessage,D=e.softDeleteMessagePostFix,x=e.hardDeleteMessagePostFix,T=e.entityName,Z=e.entityType,v=e.canDelete,C=e.entityId,S=e.isRecursiveDelete,N=e.extraDropdownContent,A=e.onAnnouncementClick,R=e.onRestoreEntity,L=e.deleted,P=(0,f.$)().t,I=(0,a.CR)((0,E.useState)(!1),2),k=I[0],_=I[1],O=(0,a.CR)((0,E.useState)(!1),2),F=O[0],M=O[1],H=E.createElement(o.Z,{items:(0,a.ev)((0,a.ev)((0,a.ev)([{label:E.createElement(s.Z,{title:v?"":g.oH},E.createElement(l.Z,{className:p()("tw-cursor-pointer manage-button",{"tw-cursor-not-allowed tw-opacity-50":!v}),onClick:function(e){v&&(e.stopPropagation(),M(!0),_(!1))}},E.createElement(r.Z,{span:3},E.createElement(y.ZP,{alt:"Delete",icon:y.PJ.DELETE,width:"20px"})),E.createElement(r.Z,{span:21},E.createElement(l.Z,{"data-testid":"delete-button"},E.createElement(r.Z,{span:21},E.createElement(c.Z.Text,{className:"font-medium","data-testid":"delete-button-title"},P("label.delete"))),E.createElement(r.Z,{className:"p-t-xss"},E.createElement(c.Z.Paragraph,{className:"text-grey-muted text-xs m-b-0 line-height-16"},P("message.delete-action-description",{entityType:Z}))))))),key:"delete-button"}],(0,a.CR)(L?[{label:E.createElement(s.Z,{title:v?"":g.oH},E.createElement(l.Z,{className:p()("tw-cursor-pointer manage-button",{"tw-cursor-not-allowed tw-opacity-50":!v}),onClick:function(e){v&&(e.stopPropagation(),_(!1),R&&R())}},E.createElement(r.Z,{span:3}," ",E.createElement(y.ZP,{alt:"Restore",icon:y.PJ.RESTORE,width:"20px"})),E.createElement(r.Z,{span:21},E.createElement(l.Z,{"data-testid":"restore-button"},E.createElement(r.Z,{span:21},E.createElement(c.Z.Text,{className:"font-medium","data-testid":"delete-button-title"},P("label.restore"))),E.createElement(r.Z,{className:"p-t-xss"},E.createElement(c.Z.Paragraph,{className:"text-grey-muted text-xs m-b-0 line-height-16"},P("message.restore-action-description",{entityType:Z}))))))),key:"restore-button"}]:[])),(0,a.CR)(w.Ib.includes(Z)?[{label:E.createElement(l.Z,{className:"tw-cursor-pointer manage-button",onClick:function(e){e.stopPropagation(),_(!1),A&&A()}},E.createElement(r.Z,{span:3},E.createElement(y.ZP,{alt:"announcement",icon:y.PJ.ANNOUNCEMENT_BLACK,width:"20px"})),E.createElement(r.Z,{span:21},E.createElement(l.Z,{"data-testid":"announcement-button"},E.createElement(r.Z,{span:21},E.createElement(c.Z.Text,{className:"font-medium"},P("label.announcements"))),E.createElement(r.Z,{className:"p-t-xss"},E.createElement(c.Z.Paragraph,{className:"text-grey-muted text-xs m-b-0 line-height-16"},P("message.announcement-action-description")))))),key:"announcement-button"}]:[])),(0,a.CR)(N||[]))});return E.createElement(E.Fragment,null,E.createElement(d.Z,{align:{targetOffset:[-12,0]},overlay:H,overlayStyle:{width:"350px"},placement:"bottomRight",trigger:["click"],visible:k,onVisibleChange:_},E.createElement(m.Z,{className:p()("tw-rounded tw-flex tw-justify-center tw-w-6 manage-dropdown-button",u),"data-testid":"manage-button",size:"small",title:"Manage",type:"default",onClick:function(){return _(!0)}},E.createElement(i.G,{className:"tw-text-primary tw-self-center manage-dropdown-icon",icon:"ellipsis-vertical"}))),F&&E.createElement(b.Z,{afterDeleteAction:n,allowSoftDelete:t,deleteMessage:h,entityId:C||"",entityName:T||"",entityType:Z||"",hardDeleteMessagePostFix:x,isRecursiveDelete:S,softDeleteMessagePostFix:D,visible:F,onCancel:function(){return M(!1)}}))}}}]);