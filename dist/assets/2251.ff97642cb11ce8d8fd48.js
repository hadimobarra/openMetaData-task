/*! For license information please see 2251.ff97642cb11ce8d8fd48.js.LICENSE.txt */
(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2251],{56334:function(e,t,n){"use strict";var a=n(8081),r=n.n(a),o=n(23645),i=n.n(o)()(r());i.push([e.id,'/*\n *  Copyright 2021 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.kpi-slider .ant-slider-track {\n  background: #54C5D0;\n}\n',""]),t.Z=i},20514:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var a=n(67294),r=n(11411),o=n.n(r),i=n(79896);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}function u(e){var t=e.children,n=e.width,r=e.height,u=e.viewBox,s=e.className,c=e.style,p=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["children","width","height","viewBox","className","style"]),d=u||{width:n,height:r,x:0,y:0},m=o()("recharts-surface",s);return a.createElement("svg",l({},(0,i.L6)(p,!0,!0),{className:m,width:n,height:r,style:c,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height),version:"1.1"}),t)}},79896:function(e,t,n){"use strict";n.d(t,{L6:function(){return c},Ym:function(){return p},bw:function(){return d}});var a=n(13218),r=n.n(a),o=n(67294);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var l=["viewBox","children"],u=["className","color","height","id","lang","max","media","method","min","name","style","target","type","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],c=function(e,t,n){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var a=e;if((0,o.isValidElement)(e)&&(a=e.props),!r()(a))return null;var i={};return Object.keys(a).forEach((function(e){(u.includes(e)||n&&l.includes(e)||t&&s.includes(e))&&(i[e]=a[e])})),i},p=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if((0,o.isValidElement)(e)&&(n=e.props),!r()(n))return null;var a={};return Object.keys(n).forEach((function(e){s.includes(e)&&(a[e]=t||function(t){return n[e](n,t)})})),a},d=function(e,t,n){if(!r()(e)||"object"!==i(e))return null;var a=null;return Object.keys(e).forEach((function(r){var o=e[r];s.includes(r)&&"function"==typeof o&&(a||(a={}),a[r]=function(e,t,n){return function(a){return e(t,n,a),null}}(o,t,n))})),a}},11411:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=r.apply(null,n);i&&e.push(i)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var l in n)a.call(n,l)&&n[l]&&e.push(l)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},60668:function(e,t,n){"use strict";var a=n(93379),r=n.n(a),o=n(7795),i=n.n(o),l=n(90569),u=n.n(l),s=n(3565),c=n.n(s),p=n(19216),d=n.n(p),m=n(44589),f=n.n(m),h=n(56334),g={};g.styleTagTransform=f(),g.setAttributes=c(),g.insert=u().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=d(),r()(h.Z,g),h.Z&&h.Z.locals&&h.Z.locals},42088:function(e,t,n){"use strict";n.r(t);var a=n(70655),r=n(34041),o=n(71230),i=n(15746),l=n(91894),u=n(56256),s=n(9242),c=n(4107),p=n(99177),d=n(85986),m=n(23592),f=n(19650),h=n(71577),g=n(96486),C=n(67294),y=n(437),v=n(59293),b=n(87272),E=n(97809),k=n(84419),S=(n(60668),n(67800)),x=n(96364),P=n(62761),T=n(60625),D=n(64632),w=n(19305),O=n(83531),I=n(36096),A=n(87968),Z=n(50168),L=r.Z.Option,N=[{name:(0,S.t)("label.data-insight"),url:P.Z6.DATA_INSIGHT},{name:(0,S.t)("label.kpi-list"),url:P.Z6.KPI_LIST},{name:(0,S.t)("label.add-new-kpi"),url:"",activeTitle:!0}];t.default=function(){var e=(0,y.$)().t,t=(0,v.k6)(),n=(0,a.CR)((0,C.useState)([]),2),S=n[0],M=n[1],R=(0,a.CR)((0,C.useState)(""),2),U=R[0],j=R[1],q=(0,a.CR)((0,C.useState)(),2),B=q[0],V=q[1],H=(0,a.CR)((0,C.useState)(),2),F=H[0],W=H[1],z=(0,a.CR)((0,C.useState)(0),2),K=z[0],_=z[1],G=(0,a.CR)((0,C.useState)(!1),2),Y=G[0],X=G[1],J=(0,a.CR)((0,C.useState)(T.cA),2),$=J[0],Q=J[1],ee=(0,a.CR)((0,C.useState)([]),2),te=ee[0],ne=ee[1],ae=(0,C.useMemo)((function(){var e;return(null!==(e=null==B?void 0:B.metrics)&&void 0!==e?e:[]).filter((function(e){return[w.r.Number,w.r.Percentage].includes(e.chartDataType)}))}),[B]),re=(0,C.useMemo)((function(){return S.filter((function(e){return!te.find((function(t){return t.dataInsightChart.name===e.name}))}))}),[te,S]),oe=function(e,t){Q((function(n){var r;return(0,a.pi)((0,a.pi)({},n),((r={})[t]=e,r))}))};return(0,C.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,b.zu)()];case 1:return e=a.sent(),t=e.data.filter((function(e){return T.VJ.includes(e.name)})),M(t),[3,3];case 2:return n=a.sent(),(0,Z.Eo)(n),[3,3];case 3:return[2]}}))})),(0,a.mG)(void 0,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,x.Gw)({fields:"dataInsightChart"})];case 1:return e=t.sent(),ne(e.data),[3,3];case 2:return t.sent(),ne([]),[3,3];case 3:return[2]}}))}))}),[]),C.createElement(o.Z,{className:"bg-body-main h-full","data-testid":"add-kpi-container",gutter:[16,16]},C.createElement(i.Z,{offset:4,span:12},C.createElement(k.Z,{className:"my-4",titleLinks:N}),C.createElement(l.Z,null,C.createElement(u.Z.Paragraph,{className:"text-base","data-testid":"form-title"},e("label.add-new-kpi")),C.createElement(s.Z,{"data-testid":"kpi-form",id:"kpi-form",layout:"vertical",validateMessages:T.lw,onFinish:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var n,r,o,i,l,u,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:n=(0,I.ET)($),r=(0,A.ul)(n.startDate),o=(0,A.ul)(n.endDate),i=null==F?void 0:F.chartDataType,l=(0,I.cW)(i,K),u={dataInsightChart:{id:e.dataInsightChart,type:D.py.DATA_INSIGHT_CHART},description:U,name:(0,g.kebabCase)(e.displayName+" "+(null==F?void 0:F.name)),displayName:e.displayName,startDate:r,endDate:o,metricType:i,targetDefinition:[{name:null==F?void 0:F.name,value:l+""}]},X(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,x.gg)(u)];case 2:return a.sent(),t.push(P.Z6.KPI_LIST),[3,5];case 3:return s=a.sent(),(0,Z.Eo)(s),[3,5];case 4:return X(!1),[7];case 5:return[2]}}))}))}},C.createElement(s.Z.Item,{label:e("label.select-a-chart"),name:"dataInsightChart",rules:[{required:!0,message:e("message.data-insight-chart-required")}]},C.createElement(r.Z,{"data-testid":"dataInsightChart",notFoundContent:e("message.all-charts-are-mapped"),placeholder:e("label.select-a-chart"),value:null==B?void 0:B.id,onChange:function(e){var t=S.find((function(t){return t.id===e}));V(t)}},re.map((function(e){return C.createElement(L,{key:e.id},e.displayName||e.name)})))),C.createElement(s.Z.Item,{label:e("label.display-name"),name:"displayName"},C.createElement(c.Z,{"data-testid":"displayName",placeholder:e("label.kpi-display-name"),type:"text"})),C.createElement(s.Z.Item,{label:e("label.select-a-metric-type"),name:"metricType",rules:[{required:!0,message:e("message.metric-type-required")}]},C.createElement(r.Z,{"data-testid":"metricType",disabled:(0,g.isUndefined)(B),placeholder:e("label.select-a-metric-type"),value:null==F?void 0:F.name,onChange:function(e){var t=ae.find((function(t){return t.name===e}));W(t)}},ae.map((function(e){return C.createElement(L,{key:e.name},e.name+" ("+e.chartDataType+")")})))),!(0,g.isUndefined)(F)&&C.createElement(s.Z.Item,{label:e("label.metric-value"),name:"metricValue",rules:[{required:!0,validator:function(){return K>=0?Promise.resolve():Promise.reject(e("message.metric-value-required"))}}]},C.createElement(C.Fragment,null,F.chartDataType===w.r.Percentage&&C.createElement(o.Z,{"data-testid":"metric-percentage-input",gutter:20},C.createElement(i.Z,{span:20},C.createElement(p.Z,{className:"kpi-slider",marks:{0:"0%",100:"100%"},max:100,min:0,tooltipPlacement:"bottom",tooltipVisible:!1,value:K,onChange:function(e){_(e)}})),C.createElement(i.Z,{span:4},C.createElement(d.Z,{formatter:function(e){return e+"%"},max:100,min:0,step:1,value:K,onChange:function(e){_(Number(e))}}))),F.chartDataType===w.r.Number&&C.createElement(d.Z,{className:"w-full","data-testid":"metric-number-input",min:0,value:K,onChange:function(e){return _(Number(e))}}))),C.createElement(o.Z,{gutter:[8,8]},C.createElement(i.Z,{span:12},C.createElement(s.Z.Item,{label:e("label.start-date"),messageVariables:{fieldName:"startDate"},name:"startDate",rules:[{required:!0,message:e("label.field-required",{field:e("label.start-date")})}]},C.createElement(m.Z,{className:"w-full","data-testid":"start-date",disabledDate:I.nu,format:T.aJ,onChange:function(e,t){return oe(t,O.O.START_DATE)}}))),C.createElement(i.Z,{span:12},C.createElement(s.Z.Item,{label:e("label.end-date"),messageVariables:{fieldName:"endDate"},name:"endDate",rules:[{required:!0,message:e("label.field-required",{field:e("label.end-date")})}]},C.createElement(m.Z,{className:"w-full","data-testid":"end-date",disabledDate:I.nu,format:T.aJ,onChange:function(e,t){return oe(t,O.O.END_DATE)}})))),C.createElement(s.Z.Item,{label:e("label.description"),name:"description"},C.createElement(E.Z,{height:"200px",initialValue:U,placeHolder:e("label.write-your-description"),style:{margin:0},onTextChange:function(e){return j(e)}})),C.createElement(f.Z,{align:"center",className:"w-full justify-end"},C.createElement(h.Z,{"data-testid":"cancel-btn",type:"link",onClick:function(){return t.goBack()}},e("label.cancel")),C.createElement(h.Z,{"data-testid":"submit-btn",form:"kpi-form",htmlType:"submit",loading:Y,type:"primary"},e("label.submit")))))),C.createElement(i.Z,{className:"m-t-md","data-testid":"right-panel",span:4},C.createElement(u.Z.Paragraph,{className:"text-base font-medium"},e("label.add-kpi")),C.createElement(u.Z.Text,null,e("message.add-kpi-message"))))}}}]);