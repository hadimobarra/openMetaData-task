"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[6030],{83663:function(e,t,n){var a=n(75263).default,i=n(64836).default;t.Z=void 0;var r,l=i(n(81670)),o=i(n(10434)),s=i(n(40753)),c=i(n(36228)),d=i(n(57315)),u=a(n(67294)),m=i(n(65400)),f=n(41954),p=n(31929),v=n(51130),w=i(n(73625)),E=n(53683),g=n(38882),h=(i(n(13594)),n(10625));(0,g.canUseDocElement)()&&document.documentElement.addEventListener("click",(function(e){r={x:e.pageX,y:e.pageY},setTimeout((function(){r=null}),100)}),!0);t.Z=function(e){var t,n=u.useContext(p.ConfigContext),a=n.getPopupContainer,i=n.getPrefixCls,g=n.direction,y=function(t){var n=e.onCancel;null==n||n(t)},b=function(t){var n=e.onOk;null==n||n(t)},N=e.prefixCls,C=e.footer,x=e.visible,Z=e.open,T=void 0!==Z&&Z,k=e.wrapClassName,S=e.centered,D=e.getContainer,A=e.closeIcon,R=e.focusTriggerAfterClose,P=void 0===R||R,L=e.width,O=void 0===L?520:L,I=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","width"]),B=i("modal",N),U=i(),V=u.createElement(w.default,{componentName:"Modal",defaultLocale:(0,h.getConfirmLocale)()},(function(t){var n=e.okText,a=e.okType,i=void 0===a?"primary":a,r=e.cancelText,l=e.confirmLoading,s=void 0!==l&&l;return u.createElement(u.Fragment,null,u.createElement(m.default,(0,o.default)({onClick:y},e.cancelButtonProps),r||t.cancelText),u.createElement(m.default,(0,o.default)({},(0,f.convertLegacyProps)(i),{loading:s,onClick:b},e.okButtonProps),null!=n?n:t.okText))})),G=u.createElement("span",{className:"".concat(B,"-close-x")},A||u.createElement(s.default,{className:"".concat(B,"-close-icon")})),J=(0,c.default)(k,(t={},(0,l.default)(t,"".concat(B,"-centered"),!!S),(0,l.default)(t,"".concat(B,"-wrap-rtl"),"rtl"===g),t));return u.createElement(v.NoFormStyle,{status:!0,override:!0},u.createElement(d.default,(0,o.default)({width:O},I,{getContainer:void 0===D?a:D,prefixCls:B,wrapClassName:J,footer:void 0===C?V:C,visible:T||x,mousePosition:r,onClose:y,closeIcon:G,focusTriggerAfterClose:P,transitionName:(0,E.getTransitionName)(U,"zoom",e.transitionName),maskTransitionName:(0,E.getTransitionName)(U,"fade",e.maskTransitionName)})))}},49857:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.description-markdown-editor .ant-modal-header,\n.description-markdown-editor .ant-modal-body,\n.description-markdown-editor .ant-modal-footer {\n  padding: 20px 24px;\n}\n',""]),t.Z=l},19396:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.add-new-tag-btn {\n  height: 32px;\n}\n.add-new-tag-btn .ant-btn {\n  height: 32px;\n}\n',""]),t.Z=l},52977:function(e,t,n){var a=n(71577),i=n(56256),r=n(83663),l=n(94184),o=n.n(l),s=n(67294),c=n(437);t.Z=function(e){var t=e.loadingState,n=void 0===t?"initial":t,l=e.cancelText,d=e.confirmText,u=e.header,m=e.headerClassName,f=void 0===m?"":m,p=e.bodyClassName,v=void 0===p?"":p,w=e.footerClassName,E=void 0===w?"":w,g=e.confirmButtonCss,h=void 0===g?"":g,y=e.cancelButtonCss,b=void 0===y?"":y,N=e.onConfirm,C=e.onCancel,x=e.bodyText,Z=e.className,T=e.visible,k=(0,c.$)().t;return s.createElement(r.Z,{centered:!0,destroyOnClose:!0,className:Z,closable:!1,"data-testid":"confirmation-modal",footer:s.createElement("div",{className:o()("justify-end",E)},s.createElement(a.Z,{className:o()("mr-2",b),"data-testid":"cancel",key:"remove-edge-btn",type:"text",onClick:C},l),s.createElement(a.Z,{className:h,danger:d===k("label.delete"),"data-testid":"waiting"===n?"loading-button":"save-button",key:"save-btn",type:"primary",onClick:N},d)),title:s.createElement(i.Z.Text,{strong:!0,className:f,"data-testid":"modal-header"},u),visible:T},s.createElement("div",{className:o()("h-20",v)},s.createElement(i.Z.Text,{"data-testid":"body-text"},x)))}},14053:function(e,t,n){var a=n(70655),i=n(50146),r=n(71577),l=n(56256),o=n(67800),s=n(67294);t.Z=function(e){var t=e.onCancel,n=e.onChange,c=e.onSave,d=e.form,u=e.header,m=e.initialData,f=e.errorData,p=e.isSaveButtonDisabled,v=e.visible,w=(0,s.useRef)(),E=(0,a.CR)((0,s.useState)(m),2),g=E[0],h=E[1];return s.createElement(i.Z,{centered:!0,destroyOnClose:!0,closable:!1,"data-testid":"modal-container",footer:s.createElement("div",{className:"tw-modal-footer","data-testid":"cta-container"},s.createElement(r.Z,{type:"link",onClick:t},(0,o.t)("label.cancel")),s.createElement(r.Z,{"data-testid":"saveButton",disabled:p,form:"form-modal",htmlType:"submit",type:"primary"},(0,o.t)("label.save"))),title:s.createElement(l.Z.Text,{strong:!0,"data-testid":"header"},u),visible:v,width:1300,onCancel:t},s.createElement("form",{id:"form-modal",onSubmit:function(e){var t;e.preventDefault(),c((0,a.pi)((0,a.pi)({},g),{description:(null===(t=null==w?void 0:w.current)||void 0===t?void 0:t.fetchMarkDownData())||""}))}},s.createElement(d,{errorData:f,initialData:m,ref:w,saveData:function(e){h(e),n&&n(e)}})))}},47368:function(e,t,n){n.d(t,{p:function(){return T}});var a=n(70655),i=n(50146),r=n(71577),l=n(56256),o=n(67294),s=n(437),c=n(50168),d=n(97809),u=n(53867),m=n(93379),f=n.n(m),p=n(7795),v=n.n(p),w=n(90569),E=n.n(w),g=n(3565),h=n.n(g),y=n(19216),b=n.n(y),N=n(44589),C=n.n(N),x=n(49857),Z={};Z.styleTagTransform=C(),Z.setAttributes=h(),Z.insert=E().bind(null,"head"),Z.domAPI=v(),Z.insertStyleElement=b(),f()(x.Z,Z),x.Z&&x.Z.locals&&x.Z.locals;var T=function(e){var t=e.header,n=e.placeholder,m=e.value,f=e.onSave,p=e.onCancel,v=e.visible,w=(0,s.$)().t,E=(0,a.CR)((0,o.useState)(!1),2),g=E[0],h=E[1],y=(0,o.useRef)();return o.createElement(i.Z,{centered:!0,destroyOnClose:!0,className:"description-markdown-editor",closable:!1,"data-testid":"markdown-editor",footer:[o.createElement(r.Z,{"data-testid":"cancel",disabled:g,key:"cancelButton",type:"link",onClick:p},w("label.cancel")),o.createElement(r.Z,{"data-testid":"save",key:"saveButton",type:"primary",onClick:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:if(!y.current)return[3,5];h(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,null==f?void 0:f(null!==(n=null===(t=y.current)||void 0===t?void 0:t.getEditorContent().trim())&&void 0!==n?n:"")];case 2:return a.sent(),[3,5];case 3:return e=a.sent(),(0,c.Eo)(e),[3,5];case 4:return h(!1),[7];case 5:return[2]}}))}))}},g?o.createElement(u.Z,{size:"small",type:"white"}):w("label.save"))],open:v,title:o.createElement(l.Z.Text,{"data-testid":"header"},t),width:"90%",onCancel:p},o.createElement(d.Z,{initialValue:m,placeHolder:n,ref:y}))}},88816:function(e,t,n){var a=n(91894),i=n(96486),r=n(67294);t.Z=function(e){var t=e.children,n=e.id,l=e.classes;return r.createElement(a.Z,{className:l+" left-panel-card tw-h-full page-layout-v1-left-panel page-layout-v1-vertical-scroll","data-testid":(0,i.lowerCase)(n)+"-left-panel"},r.createElement("div",null,t))}},9632:function(e,t,n){var a=n(70655),i=n(55241),r=n(94184),l=n.n(r),o=n(67800),s=n(96486),c=n(67294),d=n(59293),u=n(58369),m=n(31615),f=n(48132),p=n(22215),v=n(38464),w=n(44355),E=n(50168),g=n(47368),h=n(80131);t.Z=function(e){var t=e.className,n=e.hasEditAccess,r=e.onDescriptionEdit,y=e.description,b=void 0===y?"":y,N=e.isEdit,C=e.onCancel,x=e.onDescriptionUpdate,Z=e.isReadOnly,T=void 0!==Z&&Z,k=e.removeBlur,S=void 0!==k&&k,D=e.entityName,A=e.entityFieldThreads,R=e.onThreadLinkSelect,P=e.entityType,L=e.entityFqn,O=e.entityFieldTasks,I=(0,d.k6)(),B=null==A?void 0:A[0],U=null==O?void 0:O[0],V=function(){I.push((0,w.Ie)(P,L))},G=function(){I.push((0,w.Q3)(P,L))},J=function(){r&&r()},M=function(){var e=Boolean(b.trim());return w.GZ.includes(P)?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"request-entity-description",onClick:e?G:V},c.createElement(i.Z,{destroyTooltipOnHide:!0,content:e?"Request update description":"Request description",overlayClassName:"ant-popover-request-description",trigger:"hover",zIndex:9999},c.createElement(v.ZP,{alt:"request-description",icon:v.PJ.REQUEST,width:"16px"}))):null},F=function(e){var t=e.descriptionThread;return(0,s.isUndefined)(t)?c.createElement(c.Fragment,null,(null==b?void 0:b.trim())&&R?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"start-description-thread",onClick:function(){return null==R?void 0:R((0,p.ec)(P,L,u.Sn.DESCRIPTION))}},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT_PLUS,width:"16px"})):null):c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-thread",onClick:function(){return null==R?void 0:R(t.entityLink)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-thread-count"}," ",t.count)))};return c.createElement("div",{className:"schema-description tw-relative "+t},c.createElement("div",{className:"tw-flex description-inner-main-container tw-items-end"},c.createElement("div",{className:"tw-relative"},c.createElement("div",{className:"description tw-h-full tw-overflow-y-scroll tw-relative ","data-testid":"description",id:"center"},(null==b?void 0:b.trim())?c.createElement(h.Z,{enableSeeMoreVariant:!S,markdown:b}):c.createElement("span",{className:"tw-no-description p-y-xs"},(0,o.t)("label.no-description"))),c.createElement(g.p,{header:(0,o.t)("label.edit-description-for",{entityName:D}),placeholder:(0,o.t)("label.enter-description"),value:b,visible:Boolean(N),onCancel:C,onSave:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:if(!x||!(0,s.isFunction)(x))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,x(e)];case 2:return n.sent(),C&&C(),[3,4];case 3:return t=n.sent(),(0,E.Eo)(t),[3,4];case 4:return[2]}}))}))}})),c.createElement((function(){return T?null:c.createElement("div",{className:l()("tw-w-5 tw-min-w-max tw-flex")},n&&c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none focus:tw-outline-none","data-testid":"edit-description",onClick:J},c.createElement(v.ZP,{alt:"edit",icon:"icon-edit",title:"Edit",width:"16px"})),(0,f.nq)(P)?c.createElement(c.Fragment,null," ",c.createElement(M,null),(0,s.isUndefined)(U)?null:c.createElement("button",{className:"tw-w-7 tw-h-7 tw-mr-2 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-task",onClick:function(){return null==R?void 0:R(U.entityLink,m.Th.Task)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"tasks",icon:v.PJ.TASK_ICON,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-tasks-count"}," ",U.count)))):null,c.createElement(F,{descriptionThread:B}))}),null)))}},88835:function(e,t,n){var a;n.d(t,{l:function(){return a}}),function(e){e.System="system",e.User="user"}(a||(a={}))},26030:function(e,t,n){n.r(t),n.d(t,{default:function(){return oe}});var a,i,r=n(70655),l=n(67814),o=n(94199),s=n(56256),c=n(19650),d=n(71230),u=n(15746),m=n(4107),f=n(71577),p=n(25213),v=n(96486),w=n(67294),E=n(437),g=n(97882),h=n(59293),y=n(43318),b=n(9632),N=n(28178),C=n(88816),x=n(80131),Z=n(74380),T=n(14109),k=n(53867),S=n(52977),D=n(14053),A=n(47368),R=n(93389),P=n(79839),L=n(62761),O=n(52114),I=n(16139),B=n(88835);!function(e){e.Allow="allow",e.Deny="deny"}(a||(a={})),function(e){e.All="All",e.Create="Create",e.Delete="Delete",e.EditAll="EditAll",e.EditCustomFields="EditCustomFields",e.EditDataProfile="EditDataProfile",e.EditDescription="EditDescription",e.EditDisplayName="EditDisplayName",e.EditLineage="EditLineage",e.EditOwner="EditOwner",e.EditQueries="EditQueries",e.EditReviewers="EditReviewers",e.EditSampleData="EditSampleData",e.EditStatus="EditStatus",e.EditTags="EditTags",e.EditTests="EditTests",e.EditTier="EditTier",e.EditUsers="EditUsers",e.ViewAll="ViewAll",e.ViewBasic="ViewBasic",e.ViewDataProfile="ViewDataProfile",e.ViewQueries="ViewQueries",e.ViewSampleData="ViewSampleData",e.ViewTests="ViewTests",e.ViewUsage="ViewUsage"}(i||(i={}));var U=n(6929),V=n(48132),G=n(39570),J=n(96840),M=n(81274),F=n(38464),q=n(37428),z=n(50168),_=n(97809),j=(0,w.forwardRef)((function(e,t){var n=e.saveData,a=e.initialData,i=e.errorData,l=(0,r.CR)((0,w.useState)({name:a.name,description:a.description}),2),o=l[0],s=l[1],c=(0,w.useRef)(!0),d=(0,w.useRef)();return(0,w.useImperativeHandle)(t,(function(){return{fetchMarkDownData:function(){var e;return null===(e=d.current)||void 0===e?void 0:e.getEditorContent()}}})),(0,w.useEffect)((function(){c.current||n((0,r.pi)({},o))}),[o]),(0,w.useEffect)((function(){c.current=!1}),[]),w.createElement("div",{className:"tw-w-full tw-flex "},w.createElement("div",{className:"tw-flex tw-w-full"},w.createElement("div",{className:"tw-w-full"},w.createElement("div",{className:"tw-mb-4"},w.createElement("label",{className:"tw-form-label required-field"},"Name"),w.createElement("input",{autoComplete:"off",className:"tw-text-sm tw-appearance-none tw-border tw-border-main\n                tw-rounded tw-w-full tw-py-2 tw-px-3 tw-text-grey-body  tw-leading-tight\n                focus:tw-outline-none focus:tw-border-focus hover:tw-border-hover tw-h-10","data-testid":"name",name:"name",placeholder:"Name",type:"text",value:o.name,onChange:function(e){e.persist(),s((function(t){var n;return(0,r.pi)((0,r.pi)({},t),((n={})[e.target.name]=e.target.value,n))}))}}),(null==i?void 0:i.name)&&(0,V.Ti)(i.name)),w.createElement("div",null,w.createElement("label",{className:"tw-form-label"},"Description"),w.createElement(_.Z,{initialValue:o.description,ref:d})))))})),H=n(93379),Q=n.n(H),Y=n(7795),W=n.n(Y),K=n(90569),$=n.n(K),X=n(3565),ee=n.n(X),te=n(19216),ne=n.n(te),ae=n(44589),ie=n.n(ae),re=n(19396),le={};le.styleTagTransform=ie(),le.setAttributes=ee(),le.insert=$().bind(null,"head"),le.domAPI=W(),le.insertStyleElement=ne(),Q()(re.Z,le),re.Z&&re.Z.locals&&re.Z.locals;var oe=function(){var e,t,n,a,_,H=(0,R.BL)(),Q=H.getEntityPermission,Y=H.permissions,W=(0,h.k6)(),K=(0,h.UO)().tagCategoryName,$=(0,r.CR)((0,w.useState)([]),2),X=$[0],ee=$[1],te=(0,r.CR)((0,w.useState)(),2),ne=te[0],ae=te[1],ie=(0,r.CR)((0,w.useState)(!1),2),re=ie[0],le=ie[1],oe=(0,r.CR)((0,w.useState)(!1),2),se=oe[0],ce=oe[1],de=(0,r.CR)((0,w.useState)(!1),2),ue=de[0],me=de[1],fe=(0,r.CR)((0,w.useState)(!1),2),pe=fe[0],ve=fe[1],we=(0,r.CR)((0,w.useState)(),2),Ee=we[0],ge=we[1],he=(0,r.CR)((0,w.useState)(""),2),ye=he[0],be=he[1],Ne=(0,r.CR)((0,w.useState)(!1),2),Ce=Ne[0],xe=Ne[1],Ze=(0,r.CR)((0,w.useState)(),2),Te=Ze[0],ke=Ze[1],Se=(0,r.CR)((0,w.useState)(),2),De=Se[0],Ae=Se[1],Re=(0,r.CR)((0,w.useState)({data:void 0,state:!1}),2),Pe=Re[0],Le=Re[1],Oe=(0,r.CR)((0,w.useState)(G.Bd),2),Ie=Oe[0],Be=Oe[1],Ue=(0,r.CR)((0,w.useState)(!1),2),Ve=Ue[0],Ge=Ue[1],Je=(0,r.CR)((0,w.useState)(""),2),Me=Je[0],Fe=Je[1],qe=(0,E.$)().t,ze=(0,w.useMemo)((function(){return(0,G.P_)(i.Create,P.A.TAG_CATEGORY,Y)}),[Y]),_e=(0,w.useMemo)((function(){return(0,G.P_)(i.Create,P.A.TAG,Y)}),[Y]),je=function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){var n,a,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if((null==ne?void 0:ne.name)===e&&!t)return[3,4];xe(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,y.n3)(e,"usageCount")];case 2:return(n=r.sent())?(ae(n),Fe(n.name),xe(!1)):(0,z.Eo)(U.Z["api-error-messages"]["unexpected-server-response"]),[3,4];case 3:return a=r.sent(),i=(0,M.HR)(a,U.Z["api-error-messages"]["fetch-tags-category-error"]),(0,z.Eo)(i),be(i),ae({name:e}),xe(!1),[3,4];case 4:return[2]}}))}))},He=function(e,t){if(void 0===t&&(t=!1),Te||t){var n={};return e.name.trim()?I.BJ.test(e.name)?n.name="Name with delimiters are not allowed":(0,v.isUndefined)(X.find((function(t){return(0,v.toLower)(t.name)===(0,v.toLower)(e.name)})))?e.name.length<2||e.name.length>64?n.name="Name size must be between 2 and 64":(0,V.Am)(e.name.trim())||(n.name="Special characters are not allowed"):n.name="Name already exists":n.name="Name is required",ke(n),n}return{}},Qe=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,8,9]),[4,(0,y.MX)(null!==(a=null==ne?void 0:ne.name)&&void 0!==a?a:"",e)];case 1:return(t=i.sent())?(null==ne?void 0:ne.name)===e.name?[3,2]:(W.push((0,J.bT)(t.name)),Ge(!1),[3,4]):[3,5];case 2:return[4,je(null==ne?void 0:ne.name,!0)];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:throw U.Z["api-error-messages"]["unexpected-server-response"];case 6:return[3,9];case 7:return n=i.sent(),(0,z.Eo)(n),[3,9];case 8:return le(!1),[7];case 9:return[2]}}))}))},Ye=function(e,t){var n;if(void 0===t&&(t=!1),De||t){var a={};return e.name.trim()?I.BJ.test(e.name)?a.name="Name with delimiters are not allowed":(0,v.isUndefined)(null===(n=null==ne?void 0:ne.children)||void 0===n?void 0:n.find((function(t){var n;return(0,v.toLower)(null===(n=t)||void 0===n?void 0:n.name)===(0,v.toLower)(e.name)})))?(e.name.length<2||e.name.length>64)&&(a.name="Name size must be between 2 and 64"):a.name="Name already exists":a.name="Name is required",Ae(a),a}return{}};(0,w.useEffect)((function(){ne&&(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Q(P.A.TAG_CATEGORY,null==ne?void 0:ne.id)];case 1:return e=n.sent(),Be(e),[3,3];case 2:return t=n.sent(),(0,z.Eo)(t),[3,3];case 3:return[2]}}))}))}),[ne]),(0,w.useEffect)((function(){if(K){var e=K.startsWith(L.jV);je(e?L.jV:K)}var t;t=!K,xe(!0),(0,q.uL)("usageCount").then((function(e){if(!e.data)throw U.Z["api-error-messages"]["unexpected-server-response"];ee(e.data),t&&(ae(e.data[0]),Fe(e.data[0].name))})).catch((function(e){var t=(0,M.HR)(e,U.Z["api-error-messages"]["fetch-tags-category-error"]);(0,z.Eo)(t),be(t)})).finally((function(){xe(!1)}))}),[K]);var We=(0,w.useMemo)((function(){return[{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"description",key:"description",render:function(e,t){return w.createElement("div",{className:"tw-group tableBody-cell"},w.createElement("div",{className:"cursor-pointer flex"},w.createElement("div",null,e?w.createElement(x.Z,{markdown:e}):w.createElement("span",{className:"tw-no-description"},"No description")),(Ie.EditDescription||Ie.EditAll)&&w.createElement("button",{className:"tw-self-start tw-w-8 tw-h-auto tw-opacity-0 tw-ml-1 group-hover:tw-opacity-100 focus:tw-outline-none",onClick:function(){me(!0),ge(t)}},w.createElement(F.ZP,{alt:"edit","data-testid":"editTagDescription",icon:"icon-edit",title:"Edit",width:"16px"}))),w.createElement("div",{className:"tw-mt-1","data-testid":"usage"},w.createElement("span",{className:"tw-text-grey-muted tw-mr-1"},"Usage:"),t.usageCount?w.createElement(g.Link,{className:"link-text tw-align-middle","data-testid":"usage-count",to:(n=t.fullyQualifiedName||"",a=n.startsWith("Tier")?"tier":"tags",(0,J.LB)("",void 0,"postFilter["+a+".tagFQN][0]="+n))},t.usageCount):w.createElement("span",{className:"tw-no-description","data-testid":"usage-count"},"Not used")));var n,a}},{title:"Actions",dataIndex:"actions",key:"actions",width:120,align:"center",render:function(e,t){var n,a;return w.createElement("button",{className:"link-text","data-testid":"delete-tag",disabled:t.provider===B.l.System||!Ie.EditAll,onClick:function(){return function(e){Le({data:{id:e.id,name:e.name,categoryName:null==ne?void 0:ne.name,isCategory:!1,status:"waiting"},state:!0})}(t)}},(null===(n=Pe.data)||void 0===n?void 0:n.id)===t.id?"success"===(null===(a=Pe.data)||void 0===a?void 0:a.status)?w.createElement(l.G,{icon:"check"}):w.createElement(k.Z,{size:"small",type:"default"}):w.createElement(F.ZP,{alt:"delete",icon:"icon-delete",title:"Delete",width:"16px"}))}}]}),[Ie,Pe]);return w.createElement(Z.Z,null,w.createElement(T.Z,{leftPanel:w.createElement(C.Z,{id:"tags"},w.createElement("div",{className:"tw-py-2","data-testid":"data-summary-container"},w.createElement("div",{className:"tw-px-3"},w.createElement("h6",{className:"tw-heading tw-text-sm tw-font-semibold"},"Tag Categories"),w.createElement("div",{className:"tw-mb-3"},w.createElement(o.Z,{title:qe(ze?"label.add-category":"message.no-permission-for-action")},w.createElement("button",{className:"tw--mt-1 tw-w-full tw-flex-center tw-gap-2 tw-py-1 tw-text-primary tw-border tw-rounded-md tw-text-center","data-testid":"add-category",disabled:!ze,onClick:function(){ce((function(e){return!e})),ke(void 0)}},w.createElement(F.ZP,{alt:"plus",icon:F.PJ.ICON_PLUS_PRIMERY})," ",w.createElement("span",null,qe("label.add-tag-category")))))),X&&X.map((function(e){var t,n;return w.createElement("div",{className:"tw-group tw-text-grey-body tw-cursor-pointer tw-my-1 tw-text-body tw-py-1 tw-px-3 tw-flex tw-justify-between "+(0,V.RV)(e.name,null==ne?void 0:ne.name),"data-testid":"side-panel-category",key:e.name,onClick:function(){W.push((0,J.bT)(e.name))}},w.createElement(s.Z.Paragraph,{className:"ant-typography-ellipsis-custom tag-category label-category self-center w-32","data-testid":"tag-name",ellipsis:{rows:1,tooltip:!0}},(0,V.C_)(e)),(0,V.yh)((null==ne?void 0:ne.name)===e.name?null===(t=ne.children)||void 0===t?void 0:t.length:(null===(n=e.children)||void 0===n?void 0:n.length)||0,"tw-self-center",(null==ne?void 0:ne.name)===e.name))}))))},Ce?w.createElement(k.Z,null):ye?w.createElement(N.Z,null,w.createElement("p",{className:"tw-text-center tw-m-auto"},ye)):w.createElement("div",{className:"full-height","data-testid":"tags-container"},ne&&w.createElement(c.Z,{className:"w-full justify-between","data-testid":"header"},w.createElement(c.Z,{className:"items-center"},Ve?w.createElement(d.Z,{align:"middle",gutter:8},w.createElement(u.Z,null,w.createElement(m.Z,{className:"input-width","data-testid":"tag-category-name",name:"tagCategoryName",value:Me,onChange:function(e){Fe(e.target.value)}})),w.createElement(u.Z,null,w.createElement(f.Z,{className:"icon-buttons","data-testid":"cancelAssociatedTag",icon:w.createElement(l.G,{className:"w-3.5 h-3.5",icon:"times"}),size:"small",type:"primary",onMouseDown:function(){Ge(!1),Fe((null==ne?void 0:ne.name)||"")}}),w.createElement(f.Z,{className:"icon-buttons m-l-xss","data-testid":"saveAssociatedTag",icon:w.createElement(l.G,{className:"w-3.5 h-3.5",icon:"check"}),size:"small",type:"primary",onMouseDown:function(){var e,t;Qe({name:null!==(e=Me||(null==ne?void 0:ne.name))&&void 0!==e?e:"",description:null!==(t=null==ne?void 0:ne.description)&&void 0!==t?t:""})}}))):w.createElement(c.Z,null,w.createElement(s.Z.Title,{className:"m-b-0","data-testid":"category-name",level:5},(0,V.C_)(ne)),ne.provider===B.l.User&&w.createElement(o.Z,{title:Ie.EditAll?qe("label.edit-entity",{entity:qe("label.name")}):O.oH},w.createElement(f.Z,{className:"p-0","data-testid":"name-edit-icon",disabled:!Ie.EditAll,size:"small",type:"text",onClick:function(){return Ge(!0)}},w.createElement(F.ZP,{alt:"icon-tag",className:"tw-mx-1",icon:F.PJ.EDIT,width:"16"}))))),w.createElement("div",{className:"flex-center"},w.createElement(o.Z,{title:_e||Ie.EditAll?"Add Tag":O.oH},w.createElement(f.Z,{className:"add-new-tag-btn","data-testid":"add-new-tag-button",disabled:!(_e||Ie.EditAll),size:"small",type:"primary",onClick:function(){ve((function(e){return!e})),Ae(void 0)}},"Add new tag")),w.createElement(f.Z,{className:"tw-h-8 tw-rounded tw-ml-2","data-testid":"delete-tag-category-button",disabled:ne.provider===B.l.System||!Ie.Delete,size:"small",onClick:function(){ne&&Le({data:{id:ne.id,name:ne.displayName||ne.name,isCategory:!0},state:!0})}},"Delete category"))),w.createElement("div",{className:"m-b-sm","data-testid":"description-container"},w.createElement(b.Z,{description:(null==ne?void 0:ne.description)||"",entityName:null!==(e=null==ne?void 0:ne.displayName)&&void 0!==e?e:null==ne?void 0:ne.name,hasEditAccess:Ie.EditDescription||Ie.EditAll,isEdit:re,onCancel:function(){return le(!1)},onDescriptionEdit:function(){return le(!0)},onDescriptionUpdate:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(n){return Qe({name:null!==(t=null==ne?void 0:ne.name)&&void 0!==t?t:"",description:e}),[2]}))}))}})),w.createElement(p.Z,{bordered:!0,columns:We,"data-testid":"table",dataSource:null==ne?void 0:ne.children,pagination:!1,rowKey:"id",size:"small"}),w.createElement(A.p,{header:qe("label.edit-description-for",{entityName:null==Ee?void 0:Ee.name}),placeholder:qe("label.enter-description"),value:null==Ee?void 0:Ee.description,visible:ue,onCancel:function(){me(!1),ge(void 0)},onSave:function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){var t,n,a,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,6,7]),[4,(0,y.Lp)(null!==(n=null==ne?void 0:ne.name)&&void 0!==n?n:"",null!==(a=null==Ee?void 0:Ee.name)&&void 0!==a?a:"",{name:null!==(i=null==Ee?void 0:Ee.name)&&void 0!==i?i:"",description:e})];case 1:return r.sent()?[4,je(null==ne?void 0:ne.name,!0)]:[3,3];case 2:return r.sent(),[3,4];case 3:throw U.Z["api-error-messages"]["unexpected-server-response"];case 4:return[3,7];case 5:return t=r.sent(),(0,z.Eo)(t),[3,7];case 6:return me(!1),ge(void 0),[7];case 7:return[2]}}))}))}}),w.createElement(D.Z,{errorData:Te,form:j,header:qe("label.adding-new-category"),initialData:{name:"",description:""},isSaveButtonDisabled:!(0,v.isEmpty)(Te),visible:se,onCancel:function(){return ce(!1)},onChange:function(e){ke({}),He(e)},onSave:function(e){return function(e){var t=He(e,!0);Object.values(t).length||(0,y.dR)((0,r.pi)((0,r.pi)({},e),{name:(0,v.trim)(e.name)})).then((function(e){if(!e)throw U.Z["api-error-messages"]["unexpected-server-response"];W.push((0,J.bT)(e.name))})).catch((function(e){(0,z.Eo)(e,U.Z["api-error-messages"]["create-tag-category-error"])})).finally((function(){ce(!1)}))}(e)}}),w.createElement(D.Z,{errorData:De,form:j,header:qe("label.adding-new-tag",{categoryName:null!==(t=null==ne?void 0:ne.displayName)&&void 0!==t?t:null==ne?void 0:ne.name}),initialData:{name:"",description:""},isSaveButtonDisabled:!(0,v.isEmpty)(De),visible:pe,onCancel:function(){return ve(!1)},onChange:function(e){Ae({}),Ye(e)},onSave:function(e){return function(e){var t,n=Ye(e,!0);Object.values(n).length||(0,y.ln)(null!==(t=null==ne?void 0:ne.name)&&void 0!==t?t:"",{name:(0,v.trim)(e.name),description:e.description}).then((function(e){if(!e)throw U.Z["api-error-messages"]["unexpected-server-response"];je(null==ne?void 0:ne.name,!0)})).catch((function(e){(0,z.Eo)(e,U.Z["api-error-messages"]["create-tag-error"])})).finally((function(){ve(!1)}))}(e)}}),w.createElement(S.Z,{bodyText:qe("message.are-you-sure-delete-tag",{isCategory:(null===(n=Pe.data)||void 0===n?void 0:n.isCategory)?"category":"",tagName:null===(a=Pe.data)||void 0===a?void 0:a.name}),cancelText:qe("label.cancel"),confirmText:qe("label.confirm"),header:qe("label.delete-tag-category",{isCategory:(null===(_=Pe.data)||void 0===_?void 0:_.isCategory)?"Category":""}),visible:Pe.state,onCancel:function(){return Le({data:void 0,state:!1})},onConfirm:function(){var e,t,n,a,i,l;(null===(e=Pe.data)||void 0===e?void 0:e.isCategory)?(l=Pe.data.id,(0,y.RP)(l).then((function(e){if(e){xe(!0);var t=X.filter((function(e){return e.id!==l}))[0];W.push((0,J.bT)((null==t?void 0:t.fullyQualifiedName)||(null==t?void 0:t.name)))}else(0,z.Eo)(U.Z["api-error-messages"]["delete-tag-category-error"])})).catch((function(e){(0,z.Eo)(e,U.Z["api-error-messages"]["delete-tag-category-error"])})).finally((function(){Le({data:void 0,state:!1}),xe(!1)}))):(a=null===(t=Pe.data)||void 0===t?void 0:t.categoryName,i=null===(n=Pe.data)||void 0===n?void 0:n.id,(0,y.Pn)(a,i).then((function(e){if(e){if(ne){var t=ne.children.filter((function(e){return e.id!==i}));ae((0,r.pi)((0,r.pi)({},ne),{children:t}))}}else(0,z.Eo)(U.Z["api-error-messages"]["delete-tag-error"])})).catch((function(e){(0,z.Eo)(e,U.Z["api-error-messages"]["delete-tag-error"])})).finally((function(){return Le({data:void 0,state:!1})})))}}))))}}}]);