"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[4473],{64473:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var n,l=a(70655),r=a(67294),i=a(59293),s=a(31485),c=a(67814),m=a(56256),o=a(19650),d=a(94184),u=a.n(d),f=a(96486),E=a(437),v=a(67800);!function(e){e.NAME_REQUIRED="name required",e.NAME_INVALID="name invalid",e.DESCRIPTION_REQUIRED="description required"}(n||(n={}));var p,w=a(48132),g=((p={})[n.NAME_REQUIRED]=(0,w.Ti)((0,v.t)("label.field-required",{field:(0,v.t)("label.glossary")+" "+(0,v.t)("label.name-lowercase")})+"."),p[n.NAME_INVALID]=(0,w.Ti)((0,v.t)("label.field-invalid",{field:(0,v.t)("label.glossary")+" "+(0,v.t)("label.name-lowercase")})+"."),p[n.DESCRIPTION_REQUIRED]=(0,w.Ti)((0,v.t)("label.field-required",{field:(0,v.t)("label.description")})+"."),p),b=a(16139),h=a(61637),y=a(67521),N=a(10584),R=a(97809),C=a(84419),S=a(46892),I=a(53867),A=a(71266),T=a(66116),Z=function(e){var t=e.children;return r.createElement("div",{className:"tw-mt-4"},t)},k=function(e){var t=e.header,a=e.allowAccess,i=void 0===a||a,s=e.saveState,d=void 0===s?"initial":s,v=e.slashedBreadcrumb,p=e.onCancel,k=e.onSave,D=(0,r.useRef)(),_=(0,E.$)().t,z=(0,l.CR)((0,r.useState)({name:!1,invalidName:!1,description:!1}),2),L=z[0],x=z[1],M=(0,l.CR)((0,r.useState)(""),2),G=M[0],Q=M[1],O=(0,l.CR)((0,r.useState)(""),1)[0],U=(0,l.CR)((0,r.useState)(!1),2),F=U[0],P=U[1],q=(0,l.CR)((0,r.useState)([]),2),B=q[0],V=q[1],j=(0,l.CR)((0,r.useState)([]),2),$=j[0],X=j[1],Y=function(){var e;return(null===(e=D.current)||void 0===e?void 0:e.getEditorContent())||""},H=function(){P(!1)},J=function(e,t){X((function(e){return e.filter((function(e){return e.name!==t}))}))};return r.createElement(S.Z,{classes:"tw-max-w-full-hd tw-h-full tw-pt-4",header:r.createElement(C.Z,{titleLinks:v}),layout:h.Q["2ColRTL"],rightPanel:r.createElement(r.Fragment,null,r.createElement(m.Z.Title,{level:5},_("label.configure-entity",{entity:_("label.glossary")})),r.createElement("div",{className:"mb-5"},_("message.create-new-glossary-guide")))},r.createElement("div",{className:"tw-form-container"},r.createElement(m.Z.Title,{"data-testid":"form-heading",level:5},t),r.createElement("div",{className:"tw-pb-3","data-testid":"add-glossary"},r.createElement(Z,null,r.createElement("label",{className:"tw-block tw-form-label",htmlFor:"name"},(0,w.lp)(_("label.name")+":")),r.createElement("input",{className:"tw-form-inputs tw-form-inputs-padding","data-testid":"name",id:"name",name:"name",placeholder:_("label.name"),type:"text",value:G,onChange:function(e){if(i){var t=e.target.value,a=e.target.name,n=(0,f.cloneDeep)(L),r=n.name,s=n.invalidName;"name"===a&&(Q(t),r=!1,s=!1),x((function(e){return(0,l.pi)((0,l.pi)({},e),{name:r,invalidName:s})}))}}}),L.name?g[n.NAME_REQUIRED]:L.invalidName?g[n.NAME_INVALID]:null),r.createElement(Z,null,r.createElement("label",{className:"tw-block tw-form-label tw-mb-0",htmlFor:"description"},(0,w.lp)(_("label.description")+":")),r.createElement(R.Z,{"data-testid":"description",initialValue:O,readonly:!i,ref:D}),L.description&&g[n.DESCRIPTION_REQUIRED]),r.createElement(Z,null,r.createElement(o.Z,{className:"w-full",direction:"vertical"},r.createElement("label",{htmlFor:"tags"},_("label.tag-plural"),":"),r.createElement(y.j,{"data-testid":"tags",setTags:function(e){return V(e)}}))),r.createElement("div",null,r.createElement("div",{className:"tw-flex tw-items-center tw-mt-4"},r.createElement("span",{className:"w-form-label tw-mr-3"},_("label.reviewer-plural"),":"),r.createElement(N.z,{className:"tw-h-5 tw-px-2","data-testid":"add-reviewers",size:"x-small",theme:"primary",variant:"contained",onClick:function(){return P(!0)}},r.createElement(c.G,{icon:"plus"}))),r.createElement("div",{className:"tw-my-4","data-testid":"reviewers-container"},Boolean($.length)&&$.map((function(e,t){var a;return r.createElement(T.Z,{editable:!0,isRemovable:!0,className:"tw-bg-gray-200",key:t,removeTag:J,tag:null!==(a=e.name)&&void 0!==a?a:"",type:"contained"})})))),r.createElement("div",{className:"flex justify-end"},r.createElement(N.z,{"data-testid":"cancel-glossary",size:"regular",theme:"primary",variant:"text",onClick:p},_("label.cancel")),i?r.createElement(r.Fragment,null,"waiting"===d?r.createElement(N.z,{disabled:!0,className:"tw-w-16 tw-h-10 disabled:tw-opacity-100",size:"regular",theme:"primary",variant:"contained"},r.createElement(I.Z,{size:"small",type:"white"})):"success"===d?r.createElement(N.z,{disabled:!0,className:"tw-w-16 tw-h-10 disabled:tw-opacity-100",size:"regular",theme:"primary",variant:"contained"},r.createElement(c.G,{icon:"check"})):r.createElement(N.z,{className:u()("tw-w-16 tw-h-10",{"tw-opacity-40":!i}),"data-testid":"save-glossary",size:"regular",theme:"primary",variant:"contained",onClick:function(){if(function(){var e,t={name:!G.trim(),invalidName:b.tG.test(G),description:!(null===(e=Y())||void 0===e?void 0:e.trim())};return x(t),!Object.values(t).includes(!0)}()){var e={name:G.trim(),displayName:G.trim(),description:Y(),reviewers:$.map((function(e){return{id:e.id,type:e.type}})),owner:{id:(0,w.rc)(),type:"user"},tags:B};k(e)}}},_("label.save"))):null)),r.createElement(A.Z,{header:_("label.add-reviewer"),reviewer:$,visible:F,onCancel:H,onSave:function(e){X(e),H()}})))},D=a(74380),_=a(93389),z=a(79839),L=a(72819),x=a(6929),M=a(39570),G=a(96840),Q=a(37428),O=a(50168),U=function(){var e=(0,i.k6)(),t=(0,_.BL)().permissions,a=(0,l.CR)((0,r.useState)([]),2),n=a[0],c=a[1],m=(0,l.CR)((0,r.useState)(!1),2),o=m[0],d=m[1],u=(0,l.CR)((0,r.useState)("initial"),2),f=u[0],E=u[1],v=(0,l.CR)((0,r.useState)([]),2),p=v[0],w=v[1],g=(0,r.useMemo)((function(){return(0,M.P_)(L.OX.Create,z.A.GLOSSARY,t)}),[t]),b=function(t){void 0===t&&(t=""),e.push((0,G.$x)(t))},h=function(e,t){(0,O.Eo)(e,t),E("initial")};return(0,r.useEffect)((function(){w([{name:"Glossary",url:(0,G.$x)()},{name:"Add Glossary",url:"",activeTitle:!0}])}),[]),r.createElement(D.Z,null,r.createElement("div",{className:"self-center"},r.createElement(k,{allowAccess:g,fetchTags:function(){d(!0),(0,Q.uL)().then((function(e){e.data?c((0,Q.bM)(e.data)):(0,O.Eo)(x.Z["api-error-messages"]["fetch-tags-error"])})).catch((function(e){(0,O.Eo)(e,x.Z["api-error-messages"]["fetch-tags-error"])})).finally((function(){d(!1)}))},header:"Add Glossary",isTagLoading:o,saveState:f,slashedBreadcrumb:p,tagList:n,onCancel:function(){b()},onSave:function(e){E("waiting"),(0,s.Cn)(e).then((function(e){e?(E("success"),setTimeout((function(){E("initial"),b(e.name)}),500)):h(x.Z["api-error-messages"]["add-glossary-error"])})).catch((function(e){h(e,x.Z["api-error-messages"]["add-glossary-error"])}))}})))}}}]);