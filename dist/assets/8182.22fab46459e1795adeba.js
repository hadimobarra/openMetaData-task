"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[8182],{63153:function(e,t,a){a.d(t,{F3:function(){return i},Ko:function(){return s},n5:function(){return c},u7:function(){return o},_d:function(){return u},u$:function(){return d},sZ:function(){return m},$j:function(){return f},cN:function(){return p},QW:function(){return v},dV:function(){return h}});var n=a(70655),r=a(97451),l={headers:{"Content-type":"application/json-patch+json"}},i=function(e,t,a,l,i){return void 0===l&&(l=!1),void 0===i&&(i=10),(0,n.mG)(void 0,void 0,void 0,(function(){var s;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:return s={default:l,limit:i,fields:e,after:t,before:a},[4,r.Z.get("/roles",{params:s})];case 1:return[2,n.sent().data]}}))}))},s=function(e,t,a,l){return void 0===l&&(l=10),(0,n.mG)(void 0,void 0,void 0,(function(){var i;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:return i={limit:l,fields:e,after:t,before:a},[4,r.Z.get("/policies",{params:i})];case 1:return[2,n.sent().data]}}))}))},c=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return[4,r.Z.get("/roles/name/"+e,{params:{fields:t}})];case 1:return[2,a.sent().data]}}))}))},o=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return[4,r.Z.get("/policies/name/"+e,{params:{fields:t}})];case 1:return[2,a.sent().data]}}))}))},u=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.post("/roles",e)];case 1:return[2,t.sent().data]}}))}))},d=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.post("/policies",e)];case 1:return[2,t.sent().data]}}))}))},m=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return[4,r.Z.patch("/roles/"+t,e,l)];case 1:return[2,a.sent().data]}}))}))},f=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return[4,r.Z.patch("/policies/"+t,e,l)];case 1:return[2,a.sent().data]}}))}))},p=function(){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get("/policies/resources")];case 1:return[2,e.sent().data]}}))}))},v=function(){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get("/policies/functions")];case 1:return[2,e.sent().data]}}))}))},h=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.get("/policies/validation/condition/"+e)];case 1:return[2,t.sent()]}}))}))}},66703:function(e,t,a){a.d(t,{LK:function(){return s},RG:function(){return c},Xv:function(){return o},Cm:function(){return u},hh:function(){return d},fs:function(){return m},kt:function(){return f}});var n=a(70655),r=a(96486),l=a(22334),i=a(97451),s=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){var a,s;return(0,n.Jh)(this,(function(c){switch(c.label){case 0:return a=(0,n.pi)({fields:(0,r.isString)(e)?e:null==e?void 0:e.join(","),limit:1e5},t),s=(0,l.JP)("/teams"),[4,i.Z.get(s,{params:a})];case 1:return[2,c.sent().data]}}))}))},c=function(e){return void 0===e&&(e=!1),(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,i.Z.get("/teams/hierarchy",{params:{isJoinable:e}})];case 1:return[2,t.sent().data]}}))}))},o=function(e,t,a){return(0,n.mG)(void 0,void 0,void 0,(function(){var r;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:return r=(0,l.JP)("/teams/name/"+e,t),[4,i.Z.get(r,{params:{include:a}})];case 1:return[2,n.sent().data]}}))}))},u=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,i.Z.post("/teams",e)];case 1:return[2,t.sent().data]}}))}))},d=function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){var a;return(0,n.Jh)(this,(function(n){switch(n.label){case 0:return a={headers:{"Content-type":"application/json-patch+json"}},[4,i.Z.patch("/teams/"+e,t,a)];case 1:return[2,n.sent().data]}}))}))},m=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,i.Z.put("/teams",e)];case 1:return[2,t.sent().data]}}))}))},f=function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return[4,i.Z.put("/teams/restore",{id:e})];case 1:return[2,t.sent().data]}}))}))}},85506:function(e,t,a){var n=a(70655),r=a(54680),l=a(67294),i=a(66703),s=a(48132),c=a(38464),o=a(50168),u=r.Z.TreeNode;t.Z=function(e){var t=e.showTeamsAlert,a=e.onSelectionChange,d=e.filterJoinable,m=e.placeholder,f=void 0===m?"Search for teams":m,p=(0,n.CR)((0,l.useState)(),2),v=p[0],h=p[1],b=(0,n.CR)((0,l.useState)(!1),2),E=b[0],g=b[1],w=(0,n.CR)((0,l.useState)([]),2),y=w[0],Z=w[1];(0,l.useEffect)((function(){(0,i.RG)(d).then((function(e){var a=e.data;Z(a),t&&g(0===a.length)})).catch((function(e){(0,o.Eo)(e)}))}),[]);var C=function(e){var t=(0,s.C_)(e),a=e.id,n=!!d&&!e.isJoinable;return l.createElement(u,{disabled:n,key:a,title:t,value:a},e.children&&e.children.map((function(e){return C(e)})))};return l.createElement(l.Fragment,null,l.createElement(r.Z,{allowClear:!0,multiple:!0,showSearch:!0,treeDefaultExpandAll:!0,dropdownStyle:{maxHeight:300,overflow:"auto"},placeholder:f,showCheckedStrategy:r.Z.SHOW_ALL,style:{width:"100%"},treeLine:{showLeafIcon:!1},treeNodeFilterProp:"title",value:v,onChange:function(e){a(e),h(e)}},y.map((function(e){return C(e)}))),E&&l.createElement("div",{className:"tw-notification tw-bg-info tw-mt-2 tw-justify-start tw-w-full tw-p-2","data-testid":"toast"},l.createElement("div",{className:"tw-font-semibold tw-flex-shrink-0"},l.createElement(c.ZP,{alt:"info",icon:"info",title:"Info",width:"16px"})),l.createElement("div",{className:"tw-font-semibold tw-px-1"},"There is no team available.")))}},52771:function(e,t,a){a.d(t,{o:function(){return n}});var n="Password must be a minimum of 8 and a maximum of 16 characters long and contain at least one uppercase character (A-Z), one lowercase character (a-z), one number, and one special character (such as !, %, @, or #)"},55546:function(e,t,a){var n,r,l,i;a.d(t,{jc:function(){return r},Wm:function(){return l},aX:function(){return i}}),function(e){e.USERS="users",e.ADMINS="admins",e.BOTS="bots"}(n||(n={})),function(e){e.USER="user",e.TEAM="team"}(r||(r={})),function(e){e.AutomaticGenerate="AUTOMATIC_GENERATE",e.CreatePassword="CREATE_PASSWORD"}(l||(l={})),function(e){e.ACTIVITY="activity",e.TASKS="tasks",e.MY_DATA="mydata",e.FOLLOWING="following"}(i||(i={}))},98182:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var n=a(70655),r=a(67674),l=a(67294),i=a(59293),s=a(62436),c=a(63153),o=a(33891),u=a(74380),d=a(67814),m=a(34041),f=a(9242),p=a(4107),v=a(55742),h=a(19650),b=a(12028),E=a(71577),g=a(94184),w=a.n(g),y=a(96486),Z=a(437),C=a(96566),k=a(69270),I=a(62761),S=a(52771),G=a(16139),R=a(61637),P=a(10048),q=a(55546),J=a(72861),N=a(63764),T=a(6929),A=a(87738),K=a(38464),x=a(50168),F=a(33081),L=a(97809),O=a(84419),U=a(46892),j=a(38081),B=a(53867),W=a(85506),M=m.Z.Option,V=function(e){var t,a=e.roles,r=e.saveState,i=void 0===r?"initial":r,s=e.onCancel,c=e.onSave,o=e.forceBot,u=(0,Z.$)().t,g=(0,n.CR)(f.Z.useForm(),1)[0],V=(0,C.Eu)().authConfig,_=(0,l.useRef)(),D=(0,n.CR)((0,l.useState)(""),1)[0],z=(0,n.CR)((0,l.useState)(""),2),Y=z[0],$=z[1],H=(0,n.CR)((0,l.useState)(""),2),X=H[0],Q=H[1],ee=(0,n.CR)((0,l.useState)(!1),2),te=ee[0],ae=ee[1],ne=(0,n.CR)((0,l.useState)(o),2),re=ne[0],le=ne[1],ie=(0,n.CR)((0,l.useState)([]),2),se=ie[0],ce=ie[1],oe=(0,n.CR)((0,l.useState)([]),2),ue=oe[0],de=oe[1],me=(0,n.CR)((0,l.useState)(""),2),fe=me[0],pe=me[1],ve=(0,n.CR)((0,l.useState)(""),2),he=ve[0],be=ve[1],Ee=(0,n.CR)((0,l.useState)(q.Wm.AutomaticGenerate),2),ge=Ee[0],we=Ee[1],ye=(0,n.CR)((0,l.useState)(""),2),Ze=ye[0],Ce=ye[1],ke=(0,n.CR)((0,l.useState)(!1),2),Ie=ke[0],Se=ke[1],Ge=(0,n.CR)((0,l.useState)(N.Gr.Jwt),2),Re=Ge[0],Pe=Ge[1],qe=(0,n.CR)((0,l.useState)(N.T_.OneHour),2),Je=qe[0],Ne=qe[1],Te=(0,n.CR)((0,l.useState)(),2),Ae=Te[0],Ke=Te[1],xe=(0,l.useMemo)((function(){return(null==V?void 0:V.provider)===P.G.BASIC||(null==V?void 0:V.provider)===P.G.LDAP}),[V]),Fe=(0,l.useMemo)((function(){return[{name:u(o?"label.bot-plural":"label.users"),url:o?(0,I.tc)():(0,I.Yd)()},{name:u("label.create")+" "+u(o?"label.bot":"label.user"),url:"",activeTitle:!0}]}),[o]),Le=function(e){var t=e.target.value;switch(e.target.name){case"email":$(t);break;case"displayName":Q(t);break;case"secretKey":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{secretKey:t})}));break;case"audience":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{audience:t})}));break;case"clientId":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{clientId:t})}));break;case"domain":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{domain:t})}));break;case"clientSecret":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{clientSecret:t})}));break;case"authority":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{authority:t})}));break;case"scopes":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{scopes:t?t.split(","):[]})}));break;case"privateKey":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{privateKey:t})}));break;case"orgURL":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{orgURL:t})}));break;case"oktaEmail":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{email:t})}));break;case"tokenEndpoint":Ke((function(e){return(0,n.pi)((0,n.pi)({},e),{tokenEndpoint:t})}));break;case"password":pe(t);break;case"confirmPassword":be(t);break;case"passwordGenerator":we(t)}},Oe=function(){return(0,n.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,n.Jh)(this,(function(a){switch(a.label){case 0:Se(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,(0,k.M8)()];case 2:return e=a.sent(),setTimeout((function(){Ce(e),g.setFieldsValue({generatedPassword:e})}),500),[3,5];case 3:return t=a.sent(),(0,x.Eo)(t),[3,5];case 4:return Se(!1),[7];case 5:return[2]}}))}))};return(0,l.useEffect)((function(){Oe()}),[]),l.createElement(U.Z,{classes:"tw-max-w-full-hd tw-h-full tw-pt-4",header:l.createElement(O.Z,{titleLinks:Fe}),layout:R.Q["2ColRTL"]},l.createElement("div",{className:"tw-form-container"},l.createElement("h6",{className:"tw-heading tw-text-base"},u("label.create-entity",{entity:u(o?"label.bot":"label.user")})),l.createElement(f.Z,{form:g,id:"create-user-bot-form",layout:"vertical",validateMessages:{required:"${label} is required"},onFinish:function(){var e,t=ge===q.Wm.AutomaticGenerate,a=se.filter((function(e){return!(0,y.isUndefined)(e)})),r=ue.filter((function(e){return!(0,y.isUndefined)(e)})),l=(0,n.pi)({description:(null===(e=_.current)||void 0===e?void 0:e.getEditorContent())||void 0,name:Y.split("@")[0],displayName:(0,y.trim)(X),roles:a.length?a:void 0,teams:r.length?r:void 0,email:Y,isAdmin:te,isBot:re},o?{authenticationMechanism:{authType:Re,config:Re===N.Gr.Jwt?{JWTTokenExpiry:Je}:{ssoServiceType:null==V?void 0:V.provider,authConfig:(0,n.pi)({},Ae)}}}:{password:t?Ze:fe,confirmPassword:t?Ze:he,createPasswordType:J.mD.AdminCreate});c(l)}},l.createElement(f.Z.Item,{label:u("label.email"),name:"email",rules:[{pattern:G.OV,required:!0,type:"email",message:T.Z["form-error-messages"]["invalid-email"]},{type:"email",required:!0,validator:function(e,t){return(0,n.mG)(void 0,void 0,void 0,(function(){return(0,n.Jh)(this,(function(e){switch(e.label){case 0:return!G.OV.test(t)||o?[3,2]:[4,(0,k.eg)(t)];case 1:return e.sent()?[2,Promise.reject(T.Z["form-error-messages"]["email-is-in-use"])]:[2,Promise.resolve()];case 2:return[2]}}))}))}}]},l.createElement(p.Z,{"data-testid":"email",name:"email",placeholder:u("label.email"),value:Y,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.display-name"),name:"displayName"},l.createElement(p.Z,{"data-testid":"displayName",name:"displayName",placeholder:u("label.display-name"),value:X,onChange:Le})),o&&l.createElement(l.Fragment,null,l.createElement(f.Z.Item,{label:u("label.auth-mechanism"),name:"auth-mechanism",rules:[{required:!0,validator:function(){return Re?Promise.resolve():Promise.reject(u("label.field-required",{field:u("label.auth-mechanism")}))}}]},l.createElement(m.Z,{className:"w-full","data-testid":"auth-mechanism",defaultValue:Re,placeholder:u("label.select-auth-mechanism"),onChange:function(e){return Pe(e)}},(0,A.Y8)(V).map((function(e){return l.createElement(M,{key:e.value},e.label)})))),Re===N.Gr.Jwt&&l.createElement(f.Z.Item,{label:u("label.token-expiration"),name:"token-expiration",rules:[{required:!0,validator:function(){return Je?Promise.resolve():Promise.reject(u("label.field-required",{field:u("label.token-expiration")}))}}]},l.createElement(m.Z,{className:"w-full","data-testid":"token-expiry",defaultValue:Je,placeholder:u("label.select-token-expiration"),onChange:function(e){return Ne(e)}},(0,A.D1)().map((function(e){return l.createElement(M,{key:e.value},e.label)})))),Re===N.Gr.Sso&&l.createElement(l.Fragment,null,function(){switch(null==V?void 0:V.provider){case N.Ic.Google:return l.createElement(l.Fragment,null,l.createElement(f.Z.Item,{label:u("label.secret-key"),name:"secretKey",rules:[{required:!0,message:u("label.field-required",{field:u("label.secret-key")})}]},l.createElement(p.Z.Password,{"data-testid":"secretKey",name:"secretKey",placeholder:u("label.secret-key"),value:null==Ae?void 0:Ae.secretKey,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.audience"),name:"audience"},l.createElement(p.Z,{"data-testid":"audience",name:"audience",placeholder:u("label.audience"),value:null==Ae?void 0:Ae.audience,onChange:Le})));case N.Ic.Auth0:return l.createElement(l.Fragment,null,l.createElement(f.Z.Item,{label:u("label.secret-key"),name:"secretKey",rules:[{required:!0,message:u("label.field-required",{field:u("label.secret-key")})}]},l.createElement(p.Z.Password,{"data-testid":"secretKey",name:"secretKey",placeholder:u("label.secret-key"),value:null==Ae?void 0:Ae.secretKey,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.client-id"),name:"clientId",rules:[{required:!0,message:u("label.field-required",{field:u("label.client-id")})}]},l.createElement(p.Z,{"data-testid":"clientId",name:"clientId",placeholder:u("label.client-id"),value:null==Ae?void 0:Ae.clientId,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.domain"),name:"domain",rules:[{required:!0,message:u("label.field-required",{field:u("label.domain")})}]},l.createElement(p.Z,{"data-testid":"domain",name:"domain",placeholder:u("label.domain"),value:null==Ae?void 0:Ae.domain,onChange:Le})));case N.Ic.Azure:return l.createElement(l.Fragment,null,l.createElement(f.Z.Item,{label:u("label.client-secret"),name:"clientSecret",rules:[{required:!0,message:u("label.field-required",{field:u("label.client-secret")})}]},l.createElement(p.Z.Password,{"data-testid":"clientSecret",name:"clientSecret",placeholder:u("label.client-secret"),value:null==Ae?void 0:Ae.clientSecret,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.client-id"),name:"clientId",rules:[{required:!0,message:u("label.field-required",{field:u("label.client-id")})}]},l.createElement(p.Z,{"data-testid":"clientId",name:"clientId",placeholder:u("label.client-id"),value:null==Ae?void 0:Ae.clientId,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.authority"),name:"authority",rules:[{required:!0,message:u("label.field-required",{field:u("label.authority")})}]},l.createElement(p.Z,{"data-testid":"authority",name:"authority",placeholder:u("label.authority"),value:null==Ae?void 0:Ae.authority,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.scopes"),name:"scopes",rules:[{required:!0,message:u("label.scopes-comma-separated")}]},l.createElement(p.Z,{"data-testid":"scopes",name:"scopes",placeholder:u("label.scopes-comma-separated"),value:null==Ae?void 0:Ae.scopes,onChange:Le})));case N.Ic.Okta:return l.createElement(l.Fragment,null,l.createElement(f.Z.Item,{label:u("label.private-key"),name:"privateKey",rules:[{required:!0,message:u("label.field-required",{field:u("label.private-key")})}]},l.createElement(p.Z.Password,{"data-testid":"privateKey",name:"privateKey",placeholder:u("label.private-key"),value:null==Ae?void 0:Ae.privateKey,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.client-id"),name:"clientId",rules:[{required:!0,message:u("label.field-required",{field:u("label.client-id")})}]},l.createElement(p.Z,{"data-testid":"clientId",name:"clientId",placeholder:u("label.client-id"),value:null==Ae?void 0:Ae.clientId,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.org-url"),name:"orgURL",rules:[{required:!0,message:u("label.field-required",{field:u("label.org-url")})}]},l.createElement(p.Z,{"data-testid":"orgURL",name:"orgURL",placeholder:u("label.org-url"),value:null==Ae?void 0:Ae.orgURL,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.email"),name:"oktaEmail",rules:[{required:!0,type:"email",message:u("label.field-required",{field:u("label.service-email")})}]},l.createElement(p.Z,{"data-testid":"oktaEmail",name:"oktaEmail",placeholder:u("label.okta-email"),value:null==Ae?void 0:Ae.email,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.scopes"),name:"scopes"},l.createElement(p.Z,{"data-testid":"scopes",name:"scopes",placeholder:u("label.scopes-comma-separated"),value:null==Ae?void 0:Ae.scopes,onChange:Le})));case N.Ic.CustomOidc:return l.createElement(l.Fragment,null,l.createElement(f.Z.Item,{label:u("label.secret-key"),name:"secretKey",rules:[{required:!0,message:u("label.field-required",{field:u("label.secret-key")})}]},l.createElement(p.Z.Password,{"data-testid":"secretKey",name:"secretKey",placeholder:u("label.secret-key"),value:null==Ae?void 0:Ae.secretKey,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.client-id"),name:"clientId",rules:[{required:!0,message:u("label.field-required",{field:u("label.client-id")})}]},l.createElement(p.Z,{"data-testid":"clientId",name:"clientId",placeholder:u("label.client-id"),value:null==Ae?void 0:Ae.clientId,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.token-end-point"),name:"tokenEndpoint",rules:[{required:!0,message:u("label.field-required",{field:u("label.token-end-point")})}]},l.createElement(p.Z,{"data-testid":"tokenEndpoint",name:"tokenEndpoint",placeholder:u("label.token-end-point"),value:null==Ae?void 0:Ae.tokenEndpoint,onChange:Le})));default:return null}}())),l.createElement(f.Z.Item,{label:u("label.description"),name:"description"},l.createElement(L.Z,{initialValue:D,ref:_})),!o&&l.createElement(l.Fragment,null,xe&&l.createElement(l.Fragment,null,l.createElement(v.ZP.Group,{name:"passwordGenerator",value:ge,onChange:Le},l.createElement(v.ZP,{value:q.Wm.AutomaticGenerate},u("label.automatically-generate")),l.createElement(v.ZP,{value:q.Wm.CreatePassword},u("label.password-type",{type:u("label.create")}))),ge===q.Wm.CreatePassword?l.createElement("div",{className:"m-t-sm"},l.createElement(f.Z.Item,{label:u("label.password"),name:"password",rules:[{required:!0},{pattern:G.BV,message:S.o}]},l.createElement(p.Z.Password,{name:"password",placeholder:u("label.password-type",{type:u("label.enter")}),value:fe,onChange:Le})),l.createElement(f.Z.Item,{label:u("label.password-type",{type:u("label.confirm")}),name:"confirmPassword",rules:[{validator:function(e,t){return t!==fe?Promise.reject(u("label.password-not-match")):Promise.resolve()}}]},l.createElement(p.Z.Password,{name:"confirmPassword",placeholder:u("label.password-type",{type:u("label.confirm")}),value:he,onChange:Le}))):l.createElement("div",{className:"m-t-sm"},l.createElement(f.Z.Item,{label:u("label.password-type",{type:u("label.generate")}),name:"generatedPassword",rules:[{required:!0}]},l.createElement(p.Z.Password,{readOnly:!0,addonAfter:l.createElement("div",{className:"flex-center w-16"},l.createElement("div",{className:"w-8 h-7 flex-center cursor-pointer","data-testid":"password-generator",onClick:Oe},Ie?l.createElement(B.Z,{size:"small",type:"default"}):l.createElement(K.ZP,{alt:u("label.generate"),icon:K.PJ.SYNC,width:"16"})),l.createElement("div",{className:"w-8 h-7 flex-center"},l.createElement(F.Z,{copyText:Ze}))),name:"generatedPassword",value:Ze})))),l.createElement(f.Z.Item,{label:u("label.teams"),name:"teams"},l.createElement(W.Z,{onSelectionChange:de})),l.createElement(f.Z.Item,{label:u("label.roles"),name:"roles"},l.createElement(j.Z,{className:w()("tw-bg-white",{"tw-bg-gray-100 tw-cursor-not-allowed":0===a.length}),dataTestId:"roles-dropdown",dropDownList:(t=a,(0,n.ev)([],(0,n.CR)(t.map((function(e){return{name:e.displayName||e.name||"",value:e.id}}))))),label:u("label.roles"),selectedItems:se,type:"checkbox",onSelect:function(e,t){return a=t,void ce((function(e){if(e.includes(a)){var t=(0,n.ev)([],(0,n.CR)(e)),r=t.indexOf(a);return t.splice(r,1),t}return(0,n.ev)((0,n.ev)([],(0,n.CR)(e)),[a])}));var a}})),l.createElement(f.Z.Item,null,l.createElement(h.Z,null,l.createElement("span",null," ",u("label.admin")),l.createElement(b.Z,{checked:te,"data-testid":"admin",onChange:function(){ae((function(e){return!e})),le(!1)}})))),l.createElement(h.Z,{className:"w-full tw-justify-end",size:4},l.createElement(E.Z,{"data-testid":"cancel-user",type:"link",onClick:s},u("label.cancel")),l.createElement(l.Fragment,null,"waiting"===i?l.createElement(E.Z,{disabled:!0,type:"primary"},l.createElement(B.Z,{size:"small",type:"white"})):"success"===i?l.createElement(E.Z,{disabled:!0,type:"primary"},l.createElement(d.G,{icon:"check"})):l.createElement(E.Z,{"data-testid":"save-user",form:"create-user-bot-form",htmlType:"submit",type:"primary"},u("label.create")))))))},_=a(96162),D=a(64632),z=a(96840),Y=(0,r.Pi)((function(){var e=(0,i.k6)(),t=(0,n.CR)((0,l.useState)([]),2),a=t[0],r=t[1],d=(0,n.CR)((0,l.useState)("initial"),2),m=d[0],f=d[1],p=(0,i.UO)().bot,v=function(){p?e.push((0,z.si)(_.CZ.INTEGRATIONS,_.lx.BOTS)):e.goBack()},h=function(e,t){(0,x.Eo)(e,t),f("initial")};return(0,l.useEffect)((function(){(0,n.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,n.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,c.F3)("",void 0,void 0,!1,I.SF)];case 1:return e=a.sent(),r(e.data),[3,3];case 2:return t=a.sent(),r([]),(0,x.Eo)(t,T.Z["api-error-messages"]["fetch-roles-error"]),[3,3];case 3:return[2]}}))}))}),[]),l.createElement(u.Z,null,l.createElement("div",{className:"self-center"},l.createElement(V,{forceBot:Boolean(p),roles:a,saveState:m,onCancel:function(){v()},onSave:function(e){return(0,n.mG)(void 0,void 0,void 0,(function(){var t,a,r;return(0,n.Jh)(this,(function(l){switch(l.label){case 0:return p?[4,(i=e.name,(0,n.mG)(void 0,void 0,void 0,(function(){var e;return(0,n.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,o.RR)(i)];case 1:return e=t.sent(),[2,Boolean(e)];case 2:return t.sent(),[2,!1];case 3:return[2]}}))})))]:[3,7];case 1:return l.sent()?((0,x.Eo)(e.name+" bot already exists."),[3,6]):[3,2];case 2:return l.trys.push([2,5,,6]),f("waiting"),[4,(0,o.BK)((0,n.pi)((0,n.pi)({},e),{botName:e.name}))];case 3:return t=l.sent(),[4,(0,s.Kp)({botUser:{id:t.id,type:D.py.USER},name:t.name,displayName:t.displayName,description:t.description})];case 4:return l.sent()?(f("success"),(0,x.XA)("Bot created successfully"),setTimeout((function(){f("initial"),v()}),500)):h(T.Z["api-error-messages"]["create-bot-error"]),[3,6];case 5:return a=l.sent(),h(a,T.Z["api-error-messages"]["create-bot-error"]),[3,6];case 6:return[3,10];case 7:return l.trys.push([7,9,,10]),f("waiting"),[4,(0,o.r4)(e)];case 8:return l.sent()?(f("success"),setTimeout((function(){f("initial"),v()}),500)):h(T.Z["api-error-messages"]["create-user-error"]),[3,10];case 9:return r=l.sent(),h(r,T.Z["api-error-messages"]["create-user-error"]),[3,10];case 10:return[2]}var i}))}))}})))}))}}]);