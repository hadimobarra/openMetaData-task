"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[6446],{71068:function(e,t,a){var n=a(8081),l=a.n(n),r=a(23645),i=a.n(r)()(l());i.push([e.id,".assignee-tag {\n  display: flex;\n  align-items: center;\n  padding: 2px 3px;\n  margin: 1px 2px;\n}\n",""]),t.Z=i},22535:function(e,t,a){a.d(t,{w:function(){return s}});var n=a(19650),l=a(96486),r=a(67294),i=a(25577),s=function(e){var t=e.id,a=e.name;return(0,l.isUndefined)(t)&&(0,l.isUndefined)(a)?null:r.createElement(n.Z,{"data-testid":"user-tag"},r.createElement(i.Z,{id:t,name:a,width:"22"}),r.createElement("span",null,a))}},72468:function(e,t,a){a.d(t,{F:function(){return n},_R:function(){return l},Oq:function(){return r}});var n={border:"1px rgb(221, 227, 234) solid",borderRadius:"8px",marginBottom:"20px",boxShadow:"1px 1px 6px rgb(0 0 0 / 6%)",marginTop:"8px"},l={padding:24,margin:0,paddingTop:0},r={background:"#F8F9FA"}},56446:function(e,t,a){a.r(t);var n=a(70655),l=a(91894),r=a(9242),i=a(4107),s=a(19650),u=a(71577),c=a(50963),o=a(96486),d=a(67674),m=a(67294),f=a(59293),p=a(52046),g=a(13950),v=a(25577),y=a(84419),E=a(73213),w=a(58369),h=a(59583),N=a(31615),b=a(48132),Z=a(22215),C=a(19790),S=a(44355),k=a(50168),x=a(25131),T=a(40501),F=a(90846),O=a(72468);t.default=(0,d.Pi)((function(){var e=(0,f.TH)(),t=(0,f.k6)(),a=(0,n.CR)((0,c.useForm)(),1)[0],d=(0,f.UO)(),R=d.entityType,U=d.entityFQN,D=new URLSearchParams(e.search),I=D.get("field"),q=D.get("value"),A=(0,n.CR)((0,m.useState)({}),2),Q=A[0],_=A[1],M=(0,n.CR)((0,m.useState)([]),2),G=M[0],L=M[1],P=(0,n.CR)((0,m.useState)([]),2),B=P[0],V=P[1],j=(0,n.CR)((0,m.useState)([]),2),z=j[0],J=j[1],X=(0,n.CR)((0,m.useState)([]),2),K=X[0],W=X[1],H=(0,m.useMemo)((function(){var e,t=null===(e=(0,C.Zk)(Q.tags||[]))||void 0===e?void 0:e.tagFQN;return null==t?void 0:t.split(E.o)[1]}),[Q.tags]),Y=(0,m.useMemo)((function(){return((0,C.nD)(Q.tags||[])||[]).map((function(e){return"#"+e.tagFQN})).join(" ")}),[Q.tags]),$=(null==q?void 0:q.replaceAll(/^"|"$/g,""))||"",ee="Update tags for "+($||R)+" "+(I!==w.Sn.COLUMNS?(0,b.C_)(Q):""),te=(0,m.useMemo)((function(){return p.Z.getCurrentUserDetails()}),[p.Z.userDetails,p.Z.nonSecureUserDetails]),ae=(0,m.useMemo)((function(){var e=$.split(E.o).slice(-1);return(0,S.dY)(e[0],Q.columns||[])}),[I,Q]),ne=(0,m.useCallback)((function(){var e,t;return(0,o.isNil)(I)||(0,o.isNil)(q)||I!==w.Sn.COLUMNS?null:m.createElement("div",{"data-testid":"column-details"},m.createElement("p",{className:"tw-font-semibold"},"Column Details"),m.createElement("p",null,m.createElement("span",{className:"tw-text-grey-muted"},"Type:")," ",m.createElement("span",null,ae.dataTypeDisplay)),m.createElement("p",null,null===(t=null===(e=null==ae?void 0:ae.tags)||void 0===e?void 0:e.map((function(e){return"#"+e.tagFQN})))||void 0===t?void 0:t.join(" ")))}),[Q.columns]),le=function(){var e,t;return(0,o.isEmpty)(ae)||(0,o.isUndefined)(ae)?null!==(t=Q.tags)&&void 0!==t?t:[]:null!==(e=ae.tags)&&void 0!==e?e:[]},re=function(){return I&&q?""+I+Z.LV+q+Z.LV+"tags":w.Sn.TAGS};return(0,m.useEffect)((function(){(0,S.Dy)(R,U,_)}),[U,R]),(0,m.useEffect)((function(){var e=Q.owner;if(e){var t=[{label:(0,b.C_)(e),value:e.id||"",type:e.type}];V(t),L(t)}a.setFieldsValue({title:ee.trimEnd()})}),[Q]),(0,m.useEffect)((function(){J(le()),W(le())}),[Q,ae]),m.createElement(F.Z,null,m.createElement(y.Z,{titleLinks:(0,n.ev)((0,n.ev)([],(0,n.CR)((0,S.rM)(Q,R))),[{name:"Create Task",activeTitle:!0,url:""}])}),m.createElement("div",{className:"tw-grid tw-grid-cols-3 tw-gap-x-2"},m.createElement(l.Z,{className:"tw-col-span-2",key:"update-tags",style:(0,n.pi)({},O.F),title:"Create Task"},m.createElement(r.Z,{form:a,layout:"vertical",onFinish:function(e){if(B.length){var a={from:null==te?void 0:te.name,message:e.title||ee,about:(0,Z.ec)(R,U,re()),taskDetails:{assignees:B.map((function(e){return{id:e.value,type:e.type}})),suggestion:JSON.stringify(K),type:h.U.UpdateTag,oldValue:JSON.stringify(z)},type:N.Th.Task};(0,g.Kl)(a).then((function(e){var a,n;(0,k.XA)("Task Created Successfully"),t.push((0,S.yv)(null!==(n=null===(a=e.task)||void 0===a?void 0:a.id.toString())&&void 0!==n?n:""))})).catch((function(e){return(0,k.Eo)(e)}))}else(0,k.Eo)("Cannot create a task without assignee")}},m.createElement(r.Z.Item,{"data-testid":"title",label:"Title:",name:"title"},m.createElement(i.Z,{placeholder:"Task title",style:{margin:"4px 0px"}})),m.createElement(r.Z.Item,{"data-testid":"assignees",label:"Assignees:",name:"assignees"},m.createElement(x.Z,{assignees:B,options:G,onChange:V,onSearch:function(e){(0,S.Od)(e,L)}})),z.length?m.createElement(r.Z.Item,{"data-testid":"tags-label",label:"Update tags:",name:"UpdateTags"},m.createElement(T.X,{suggestedTags:K,tags:z,onChange:W})):null,m.createElement(r.Z.Item,null,m.createElement(s.Z,{className:"w-full justify-end","data-testid":"cta-buttons",size:16},m.createElement(u.Z,{type:"link",onClick:function(){return t.goBack()}},"Back"),m.createElement(u.Z,{"data-testid":"submit-test",htmlType:"submit",type:"primary"},"Submit"))))),m.createElement("div",{className:"tw-pl-2","data-testid":"entity-details"},m.createElement("h6",{className:"tw-text-base"},(0,o.capitalize)(R)," Details"),m.createElement("div",{className:"tw-flex tw-mb-4"},m.createElement("span",{className:"tw-text-grey-muted"},"Owner:")," ",m.createElement("span",null,Q.owner?m.createElement("span",{className:"tw-flex tw-ml-1"},m.createElement(v.Z,{displayName:(0,b.C_)(Q.owner),id:"",name:(0,b.C_)(Q.owner),width:"20"}),m.createElement("span",{className:"tw-ml-1"},(0,b.C_)(Q.owner))):m.createElement("span",{className:"tw-text-grey-muted tw-ml-1"},"No Owner"))),m.createElement("p",{"data-testid":"tier"},H||m.createElement("span",{className:"tw-text-grey-muted"},"No Tier")),m.createElement("p",{"data-testid":"tags"},Y),ne())))}))},25131:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(34041),l=a(67294),r=a(22535),i=a(93379),s=a.n(i),u=a(7795),c=a.n(u),o=a(90569),d=a.n(o),m=a(3565),f=a.n(m),p=a(19216),g=a.n(p),v=a(44589),y=a.n(v),E=a(71068),w={};w.styleTagTransform=y(),w.setAttributes=f(),w.insert=d().bind(null,"head"),w.domAPI=c(),w.insertStyleElement=g(),s()(E.Z,w),E.Z&&E.Z.locals&&E.Z.locals;var h=function(e){var t=e.assignees,a=e.onSearch,i=e.onChange,s=e.options,u=n.Z.Option;return l.createElement(n.Z,{showSearch:!0,className:"ant-select-custom","data-testid":"select-assignee",defaultActiveFirstOption:!1,filterOption:!1,mode:"multiple",notFoundContent:null,placeholder:"Search to Select",showArrow:!1,value:t.length?t:void 0,onChange:function(e,t){var a=t.map((function(e){return{label:e["data-label"],value:e.value,type:e["data-usertype"]}}));i(a)},onSearch:a},s.map((function(e){return l.createElement(u,{"data-label":e.label,"data-testid":"assignee-option","data-usertype":e.type,key:e.value},l.createElement(r.w,{id:e.value,name:e.label}))})))}},58666:function(e,t,a){var n=a(70655),l=a(34041),r=a(96486),i=a(67294),s=a(74313),u=a(90058),c=a(50168),o=l.Z.Option;t.Z=function(e){var t=e.onChange,a=e.selectedTags,d=function(){return a.map((function(e){return{label:e.tagFQN,value:e.tagFQN,"data-sourcetype":(0,r.isEqual)(e.source,"Tag")?"tag":"glossaryTerm"}}))},m=(0,n.CR)((0,i.useState)([]),2),f=m[0],p=m[1];return(0,i.useEffect)((function(){p(d())}),[a]),i.createElement(l.Z,{showSearch:!0,className:"ant-select-custom","data-testid":"select-tags",defaultActiveFirstOption:!1,filterOption:!1,mode:"multiple",notFoundContent:null,placeholder:"Search to Select",showArrow:!1,value:(0,r.isEmpty)(d())?void 0:d(),onChange:function(e,a){var n=a.map((function(e){return{labelType:u.JG.Manual,state:u.ZM.Suggested,source:(0,r.isEqual)(e["data-sourcetype"],"tag")?u.c6.Tag:u.c6.Glossary,tagFQN:e.value}}));t(n)},onSearch:function(e){var t;e?(t=e,(0,s.op)(t).then((function(e){var t,a=null!==(t=e.data.suggest["metadata-suggest"][0].options)&&void 0!==t?t:[],l=(0,n.ev)([],(0,n.CR)(new Set(a.map((function(e){return e._source})))));p(l.map((function(e){return{label:e.fullyQualifiedName,value:e.fullyQualifiedName,"data-sourcetype":e.entityType}})))})).catch((function(e){return(0,c.Eo)(e)}))):p([])}},f.map((function(e){return i.createElement(o,{"data-sourcetype":e["data-sourcetype"],"data-testid":"tag-option",key:e.value},e.label)})))}},39379:function(e,t,a){a.d(t,{_:function(){return u}});var n=a(60331),l=a(94184),r=a.n(l),i=a(96486),s=a(67294),u=function(e){var t=e.diffArr,a=e.className,l=t.map((function(e){return e.added?s.createElement("div",{className:"tw-my-2 tw-flex tw-flex-wrap tw-gap-y-1","data-testid":"diff-added",key:(0,i.uniqueId)()},e.value.map((function(e){return s.createElement(n.Z,{key:(0,i.uniqueId)(),style:{background:"rgba(0, 131, 118, 0.2)",color:"#008376"}},e.tagFQN)}))):e.removed?s.createElement("div",{className:"tw-my-2 tw-flex tw-flex-wrap tw-gap-y-1","data-testid":"diff-removed",key:(0,i.uniqueId)()},e.value.map((function(e){return s.createElement(n.Z,{key:(0,i.uniqueId)(),style:{color:"grey",textDecoration:"line-through"}},e.tagFQN)}))):s.createElement("div",{className:"tw-my-2 tw-flex tw-flex-wrap tw-gap-y-1","data-testid":"diff-normal",key:(0,i.uniqueId)()},e.value.length?e.value.map((function(e){return s.createElement(n.Z,{key:(0,i.uniqueId)()},e.tagFQN)})):s.createElement("div",{className:"tw-text-grey-muted tw-text-center","data-testid":"noDiff-placeholder"},"No diff available"))}));return s.createElement("div",{className:r()("tw-w-full",a),"data-testid":"diff-container"},l)}},40501:function(e,t,a){a.d(t,{X:function(){return m}});var n=a(70655),l=a(38222),r=a(60331),i=a(59295),s=a(96486),u=a(67294),c=a(59923),o=a(39379),d=a(58666),m=function(e){var t=e.tags,a=e.suggestedTags,m=e.onChange,f=(0,n.CR)((0,u.useState)([]),2),p=f[0],g=f[1],v=(0,n.CR)((0,u.useState)(c.G.NEW),2),y=v[0],E=v[1];return u.createElement(l.Z,{activeKey:y,className:"ant-tabs-description",size:"small",type:"card",onChange:function(e){E(e),e===c.G.DIFF?g((0,i.Bm)(t,a)):g([])}},u.createElement(l.Z.TabPane,{"data-testid":"current-tab",key:c.G.CURRENT,tab:"Current"},u.createElement("div",{className:"tw-my-2 tw-flex tw-flex-wrap tw-gap-y-1","data-testid":"tags"},t.map((function(e){return u.createElement(r.Z,{key:(0,s.uniqueId)()},e.tagFQN)})))),u.createElement(l.Z.TabPane,{"data-testid":"diff-tab",key:c.G.DIFF,tab:"Diff"},u.createElement(o._,{diffArr:p})),u.createElement(l.Z.TabPane,{"data-testid":"new-tab",key:c.G.NEW,tab:"New"},u.createElement(d.Z,{selectedTags:a,onChange:m})))}},90846:function(e,t,a){var n=a(70655),l=a(97183),r=a(67294),i=a(72468);t.Z=function(e){var t=e.children,a=l.Z.Content,s=l.Z.Sider;return r.createElement(l.Z,{style:(0,n.pi)((0,n.pi)({},i.Oq),{height:"100vh"})},r.createElement(s,{"data-testid":"left-sider",style:i.Oq,width:180}),r.createElement(a,{style:i._R},t),r.createElement(s,{"data-testid":"right-sider",style:i.Oq,width:180}))}}}]);