"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[9041,7364],{97109:function(e,t,n){var a=n(8081),i=n.n(a),l=n(23645),r=n.n(l)()(i());r.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.feed-list-container .ant-btn-link {\n  padding: 0px;\n}\n.feed-list-container .dropdown-icon {\n  fill: #089aad;\n}\n.feed-list-container .filters-container {\n  position: sticky;\n  top: 0;\n  padding: 0px;\n  z-index: 10;\n  border-bottom: 1px solid #e1eece;\n}\n.feed-list-container .filters-wrapper {\n  position: sticky;\n  top: 0;\n  margin-left: -8px;\n  margin-right: -8px;\n  z-index: 300;\n  background-color: #f8f9fa;\n}\n',""]),t.Z=r},22275:function(e,t,n){var a=n(8081),i=n.n(a),l=n(23645),r=n.n(l)()(i());r.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.ant-card-feed {\n  border: 1px solid #dde3ea;\n  border-radius: 4px;\n  box-shadow: 1px 1px 8px #0000000f;\n}\n.task-feed-card {\n  border: 1px solid #c6b5f6;\n}\n.announcement-feed-card {\n  border: 1px solid #ffc143;\n  background-color: #fffdf8;\n}\n',""]),t.Z=r},22001:function(e,t,n){n.d(t,{Z:function(){return re}});var a=n(70655),i=n(71230),l=n(15746),r=n(71577),s=n(56256),o=n(94184),d=n.n(o),c=n(96486),m=n(67294),u=n(437),p=n(58369),f=n(14469),h=n(68430),w=n(31982),v=n(77743),E=n(28178),N=n(95126),y=n(13950),T=n(6929),g=n(50168),x=n(27300),A=n(77740),L=n(78790),C=n(92265),S=n(26051),I=function(e){var t=e.open,n=e.selectedThread,i=e.onCancel,l=e.className,r=e.postFeed,s=e.deletePostHandler,o=e.updateThreadHandler,c=(0,a.CR)((0,m.useState)(n),2),u=c[0],f=c[1],h=(0,a.CR)((0,m.useState)(!1),2),v=h[0],E=h[1],N=(0,w.dS)(n.about),I=(0,w.ku)(n.about),b=(0,a.CR)((0,m.useState)(p.BB),2),P=b[0],Z=b[1],R=function(){Z(p.BB)};return(0,m.useEffect)((function(){(0,y.h4)(n.id).then((function(e){f(e.data)})).catch((function(e){(0,g.Eo)(e,T.Z["api-error-messages"]["fetch-feed-error"])})).finally((function(){return E(!1)}))}),[n]),m.createElement("div",{className:d()("tw-h-full",l)},m.createElement(S.Z,{className:"tw-z-9997 tw-fixed tw-inset-0 tw-top-16 tw-h-full tw-w-3/5 tw-bg-black tw-opacity-40",onCancel:i}),m.createElement("div",{className:d()("tw-top-16 tw-right-0 tw-bottom-0 tw-w-2/5 tw-bg-white tw-fixed tw-shadow-md tw-transform tw-ease-in-out tw-duration-1000 tw-overflow-y-auto tw-z-9997",{"tw-translate-x-0":t,"tw-translate-x-full":!t}),id:"feed-panel"},m.createElement(C.Z,{className:"tw-px-4 tw-shadow-sm",entityFQN:I,entityField:N,threadType:n.type,onCancel:i}),m.createElement(L.Z,{className:"tw-p-4 tw-pl-8 tw-mb-3",deletePostHandler:s,isLoading:v,threadData:u,updateThreadHandler:o,onConfirmation:function(e){Z(e)}}),m.createElement(x.Z,{buttonClass:"tw-mr-4",className:"tw-ml-5 tw-mr-2 tw-mb-2",onSave:r})),m.createElement(A.Z,{visible:P.state,onDelete:function(){P.postId&&P.threadId&&(null==s||s(P.threadId,P.postId,P.isThread)),R()},onDiscard:R}))},b=n(57364),P=n(38464),Z=function(e){var t=e.className,n=e.entityName;return m.createElement("div",{className:d()("tw-mt-10 tw-text-base tw-font-medium",t),"data-testid":"placeholder-container"},m.createElement("div",{className:"tw-text-center"},m.createElement("span",{"data-testid":"placeholder-message"},'There is no activity on the "'+n+'" yet. Start a conversation by clicking\n      on the '),m.createElement("span",{"data-testid":"placeholder-icon"},m.createElement(P.ZP,{alt:"comments",icon:P.PJ.COMMENT_PLUS,width:"20px"})),m.createElement("span",null," to collaborate with other users.")),m.createElement("div",{"data-testid":"placeholder-image"},m.createElement("img",{alt:"editor-image",className:"tw-rounded tw-mt-2 tw-block tw-m-auto","data-testid":"editor-image",loading:"lazy",src:b.default,width:"600px"})))},R=n(93379),k=n.n(R),D=n(7795),F=n.n(D),O=n(90569),M=n.n(O),_=n(3565),B=n.n(_),H=n(19216),Y=n.n(H),J=n(44589),U=n.n(J),W=n(97109),z={};z.styleTagTransform=U(),z.setAttributes=B(),z.insert=M().bind(null,"head"),z.domAPI=F(),z.insertStyleElement=Y(),k()(W.Z,z),W.Z&&W.Z.locals&&W.Z.locals;var V=n(59615),q=n(91894),K=n(59293),G=n(31615),Q=n(44355),j=n(77863),$=n(16583),X=n(18085),ee=n(53552),te=n(53179),ne=n(22275),ae={};ae.styleTagTransform=U(),ae.setAttributes=B(),ae.insert=M().bind(null,"head"),ae.domAPI=F(),ae.insertStyleElement=Y(),k()(ne.Z,ae),ne.Z&&ne.Z.locals&&ne.Z.locals;var ie=function(e){var t=e.updatedFeedList,n=e.relativeDay,i=e.isEntityFeed,l=e.onThreadSelect,r=e.onThreadIdSelect,s=e.postFeed,o=e.onViewMore,u=e.selectedThreadId,p=e.onConfirmation,f=e.updateThreadHandler,h=(0,K.k6)();return m.createElement(m.Fragment,null,t.filter((function(e){return e.relativeDay===n})).map((function(e,t){var n,w,v,E,N={message:e.message,postTs:e.threadTs,from:e.createdBy,id:e.id,reactions:e.reactions},y=(0,c.isEqual)(e.type,G.Th.Task),T=e.type===G.Th.Announcement,g=(null===(n=null==e?void 0:e.posts)||void 0===n?void 0:n.length)||0,A=e.postsCount?e.postsCount-1:0,L=(0,a.ev)([],(0,a.CR)(new Set(((null==e?void 0:e.posts)||[]).map((function(e){return e.from}))))).slice(0,g>=3?2:1),C=null===(w=null==e?void 0:e.posts)||void 0===w?void 0:w[g-1];return m.createElement(q.Z,{className:d()("ant-card-feed relative m-t-md",y||T?"p-t-xs":"",y?"task-feed-card":T?"announcement-feed-card":""),key:t+" - card",onClick:function(){return e.task&&function(e,t){t&&h.push((0,Q.yv)(String(e)))}(e.task.id,y)}},y&&m.createElement(te.Z,{status:null===(v=e.task)||void 0===v?void 0:v.status}),T&&m.createElement(ee.Z,null),m.createElement("div",{"data-testid":"message-container",key:t},m.createElement($.Z,{isThread:!0,announcementDetails:e.announcement,"data-testid":"main-message",entityLink:e.about,feed:N,feedType:e.type||G.Th.Conversation,isEntityFeed:i,taskDetails:e.task,threadId:e.id,updateThreadHandler:f,onConfirmation:p,onReply:function(){return t=e.id,l(t),void o();var t}}),g>0?m.createElement(m.Fragment,null,function(e,t,n,a,i){return m.createElement("div",{className:"tw-ml-9 tw-my-2"},Boolean(i)&&m.createElement("div",{className:"tw-filter-seperator"}),e>1?m.createElement("div",{className:"tw-flex tw-my-4"},m.createElement(X.Z,{isFooterVisible:!0,lastReplyTimeStamp:null==i?void 0:i.postTs,repliedUsers:t,replies:n,threadId:a,onThreadSelect:function(e){r(""),l(e),o()}})):null)}(g,L,A,e.id,C),m.createElement($.Z,{className:"tw-ml-9","data-testid":"latest-message",feed:C,feedType:e.type||G.Th.Conversation,isEntityFeed:i,threadId:e.id,updateThreadHandler:f,onConfirmation:p,onReply:function(){return t=e.id,void r(u===t?"":t);var t}}),(E=e.id,u===E?m.createElement(x.Z,{buttonClass:"tw-mr-4",className:"tw-ml-5 tw-mr-2","data-testid":"quick-reply-editor",onSave:s}):null)):null),e.task&&m.createElement("div",{className:"tw-border-t tw-border-main tw-py-1 tw-flex"},m.createElement("span",{className:"tw-text-grey-muted"},"Assignees: "),m.createElement(j.Z,{assignees:e.task.assignees||[],className:"tw-ml-0.5 tw-align-middle tw-inline-flex tw-flex-wrap"})))})))},le=n(14177),re=(0,h.F)((function(e){var t=e.className,n=e.feedList,o=e.refreshFeedCount,h=e.onRefreshFeeds,y=e.withSidePanel,T=void 0!==y&&y,g=e.isEntityFeed,x=void 0!==g&&g,L=e.postFeedHandler,C=e.entityName,S=e.deletePostHandler,b=e.updateThreadHandler,P=e.onFeedFiltersUpdate,R=e.hideFeedFilter,k=e.hideThreadFilter,D=e.stickyFilter,F=(0,u.$)().t,O=(0,w.wq)(n),M=O.updatedFeedList,_=O.relativeDays,B=(0,a.CR)((0,m.useState)(),2),H=B[0],Y=B[1],J=(0,a.CR)((0,m.useState)(""),2),U=J[0],W=J[1],z=(0,a.CR)((0,m.useState)(!1),2),q=z[0],K=z[1],G=(0,a.CR)((0,m.useState)(p.BB),2),Q=G[0],j=G[1],$=(0,a.CR)((0,m.useState)(!1),2),X=$[0],ee=$[1],te=(0,a.CR)((0,m.useState)(!1),2),ne=te[0],ae=te[1],re=(0,a.CR)((0,m.useState)(x?f.D.ALL:f.D.OWNER),2),se=re[0],oe=re[1],de=(0,a.CR)((0,m.useState)(),2),ce=de[0],me=de[1],ue=(0,m.useCallback)((function(e,t){var n=t||(x?f.D.ALL:f.D.OWNER);oe(n),ee(!1),P&&P(n,ce)}),[oe,ee,P,ce]),pe=function(){j(p.BB)},fe=function(e){j(e)},he=function(e){W(e),Y(void 0)},we=function(){W("")},ve=function(e){var t=n.find((function(t){return t.id===e}));t&&Y(t)},Ee=function(){K(!0)},Ne=function(){Y(void 0),K(!1)},ye=function(e){var t;null==L||L(e,null!==(t=null==H?void 0:H.id)&&void 0!==t?t:U)},Te=(0,m.useCallback)((function(e,t){var n,a="ALL"===t?void 0:null!==(n=t)&&void 0!==n?n:void 0;me(a),ae(!1),P&&P(se,a)}),[se,P,me,ae]),ge=(0,m.useMemo)((function(){return x?V.gQ.filter((function(e){return"ALL"===e.value||"MENTIONS"===e.value})):V.gQ.slice()}),[x]);return(0,m.useEffect)((function(){var e;ve(null!==(e=null==H?void 0:H.id)&&void 0!==e?e:U)}),[n]),(0,m.useEffect)((function(){var e=function(e){"Escape"===e.key&&Ne()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),m.createElement("div",{className:d()(t,"feed-list-container"),id:"feedData"},m.createElement("div",{className:D?"filters-wrapper":""},0!==n.length||se!==f.D.OWNER||ce?function(){var e,t;return R&&k?null:m.createElement(i.Z,{className:d()("filters-container",D?"m-x-xs":""),justify:"space-between"},m.createElement(l.Z,null,!R&&m.createElement(m.Fragment,null,m.createElement(r.Z,{className:"flex items-center","data-testid":"feeds",icon:(0,V._n)(se),type:"link",onClick:function(){return ee((function(e){return!e}))}},m.createElement(s.Z.Text,{className:"font-medium text-primary m-x-xss"},null===(e=ge.find((function(e){return e.value===se})))||void 0===e?void 0:e.name),m.createElement(v.Ym,{className:"dropdown-icon"})),X&&m.createElement(N.Z,{dropDownList:ge,value:se,onSelect:ue}))),m.createElement(l.Z,null,!k&&m.createElement(m.Fragment,null,m.createElement(r.Z,{className:"flex items-center","data-testid":"thread-filter",icon:(0,V.Ai)(null!=ce?ce:"ALL"),type:"link",onClick:function(){return ae((function(e){return!e}))}},m.createElement(s.Z.Text,{className:"font-medium text-primary m-x-xss"},null===(t=V.gv.find((function(e){return e.value===(null!=ce?ce:"ALL")})))||void 0===t?void 0:t.name),m.createElement(v.Ym,{className:"dropdown-icon"})),ne&&m.createElement(N.Z,{horzPosRight:!0,dropDownList:V.gv,value:ce,onSelect:Te}))))}():null),o?m.createElement("div",{className:"tw-py-px tw-pt-3 tw-pb-3"},m.createElement("button",{className:"tw-refreshButton ",onClick:h},"View ",o," new"," ",o>1?"activities":"activity")):null,n.length>0?m.createElement(m.Fragment,null,_.map((function(e,t){return m.createElement("div",{"data-testid":"feed"+t,key:t},m.createElement(le.Z,{className:"relative m-y-xs",relativeDay:e}),m.createElement(ie,{deletePostHandler:S,isEntityFeed:x,postFeed:ye,relativeDay:e,selectedThreadId:U,updateThreadHandler:b,updatedFeedList:M,withSidePanel:T,onConfirmation:fe,onThreadIdDeselect:we,onThreadIdSelect:he,onThreadSelect:ve,onViewMore:Ee}))})),T&&H&&q?m.createElement(m.Fragment,null,m.createElement(I,{deletePostHandler:S,open:!(0,c.isUndefined)(H)&&q,postFeed:ye,selectedThread:H,updateThreadHandler:b,onCancel:Ne})):null):m.createElement("div",{className:"h-min-50"},C&&se===f.D.ALL&&!ce?m.createElement(Z,{entityName:C}):o?null:m.createElement(E.Z,null,F("message.no-data-available-for-selected-filter"))),m.createElement(A.Z,{visible:Q.state,onDelete:function(){Q.postId&&Q.threadId&&(null==S||S(Q.threadId,Q.postId,Q.isThread)),pe()},onDiscard:pe}))}))},59615:function(e,t,n){n.d(t,{_n:function(){return s},Ai:function(){return o},gQ:function(){return d},gv:function(){return c},MW:function(){return m}});var a=n(67294),i=n(14469),l=n(31615),r=n(38464),s=function(e){switch(e){case i.D.OWNER:return a.createElement(r.ZP,{alt:"My Data",className:"m-r-xss",icon:r.PJ.FOLDER_PRIMARY,width:"16px"});case i.D.MENTIONS:return a.createElement(r.ZP,{alt:"Mentions",className:"m-r-xss",icon:r.PJ.MENTIONS_PRIMARY,width:"16px"});case i.D.FOLLOWS:return a.createElement(r.ZP,{alt:"Following",className:"m-r-xss",icon:r.PJ.STAR_PRIMARY,width:"16px"});case i.D.ALL:default:return a.createElement(r.ZP,{alt:"All Activity",className:"m-r-xss",icon:r.PJ.ALL_APPLICATION_PRIMARY,width:"16px"})}},o=function(e){switch(e){case l.Th.Announcement:return a.createElement(r.ZP,{alt:"Announcement",className:"m-r-xss",icon:r.PJ.ANNOUNCEMENT_BASIC_PRIMARY,width:"16px"});case l.Th.Conversation:return a.createElement(r.ZP,{alt:"Conversation",className:"m-r-xss",icon:r.PJ.COMMENT_PRIMARY,width:"16px"});case l.Th.Task:return a.createElement(r.ZP,{alt:"Task",className:"m-r-xss",icon:r.PJ.TASK_PRIMARY,width:"16px"});default:return a.createElement(r.ZP,{alt:"All Threads",className:"m-r-xss",icon:r.PJ.ALL_APPLICATION_PRIMARY,width:"16px"})}},d=[{name:"All Activity",value:"ALL",icon:a.createElement(r.ZP,{alt:"All Activity",className:"m-r-xs",icon:r.PJ.ALL_APPLICATION,width:"16px"})},{name:"My Data",value:"OWNER",icon:a.createElement(r.ZP,{alt:"My Data",className:"m-r-xs",icon:r.PJ.FOLDER,width:"16px"})},{name:"Mentions",value:"MENTIONS",icon:a.createElement(r.ZP,{alt:"Mentions",className:"m-r-xs",icon:r.PJ.MENTIONS,width:"16px"})},{name:"Following",value:"FOLLOWS",icon:a.createElement(r.ZP,{alt:"Following",className:"m-r-xs",icon:r.PJ.STAR,width:"16px"})}],c=[{name:"All Threads",value:"ALL",icon:a.createElement(r.ZP,{alt:"All Threads",className:"m-r-xs",icon:r.PJ.ALL_APPLICATION,width:"16px"})},{name:"Task",value:"Task",icon:a.createElement(r.ZP,{alt:"Task",className:"m-r-xs",icon:r.PJ.TASK,width:"16px"})},{name:"Conversation",value:"Conversation",icon:a.createElement(r.ZP,{alt:"Conversation",className:"m-r-xs",icon:r.PJ.COMMENT_GREY,width:"16px"})},{name:"Announcement",value:"Announcement",icon:a.createElement(r.ZP,{alt:"Announcement",className:"m-r-xs",icon:r.PJ.ANNOUNCEMENT_BLACK,width:"16px"})}],m=[{name:"All Activity",value:"ALL"},{name:"Assigned to me",value:"ASSIGNED_TO"},{name:"Created by me",value:"ASSIGNED_BY"}]},78790:function(e,t,n){var a=n(67294),i=n(31615),l=n(31982),r=n(53867),s=n(16583);t.Z=function(e){var t,n,o,d=e.threadData,c=e.className,m=e.isLoading,u=e.onConfirmation,p=e.updateThreadHandler,f=null!==(n=null===(t=null==d?void 0:d.posts)||void 0===t?void 0:t.length)&&void 0!==n?n:0,h={message:d.message,from:d.createdBy,postTs:d.threadTs,id:d.id,reactions:d.reactions};return a.createElement(a.Fragment,null,m?a.createElement(r.Z,null):a.createElement("div",{className:c,"data-testid":"panel-body"},d?a.createElement("div",{"data-testid":"main-message"},a.createElement(s.Z,{isEntityFeed:!0,isThread:!0,announcementDetails:d.announcement,className:"tw-mb-3",feed:h,feedType:d.type||i.Th.Conversation,threadId:d.id,updateThreadHandler:p,onConfirmation:u})):null,f>0?a.createElement("div",{"data-testid":"replies"},a.createElement("div",{className:"tw-mb-3 tw-flex"},a.createElement("span",{"data-testid":"replies-count"},(0,l.l9)(f,"reply","replies")),a.createElement("span",{className:"tw-flex-auto tw-self-center tw-ml-1.5"},a.createElement("hr",null))),null===(o=null==d?void 0:d.posts)||void 0===o?void 0:o.map((function(e,t){return a.createElement(s.Z,{isEntityFeed:!0,className:"tw-mb-3",feed:e,feedType:d.type||i.Th.Conversation,key:t,threadId:d.id,updateThreadHandler:p,onConfirmation:u})}))):null))}},26051:function(e,t,n){var a=n(67294);t.Z=function(e){var t=e.className,n=e.onCancel;return a.createElement("button",{className:t,"data-testid":"overlay-button",onClick:n})}},48217:function(e,t,n){var a;n.d(t,{C:function(){return a}}),function(e){e.BusinessUnit="BusinessUnit",e.Department="Department",e.Division="Division",e.Group="Group",e.Organization="Organization"}(a||(a={}))},57364:function(e,t,n){n.r(t),t.default=n.p+"feedEditor.png"}}]);