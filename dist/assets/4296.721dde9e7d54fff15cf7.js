"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[4296],{44378:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),a=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},c=n(13401),l=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="CaretDownFilled";var u=a.forwardRef(l)},86504:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),a=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},c=n(13401),l=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="FileOutlined";var u=a.forwardRef(l)},18095:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),a=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},c=n(13401),l=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="MinusSquareOutlined";var u=a.forwardRef(l)},18267:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),a=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},c=n(13401),l=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="PlusSquareOutlined";var u=a.forwardRef(l)},49288:function(e,t,n){var r=n(87462),a=n(71002),i=n(23653),c=n(36228),l=n.n(c),u=n(50344),o=n(98423),s=n(67294),d=n(53124),f=n(34041),m=n(96159),v=f.Z.Option;function p(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var h=function(e,t){var n,c=e.prefixCls,h=e.className,E=e.popupClassName,w=e.dropdownClassName,Z=e.children,b=e.dataSource,g=(0,u.Z)(Z);if(1===g.length&&(0,m.l$)(g[0])&&!p(g[0])){var C=(0,i.Z)(g,1);n=C[0]}var y,N=n?function(){return n}:void 0;return y=g.length&&p(g[0])?Z:b?b.map((function(e){if((0,m.l$)(e))return e;switch((0,a.Z)(e)){case"string":return s.createElement(v,{key:e,value:e},e);case"object":var t=e.value;return s.createElement(v,{key:t,value:t},e.text);default:return}})):[],s.createElement(d.C,null,(function(n){var a=(0,n.getPrefixCls)("select",c);return s.createElement(f.Z,(0,r.Z)({ref:t},(0,o.Z)(e,["dataSource"]),{prefixCls:a,popupClassName:E||w,className:l()("".concat(a,"-auto-complete"),h),mode:f.Z.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:N}),y)}))},E=s.forwardRef(h);E.Option=v,t.Z=E},61639:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(71002),a=n(44378),i=n(86504),c=n(7085),l=n(18095),u=n(18267),o=n(36228),s=n.n(o),d=n(67294),f=n(96159);function m(e,t,n,o){var m,v=o.isLeaf,p=o.expanded;if(o.loading)return d.createElement(c.Z,{className:"".concat(e,"-switcher-loading-icon")});if(n&&"object"===(0,r.Z)(n)&&(m=n.showLeafIcon),v){if(!n)return null;if("boolean"!=typeof m&&m){var h="function"==typeof m?m(o):m,E="".concat(e,"-switcher-line-custom-icon");return(0,f.l$)(h)?(0,f.Tm)(h,{className:s()(h.props.className||"",E)}):h}return m?d.createElement(i.Z,{className:"".concat(e,"-switcher-line-icon")}):d.createElement("span",{className:"".concat(e,"-switcher-leaf-line")})}var w="".concat(e,"-switcher-icon"),Z="function"==typeof t?t(o):t;return(0,f.l$)(Z)?(0,f.Tm)(Z,{className:s()(Z.props.className||"",w)}):Z||(n?p?d.createElement(l.Z,{className:"".concat(e,"-switcher-line-icon")}):d.createElement(u.Z,{className:"".concat(e,"-switcher-line-icon")}):d.createElement(a.Z,{className:w}))}},63153:function(e,t,n){n.d(t,{F3:function(){return c},Ko:function(){return l},n5:function(){return u},u7:function(){return o},_d:function(){return s},u$:function(){return d},sZ:function(){return f},$j:function(){return m},cN:function(){return v},QW:function(){return p},dV:function(){return h}});var r=n(70655),a=n(97451),i={headers:{"Content-type":"application/json-patch+json"}},c=function(e,t,n,i,c){return void 0===i&&(i=!1),void 0===c&&(c=10),(0,r.mG)(void 0,void 0,void 0,(function(){var l;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return l={default:i,limit:c,fields:e,after:t,before:n},[4,a.Z.get("/roles",{params:l})];case 1:return[2,r.sent().data]}}))}))},l=function(e,t,n,i){return void 0===i&&(i=10),(0,r.mG)(void 0,void 0,void 0,(function(){var c;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return c={limit:i,fields:e,after:t,before:n},[4,a.Z.get("/policies",{params:c})];case 1:return[2,r.sent().data]}}))}))},u=function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.get("/roles/name/"+e,{params:{fields:t}})];case 1:return[2,n.sent().data]}}))}))},o=function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.get("/policies/name/"+e,{params:{fields:t}})];case 1:return[2,n.sent().data]}}))}))},s=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,a.Z.post("/roles",e)];case 1:return[2,t.sent().data]}}))}))},d=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,a.Z.post("/policies",e)];case 1:return[2,t.sent().data]}}))}))},f=function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.patch("/roles/"+t,e,i)];case 1:return[2,n.sent().data]}}))}))},m=function(e,t){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.patch("/policies/"+t,e,i)];case 1:return[2,n.sent().data]}}))}))},v=function(){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,a.Z.get("/policies/resources")];case 1:return[2,e.sent().data]}}))}))},p=function(){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,a.Z.get("/policies/functions")];case 1:return[2,e.sent().data]}}))}))},h=function(e){return(0,r.mG)(void 0,void 0,void 0,(function(){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,a.Z.get("/policies/validation/condition/"+e)];case 1:return[2,t.sent()]}}))}))}},85303:function(e,t,n){var r,a;n.d(t,{Q:function(){return r},O:function(){return a}}),function(e){e.Allow="allow",e.Deny="deny"}(r||(r={})),function(e){e.All="All",e.Create="Create",e.Delete="Delete",e.EditAll="EditAll",e.EditCustomFields="EditCustomFields",e.EditDataProfile="EditDataProfile",e.EditDescription="EditDescription",e.EditDisplayName="EditDisplayName",e.EditLineage="EditLineage",e.EditOwner="EditOwner",e.EditQueries="EditQueries",e.EditReviewers="EditReviewers",e.EditSampleData="EditSampleData",e.EditStatus="EditStatus",e.EditTags="EditTags",e.EditTests="EditTests",e.EditTier="EditTier",e.EditUsers="EditUsers",e.ViewAll="ViewAll",e.ViewBasic="ViewBasic",e.ViewDataProfile="ViewDataProfile",e.ViewQueries="ViewQueries",e.ViewSampleData="ViewSampleData",e.ViewTests="ViewTests",e.ViewUsage="ViewUsage"}(a||(a={}))},87684:function(e,t,n){var r=n(70655),a=n(34041),i=n(9242),c=n(4107),l=n(54680),u=n(49288),o=n(96486),s=n(67294),d=n(437),f=n(63153),m=n(97809),v=n(85303),p=n(81274),h=n(50168),E=a.Z.Option;t.Z=function(e){var t=e.ruleData,n=e.setRuleData,w=(0,d.$)().t,Z=(0,r.CR)((0,s.useState)([]),2),b=Z[0],g=Z[1],C=(0,r.CR)((0,s.useState)([]),2),y=C[0],N=C[1],V=(0,r.CR)((0,s.useState)([]),2),S=V[0],D=V[1],O=(0,r.CR)((0,s.useState)(""),2),R=O[0],k=O[1],A=(0,r.CR)((0,s.useState)(!1),2),G=A[0],H=A[1],T=(0,r.CR)((0,s.useState)(!1),2),q=T[0],x=T[1],J=(0,s.useMemo)((function(){return[{title:"All",value:"all",key:"all",children:b.filter((function(e){return"all"!==e.name})).map((function(e){return{title:(0,o.startCase)(e.name),value:e.name,key:e.name}}))}]}),[b]),z=(0,s.useMemo)((function(){var e=b.filter((function(e){var n;return null===(n=t.resources)||void 0===n?void 0:n.includes(e.name||"")})),n=e.reduce((function(e,t){return(0,o.uniq)((0,r.ev)((0,r.ev)([],(0,r.CR)(e)),(0,r.CR)(t.operations||[])))}),[]).filter((function(e){return e!==v.O.All}));return[{title:"All",value:v.O.All,key:"All",children:n.map((function(e){return{title:e,value:e,key:e}}))}]}),[t.resources,b]),M=function(e){return e.reduce((function(e,t){var n=(t.examples||[]).map((function(e){return{label:e,value:e}}));return(0,o.uniqBy)((0,r.ev)((0,r.ev)([],(0,r.CR)(e)),(0,r.CR)(n)),"value")}),[])};return(0,s.useEffect)((function(){(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,f.cN)()];case 1:return e=n.sent(),g(e.data||[]),[3,3];case 2:return t=n.sent(),(0,h.Eo)(t),[3,3];case 3:return[2]}}))})),(0,r.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,f.QW)()];case 1:return e=n.sent(),N(e.data||[]),[3,3];case 2:return t=n.sent(),(0,h.Eo)(t),[3,3];case 3:return[2]}}))}))}),[]),(0,s.useEffect)((function(){D(M(y))}),[y]),s.createElement(s.Fragment,null,s.createElement(i.Z.Item,{label:w("label.rule-name")+":",name:"ruleName",rules:[{required:!0,max:128,min:1,message:w("label.field-required",{field:w("label.rule-name")})}]},s.createElement(c.Z,{"data-testid":"rule-name",placeholder:w("label.rule-name"),type:"text",value:t.name,onChange:function(e){return n((function(t){return(0,r.pi)((0,r.pi)({},t),{name:e.target.value})}))}})),s.createElement(i.Z.Item,{label:w("label.description"),name:"ruleDescription"},s.createElement(m.Z,{height:"200px",initialValue:t.description||"",placeHolder:w("label.write-your-description"),style:{margin:0},onTextChange:function(e){return n((function(t){return(0,r.pi)((0,r.pi)({},t),{description:e})}))}})),s.createElement(i.Z.Item,{label:w("label.resources")+":",name:"resources",rules:[{required:!0,message:w("label.field-required-plural",{field:w("label.resources")})}]},s.createElement(l.Z,{treeCheckable:!0,className:"tw-w-full","data-testid":"resources",placeholder:w("label.select-resource"),showCheckedStrategy:l.Z.SHOW_PARENT,treeData:J,onChange:function(e){n((function(t){return(0,r.pi)((0,r.pi)({},t),{resources:e})}))}})),s.createElement(i.Z.Item,{label:w("label.operations")+":",name:"operations",rules:[{required:!0,message:w("label.field-required-plural",{field:w("label.operations")})}]},s.createElement(l.Z,{treeCheckable:!0,className:"tw-w-full","data-testid":"operations",placeholder:"Select Operations",showCheckedStrategy:l.Z.SHOW_PARENT,treeData:z,onChange:function(e){n((function(t){return(0,r.pi)((0,r.pi)({},t),{operations:e})}))}})),s.createElement(i.Z.Item,{label:w("label.effect")+":",name:"ruleEffect",rules:[{required:!0,message:w("label.field-required",{field:w("label.effect")})}]},s.createElement(a.Z,{"data-testid":"effect",placeholder:w("label.select-rule-effect"),value:t.effect,onChange:function(e){return n((function(t){return(0,r.pi)((0,r.pi)({},t),{effect:e})}))}},s.createElement(E,{key:v.Q.Allow},(0,o.capitalize)(v.Q.Allow)),s.createElement(E,{key:v.Q.Deny},(0,o.capitalize)(v.Q.Deny)))),s.createElement(i.Z.Item,{label:w("label.condition")+":",name:"condition"},s.createElement(s.Fragment,null,s.createElement(u.Z,{"data-testid":"condition",options:S,placeholder:"Condition",value:t.condition,onChange:function(e){var t;n((function(t){return(0,r.pi)((0,r.pi)({},t),{condition:e})})),!e&&k(""),t=e,(0,r.mG)(void 0,void 0,void 0,(function(){var e,n,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:if(e=w("label.condition-is-invalid"),!t)return[3,5];H(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,f.dV)(t)];case 2:return n=r.sent(),[200,204].includes(n.status)?(k(""),x(!0)):k(e),[3,5];case 3:return a=r.sent(),k((0,p.HR)(a,e)),x(!1),[3,5];case 4:return H(!1),[7];case 5:return[2]}}))}))},onSearch:function(e){D(e?function(t){return t.filter((function(t){return t.value.includes(e)}))}:M(y))}}),R&&s.createElement("div",{className:"tw-mt-1","data-testid":"condition-error",role:"alert"},"❌ Invalid condition : "+R),G&&s.createElement("div",{className:"tw-mt-1",role:"alert"},"Validating the condition..."),q&&!G&&!R&&s.createElement("div",{className:"tw-mt-1","data-testid":"condition-success",role:"alert"},"✅ Valid condition"))))}}}]);