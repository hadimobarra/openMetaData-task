"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[8899],{38394:function(e,t,n){var a=n(8081),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.team-list-container .ant-btn {\n  border-radius: 4px;\n}\n.teams-list-table .ant-table-row .ant-table-cell:first-child,\n.list-table .ant-table-row .ant-table-cell:first-child,\n.teams-list-table .ant-table-thead .ant-table-cell:first-child,\n.list-table .ant-table-thead .ant-table-cell:first-child {\n  padding-left: 16px;\n}\n.remove-icon .ant-btn {\n  height: 22px;\n  width: 22px;\n}\n.roles-and-policy > .ant-space-item:first-child {\n  align-self: flex-end;\n}\n.teams-list-table .ant-table-thead tr > th {\n  border-right: 0px !important;\n  border-bottom: 1px solid #dde3ea;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody tr td {\n  border-right: none;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody tr .ant-table-cell-row-hover {\n  background: rgba(107, 114, 128, 0.15);\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-1 td,\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-2 td,\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-3 td {\n  background: #f8f9fa;\n}\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-1 .ant-table-cell-row-hover,\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-2 .ant-table-cell-row-hover,\n.teams-list-table .ant-table-bordered .ant-table-container .ant-table-content table tbody .ant-table-row-level-3 .ant-table-cell-row-hover {\n  background: rgba(107, 114, 128, 0.15);\n}\n',""]),t.Z=l},84621:function(e,t,n){var a=n(8081),r=n.n(a),i=n(23645),l=n.n(i)()(r());l.push([e.id,'/*\n *  Copyright 2021 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.user-list .rc-virtual-list-holder-inner {\n  display: grid !important;\n  gap: 1rem /* 16px */;\n  grid-template-columns: repeat(3, minmax(0, 1fr));\n}\n',""]),t.Z=l},52977:function(e,t,n){var a=n(71577),r=n(56256),i=n(83663),l=n(94184),s=n.n(l),o=n(67294),c=n(437);t.Z=function(e){var t=e.loadingState,n=void 0===t?"initial":t,l=e.cancelText,d=e.confirmText,u=e.header,m=e.headerClassName,p=void 0===m?"":m,f=e.bodyClassName,v=void 0===f?"":f,b=e.footerClassName,h=void 0===b?"":b,w=e.confirmButtonCss,E=void 0===w?"":w,y=e.cancelButtonCss,g=void 0===y?"":y,C=e.onConfirm,N=e.onCancel,x=e.bodyText,T=e.className,R=e.visible,Z=(0,c.$)().t;return o.createElement(i.Z,{centered:!0,destroyOnClose:!0,className:T,closable:!1,"data-testid":"confirmation-modal",footer:o.createElement("div",{className:s()("justify-end",h)},o.createElement(a.Z,{className:s()("mr-2",g),"data-testid":"cancel",key:"remove-edge-btn",type:"text",onClick:N},l),o.createElement(a.Z,{className:E,danger:d===Z("label.delete"),"data-testid":"waiting"===n?"loading-button":"save-button",key:"save-btn",type:"primary",onClick:C},d)),title:o.createElement(r.Z.Text,{strong:!0,className:p,"data-testid":"modal-header"},u),visible:R},o.createElement("div",{className:s()("h-20",v)},o.createElement(r.Z.Text,{"data-testid":"body-text"},x)))}},6603:function(e,t,n){var a=n(70655),r=n(4107),i=n(94184),l=n.n(i),s=n(96486),o=n(45697),c=n.n(o),d=n(67294),u=n(38464),m=n(53867),p=function(e){var t=e.onSearch,n=e.searchValue,i=e.typingInterval,o=void 0===i?0:i,c=e.placeholder,p=e.label,f=e.removeMargin,v=void 0!==f&&f,b=e.showLoadingStatus,h=void 0!==b&&b,w=(0,a.CR)((0,d.useState)(""),2),E=w[0],y=w[1],g=(0,a.CR)((0,d.useState)(u.PJ.SEARCHV1),2),C=g[0],N=g[1],x=(0,a.CR)((0,d.useState)("initial"),2),T=x[0],R=x[1];(0,d.useEffect)((function(){y(n)}),[n]);var Z=(0,d.useCallback)((function(e){R((function(e){return"waiting"===e?"success":e})),t(e)}),[t]),A=(0,d.useCallback)((0,s.debounce)(Z,o),[Z]);return d.createElement("div",{className:l()("tw-group page-search-bar",{"tw-mb-4":!v}),"data-testid":"search-bar-container"},""!==p&&d.createElement("label",null,p),d.createElement("div",{className:"flex relative"},d.createElement(r.Z,{"data-testid":"searchbar",placeholder:c,prefix:d.createElement(u.ZP,{alt:"icon-search",className:"tw-w-4 tw-h-4 tw-mr-0.5",icon:C}),type:"text",value:E,onBlur:function(){return N(u.PJ.SEARCHV1)},onChange:function(e){var t=e.target.value;y(t),R((function(e){return"waiting"!==e?"waiting":e})),A(t)},onFocus:function(){return N(u.PJ.SEARCHV1COLOR)}}),h&&"waiting"===T&&d.createElement("div",{className:"tw-absolute tw-block tw-z-1 tw-w-4 tw-h-4 tw-top-2 tw-right-2.5 tw-text-center tw-pointer-events-none"},d.createElement(m.Z,{size:"small",type:"default"}))))};p.defaultProps={searchValue:"",typingInterval:1e3,placeholder:"Search...",label:""},p.propTypes={onSearch:c().func.isRequired,searchValue:c().string,typingInterval:c().number,placeholder:c().string,label:c().string},t.Z=p},20615:function(e,t,n){n.d(t,{I:function(){return r},a:function(){return i}});var a=n(22653),r=a.W.DASHBOARD+","+a.W.TABLE+","+a.W.TOPIC+","+a.W.PIPELINE+","+a.W.MLMODEL,i={root:null,rootMargin:"0px",threshold:1}},92693:function(e,t,n){n.d(t,{dF:function(){return a},cK:function(){return r},lS:function(){return i},tf:function(){return l},Kb:function(){return s},E6:function(){return o},y9:function(){return c},BM:function(){return d},ck:function(){return u},_F:function(){return m}});var a="/about-us",r="/about-us",i="/about-us",l="/about-us",s="/about-us",o="/about-us",c="/about-us",d="/about-us",u="/about-us",m="/about-us"},25550:function(e,t,n){n.r(t),n.d(t,{default:function(){return Xe}});var a=n(70655),r=n(60236),i=n(96486),l=n(67294),s=n(437),o=n(59293),c=n(52046),d=n(96566),u=n(74313),m=n(66703),p=n(33891),f=n(28178),v=n(53867),b=n(93389),h=n(79839),w=n(67814),E=n(71577),y=n(19650),g=n(94199),C=n(71230),N=n(15746),x=n(56256),T=n(12028),R=n(28682),Z=n(25213),A=n(13013),S=n(50146),k=n(94184),P=n.n(k),D=n(97882),O=n(62761),L=n(92693),I=n(64632),U=n(55546),B=n(72819),M=n(48217),J=n(87119),z=n(48132),H=n(22215),V=n(39570),_=n(96840),j=n(38464),G=n(67800),W=function(e,t){return e.filter((function(e){return e.deleted===t}))},q=function(e,t){return(0,G.t)("message.delete-team-message",{teamName:e,deleteType:t})},F=function(e){if(!(0,i.isUndefined)(e))return(0,z.HU)(e)},Q=n(50168),K=n(10584),$=n(9632),X=n(41603),Y=n(4142),ee=n(41693),te=n(6603),ne=n(70123),ae=n(8851),re=n(84419),ie=n(52977),le=n(75459),se=n(2307),oe=n(52114),ce=n(80131),de=function(e){var t=e.list,n=e.type,a=e.onDelete,r=e.hasAccess,i=(0,l.useMemo)((function(){return[{title:"Name",dataIndex:"name",width:"200px",key:"name",render:function(e,t){var a="";switch(n){case I.py.POLICY:a=(0,_.Hr)(t.fullyQualifiedName||"");break;case I.py.ROLE:a=(0,_.Uy)(t.fullyQualifiedName||"")}return l.createElement(D.Link,{className:"hover:tw-underline tw-cursor-pointer","data-testid":"entity-name",to:a},(0,z.C_)(t))}},{title:"Description",dataIndex:"description",key:"description",render:function(e,t){return l.createElement(ce.Z,{markdown:(null==t?void 0:t.description)||""})}},{title:"Actions",dataIndex:"actions",width:"80px",key:"actions",render:function(e,t){return l.createElement(g.Z,{placement:"bottomRight",title:r?"Remove":oe.oH},l.createElement(E.Z,{"data-testid":"remove-action-"+(0,z.C_)(t),disabled:!r,type:"text",onClick:function(){return a(t)}},l.createElement(j.ZP,{alt:"remove",icon:j.PJ.ICON_REMOVE,title:"Remove"})))}}]}),[]);return l.createElement(se.Z,{bordered:!0,className:"list-table",columns:i,dataSource:t,pagination:!1,size:"small"})},ue=function(e,t){var n,r,l,s,o=[];try{for(var c=(0,a.XA)(e),d=c.next();!d.done;d=c.next()){var u=d.value,m=!(0,i.isUndefined)(u.children)&&!(0,i.isEmpty)(u.children);((null===(l=null==u?void 0:u.name)||void 0===l?void 0:l.toLowerCase().includes(t.toLowerCase()))||(null===(s=null==u?void 0:u.displayName)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase())))&&(o=(0,a.ev)((0,a.ev)([],(0,a.CR)(o)),[(0,a.pi)((0,a.pi)({},u),{children:void 0})])),m&&(o=(0,a.ev)((0,a.ev)([],(0,a.CR)(o)),(0,a.CR)(ue(u.children,t))))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return o},me=n(52029),pe=n(57865),fe=n(59240),ve=n(5200),be="DraggableBodyRow",he={body:{row:function(e){var t=e.index,n=e.handleMoveRow,r=e.className,i=e.record,s=e.style,o=(0,a._T)(e,["index","handleMoveRow","className","record","style"]),c=(0,l.useRef)(null),d=(0,a.CR)((0,fe.L)({accept:be,collect:function(e){var n=((null==e?void 0:e.getItem())||{}).index;return n===t?{}:{isOver:e.isOver(),dropClassName:n<t?" drop-over-downward":" drop-over-upward"}},drop:function(e){var t=e.record;n(t,i)}}),2),u=d[0],m=u.isOver,p=u.dropClassName;return(0,d[1])((0,(0,a.CR)((0,ve.c)({type:be,item:{record:i},collect:function(e){return{isDragging:e.isDragging()}}}),2)[1])(c)),l.createElement("tr",(0,a.pi)({className:""+r+(m?p:""),ref:c,style:(0,a.pi)({cursor:"move"},s)},o))}}},we=n(19790),Ee=n(93379),ye=n.n(Ee),ge=n(7795),Ce=n.n(ge),Ne=n(90569),xe=n.n(Ne),Te=n(3565),Re=n.n(Te),Ze=n(19216),Ae=n.n(Ze),Se=n(44589),ke=n.n(Se),Pe=n(38394),De={};De.styleTagTransform=ke(),De.setAttributes=Re(),De.insert=xe().bind(null,"head"),De.domAPI=Ce(),De.insertStyleElement=Ae(),ye()(Pe.Z,De),Pe.Z&&Pe.Z.locals&&Pe.Z.locals;var Oe,Le=function(e){var t,n,r=e.currentTeam,o=e.data,c=e.onTeamExpand,d=(0,s.$)().t,u=(0,a.CR)((0,l.useState)(!1),2),p=u[0],f=u[1],v=(0,a.CR)((0,l.useState)(!1),2),b=v[0],h=v[1],w=(0,a.CR)((0,l.useState)(),2),E=w[0],y=w[1],g=(0,l.useMemo)((function(){return[{title:"Teams",dataIndex:"teams",key:"teams",render:function(e,t){return l.createElement(D.Link,{className:"hover:tw-underline tw-cursor-pointer",to:(0,_.KH)(t.fullyQualifiedName||t.name)},(0,z.C_)(t))}},{title:"Type",dataIndex:"teamType",key:"teamType"},{title:"Sub Teams",dataIndex:"childrenCount",key:"subTeams",render:function(e){return null!=e?e:"--"}},{title:"Users",dataIndex:"userCount",key:"users",render:function(e){return null!=e?e:"--"}},{title:"Asset Count",dataIndex:"owns",key:"owns",render:function(e){return e.length}},{title:"Description",dataIndex:"description",key:"description",render:function(e){return e||"--"}}]}),[o,c]),C=(0,l.useCallback)((function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){var n,l,s;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return e.id===t.id?[2]:(n=t,(0,i.isArray)(n.children)?[3,2]:[4,(0,m.Xv)(n.name,["parents"],"all")]);case 1:l=a.sent(),n=(null===(s=l.parents)||void 0===s?void 0:s[0])||r,a.label=2;case 2:return y({from:e,to:n}),f(!0),[2]}}))}))}),[]),N=(0,l.useMemo)((function(){return(0,a.pi)((0,a.pi)({},(0,we.Bn)(!0)),{onExpand:function(e,t){e&&(0,i.isEmpty)(t.children)&&c(!1,t.fullyQualifiedName,!0)}})}),[c]);return l.createElement(l.Fragment,null,l.createElement(me.W,{backend:pe.PD},l.createElement(Z.Z,{bordered:!0,className:"teams-list-table",columns:g,components:he,"data-testid":"team-hierarchy-table",dataSource:o,expandable:N,loading:b,pagination:!1,rowKey:"name",size:"small",onRow:function(e,t){return{index:t,handleMoveRow:C,record:e}}})),l.createElement(S.Z,{centered:!0,destroyOnClose:!0,closable:!1,"data-testid":"confirmation-modal",okText:d("label.confirm"),title:d("label.move-the-team"),visible:p,onCancel:function(){return f(!1)},onOk:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:if(!E)return[3,6];h(!0),n.label=1;case 1:return n.trys.push([1,4,5,6]),[4,(0,m.Xv)(E.from.name,["users","defaultRoles","policies","owner","parents","children"],"all")];case 2:return e=n.sent(),[4,(0,m.fs)((l=e,s=[E.to.id],o=(0,i.omit)((0,i.cloneDeep)(l),["id","fullyQualifiedName","href","version","updatedAt","updatedBy","userCount","childrenCount","owns","changeDescription","deleted","inheritedRoles","key"]),u=o.policies,p=o.users,v=o.defaultRoles,b=o.children,(0,a.pi)((0,a.pi)({},o),{teamType:o.teamType,defaultRoles:F(v),children:o.teamType==M.C.Group?void 0:F(b),parents:s,policies:F(u),users:F(p)})))];case 3:return n.sent(),c(!0,null==r?void 0:r.name),(0,Q.XA)(d("message.team-moved-success")),[3,6];case 4:return t=n.sent(),(0,Q.Eo)(t,d("server.team-moved-error")),[3,6];case 5:return h(!1),f(!1),[7];case 6:return[2]}var l,s,o,u,p,v,b}))}))}},l.createElement(x.Z.Text,null,d("message.team-transfer-message",{from:null===(t=null==E?void 0:E.from)||void 0===t?void 0:t.name,to:null===(n=null==E?void 0:E.to)||void 0===n?void 0:n.name}))))},Ie=function(e){var t,n,o,d,u,p=e.assets,k=e.hasAccess,G=e.currentTeam,F=e.currentTeamUsers,se=e.teamUserPagin,oe=e.currentTeamUserPage,ce=e.teamUsersSearchText,me=e.isDescriptionEditable,pe=e.isTeamMemberLoading,fe=e.childTeams,ve=e.onTeamExpand,be=e.handleAddTeam,he=e.updateTeamHandler,we=e.onDescriptionUpdate,Ee=e.descriptionHandler,ye=e.showDeletedTeam,ge=e.onShowDeletedTeamChange,Ce=e.handleTeamUsersSearchAction,Ne=e.handleCurrentUserPage,xe=e.teamUserPaginHandler,Te=e.handleJoinTeamClick,Re=e.handleLeaveTeamClick,Ze=e.handleAddUser,Ae=e.removeUserFromTeam,Se=e.afterDeleteAction,ke=e.onAssetsPaginate,Pe=e.parentTeams,De=(0,s.$)().t,Oe=G.name===M.C.Organization,Ie=G.teamType===M.C.Group,Ue={user:void 0,state:!1,leave:!1},Be=(0,b.BL)(),Me=Be.permissions,Je=Be.getEntityPermission,ze=(0,a.CR)((0,l.useState)(1),2),He=ze[0],Ve=ze[1],_e=(0,a.CR)((0,l.useState)(!1),2),je=_e[0],Ge=_e[1],We=(0,a.CR)((0,l.useState)(),2),qe=We[0],Fe=We[1],Qe=(0,a.CR)((0,l.useState)(G?G.displayName:""),2),Ke=Qe[0],$e=Qe[1],Xe=(0,a.CR)((0,l.useState)(Ue),2),Ye=Xe[0],et=Xe[1],tt=(0,a.CR)((0,l.useState)(""),2),nt=tt[0],at=tt[1],rt=(0,a.CR)((0,l.useState)([]),2),it=rt[0],lt=rt[1],st=(0,a.CR)((0,l.useState)([]),2),ot=st[0],ct=st[1],dt=(0,a.CR)((0,l.useState)(),2),ut=dt[0],mt=dt[1],pt=(0,a.CR)((0,l.useState)(!1),2),ft=pt[0],vt=pt[1],bt=(0,a.CR)((0,l.useState)(),2),ht=bt[0],wt=bt[1],Et=(0,a.CR)((0,l.useState)(V.Bd),2),yt=Et[0],gt=Et[1],Ct=(0,a.CR)((0,l.useState)(!1),2),Nt=Ct[0],xt=Ct[1],Tt=(0,a.CR)((0,l.useState)(!1),2),Rt=Tt[0],Zt=Tt[1],At=(0,l.useMemo)((function(){return Oe&&G&&G.childrenCount?G.childrenCount+1:it.length}),[it,Oe,G.childrenCount]),St=(0,l.useMemo)((function(){return function(e,t,n,r,i){var l,s,o={teams:{name:"Teams",isProtected:!1,position:1,count:i},users:{name:"Users",isProtected:!1,position:2,count:null==t?void 0:t.total},assets:{name:"Assets",isProtected:!1,position:3,count:(0,H.WN)((null==e?void 0:e.owns)||[]).length},roles:{name:"Roles",isProtected:!1,position:4,count:null===(l=null==e?void 0:e.defaultRoles)||void 0===l?void 0:l.length},policies:{name:"Policies",isProtected:!1,position:5,count:null===(s=null==e?void 0:e.policies)||void 0===s?void 0:s.length}},c=[o.roles,o.policies];return r?(0,a.ev)([o.teams],(0,a.CR)(c)):n?(0,a.ev)([o.users,o.assets],(0,a.CR)(c)):(0,a.ev)([o.teams,o.users],(0,a.CR)(c))}(G,se,Ie,Oe,At)}),[G,se,nt,At]),kt=(0,l.useMemo)((function(){return!(0,i.isEmpty)(Me)&&(0,V.P_)(B.OX.Create,h.A.TEAM,Me)}),[Me]),Pt=function(e,t){void 0===t&&(t=!1);var n=(0,a.ev)([],(0,a.CR)(null==G?void 0:G.users)).find((function(t){return t.id===e}));et({user:n,state:!0,leave:t})},Dt=(0,l.useMemo)((function(){return function(e){var t=e.title,n=e.disabled,a=e.label,r=e.onClick,i=e.heading,s=e.description,o=e.button,c=e.datatestid,d=e.doc;return l.createElement(f.Z,{buttons:o||l.createElement(E.Z,{ghost:!0,"data-testid":c,disabled:n,size:"small",title:t,type:"primary",onClick:r},a),description:s,doc:d,heading:i,type:"ADD_DATA"})}}),[]),Ot=(0,l.useMemo)((function(){return(0,a.ev)((0,a.ev)([],(0,a.CR)((0,le.y5)())),[{title:De("label.actions"),dataIndex:"actions",key:"actions",width:90,render:function(e,t){return l.createElement(y.Z,{align:"center",className:"tw-w-full tw-justify-center remove-icon",size:8},l.createElement(g.Z,{placement:"bottomRight",title:yt.EditAll?De("label.remove"):De("message.no-permission-for-action")},l.createElement(E.Z,{"data-testid":"remove-user-btn",disabled:!yt.EditAll,icon:l.createElement(j.ZP,{alt:De("label.remove"),className:"tw-w-4 tw-mb-2.5",icon:j.PJ.ICON_REMOVE}),type:"text",onClick:function(){return Pt(t.id)}})))}}])}),[Pt]),Lt=(0,l.useMemo)((function(){var e,t,n,a;switch(null===(e=G.owner)||void 0===e?void 0:e.type){case"team":return(0,O.bV)((null===(t=G.owner)||void 0===t?void 0:t.name)||"");case"user":return(0,O.ZG)(null!==(a=null===(n=G.owner)||void 0===n?void 0:n.fullyQualifiedName)&&void 0!==a?a:"");default:return""}}),[G]),It=(0,a.ev)([{key:"Owner",value:Lt,placeholderText:(null===(t=null==G?void 0:G.owner)||void 0===t?void 0:t.displayName)||(null===(n=null==G?void 0:G.owner)||void 0===n?void 0:n.name)||"",isLink:!0,openInNewTab:!1,profileName:(null===(o=null==G?void 0:G.owner)||void 0===o?void 0:o.type)===U.jc.USER?null===(d=null==G?void 0:G.owner)||void 0===d?void 0:d.name:void 0}],(0,a.CR)(Oe?[]:[{key:"TeamType",value:G.teamType||""}])),Ut=function(e){return void 0===e&&(e=!1),k||function(){var e,t;return(0,z.Xp)((null===(e=null==G?void 0:G.owner)||void 0===e?void 0:e.type)||"",(null===(t=null==G?void 0:G.owner)||void 0===t?void 0:t.id)||"")}()||e},Bt=function(){if(G){var e=(0,a.pi)((0,a.pi)({},G),{isJoinable:!G.isJoinable});he(e,!1)}},Mt=function(e){if(G){var t=(0,a.pi)((0,a.pi)({},G),{owner:(0,i.isUndefined)(e)?G.owner:e});return he(t)}return Promise.reject()},Jt=function(){if(G){var e=(0,a.pi)((0,a.pi)({},G),{owner:void 0});he(e)}},zt=function(e){if(G){var t=(0,a.pi)((0,a.pi)({},G),{teamType:e});return he(t)}},Ht=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,m.kt)(G.id)];case 1:if(!t.sent())throw De("message.entity-restored-error",{entity:De("label.team")});return Se(),(0,Q.XA)(De("message.entity-restored-success",{entity:De("label.team")})),[3,3];case 2:return e=t.sent(),(0,Q.Eo)(e,De("message.entity-restored-error",{entity:De("label.team")})),[3,3];case 3:return[2]}}))}))};(0,l.useEffect)((function(){!(0,i.isEmpty)(G)&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:vt(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,Je(h.A.TEAM,G.id)];case 2:return e=n.sent(),gt(e),[3,5];case 3:return t=n.sent(),(0,Q.Eo)(t,De("server.entity-fetch-error",{entity:De("label.user-permissions")})),[3,5];case 4:return vt(!1),[7];case 5:return[2]}}))}))}),[G]),(0,l.useEffect)((function(){if(G){var e=Pe&&!Oe?Pe.map((function(e){return{name:(0,z.C_)(e),url:(0,_.KH)(e.name||e.fullyQualifiedName||"")}})):[],t=(0,a.ev)((0,a.ev)([],(0,a.CR)(e)),[{name:(0,z.C_)(G),url:""}]);ct(t),$e(G.displayName||G.name)}}),[G,Pe,ye]),(0,l.useEffect)((function(){lt(W(null!=fe?fe:[],ye)),at("")}),[fe,ye]),(0,l.useEffect)((function(){Fe(c.Z.getCurrentUserDetails())}),[G,c.Z.userDetails,c.Z.nonSecureUserDetails]),(0,l.useEffect)((function(){Ve(Ie?2:1)}),[Ie]),(0,l.useEffect)((function(){Ne()}),[]);var Vt,_t,jt,Gt=(0,l.useMemo)((function(){return l.createElement(j.ZP,{alt:De("label.delete"),icon:ye?j.PJ.HIDE_PASSWORD:j.PJ.SHOW_PASSWORD})}),[ye]),Wt=(0,l.useMemo)((function(){return l.createElement(j.ZP,{alt:De("label.delete"),icon:G.isJoinable?j.PJ.OPEN_LOCK:j.PJ.CLOSED_LOCK})}),[G.isJoinable]),qt=(0,l.useMemo)((function(){return l.createElement(j.ZP,{alt:De("label.restore"),icon:j.PJ.RESTORE,width:"16px"})}),[G.isJoinable]),Ft={label:l.createElement(C.Z,{className:"cursor-pointer","data-testid":"deleted-team-menu-item"},l.createElement(N.Z,{span:3},Gt),l.createElement(N.Z,{span:21},l.createElement(C.Z,null,l.createElement(N.Z,{span:21},l.createElement(x.Z.Text,{className:"font-medium","data-testid":"deleted-menu-item-label"},De("label.deleted-team-action",{action:De(ye?"label.hide":"label.show")}))),l.createElement(N.Z,{span:3},l.createElement(T.Z,{checked:ye,"data-testid":"deleted-menu-item-switch",size:"small",onChange:ge})),l.createElement(N.Z,{className:"p-t-xss"},l.createElement(x.Z.Paragraph,{className:"text-grey-muted text-xs m-b-0 line-height-16"},De("message.view-deleted-teams")))))),key:"deleted-team-dropdown"},Qt=l.createElement(R.Z,{items:[Ft]}),Kt=(0,l.useMemo)((function(){var e,t;return(0,a.ev)((0,a.ev)((0,a.ev)([],(0,a.CR)(!(null===(t=null===(e=G.parents)||void 0===e?void 0:e[0])||void 0===t?void 0:t.deleted)&&G.deleted?[{label:l.createElement(C.Z,{className:"cursor-pointer",onClick:Ht},l.createElement(N.Z,{span:3},qt),l.createElement(N.Z,{"data-testid":"restore-team",span:21},l.createElement(C.Z,null,l.createElement(N.Z,{span:24},l.createElement(x.Z.Text,{className:"font-medium","data-testid":"restore-team-label"},De("label.restore-team"))),l.createElement(N.Z,{className:"p-t-xss",span:24},l.createElement(x.Z.Paragraph,{className:"text-grey-muted text-xs m-b-0 line-height-16"},De("message.restore-deleted-team")))))),key:"restore-team-dropdown"}]:[])),[{label:l.createElement(C.Z,{className:"cursor-pointer","data-testid":"deleted-team-menu-item",onClick:Bt},l.createElement(N.Z,{span:3},Wt),l.createElement(N.Z,{"data-testid":"open-group",span:21},l.createElement(C.Z,null,l.createElement(N.Z,{span:21},l.createElement(x.Z.Text,{className:"font-medium","data-testid":"open-group-label"},(G.isJoinable?De("label.close"):De("label.open"))+" "+De("label.group"))),l.createElement(N.Z,{span:3},l.createElement(T.Z,{checked:G.isJoinable,className:"tw-mr-2",size:"small"})),l.createElement(N.Z,{className:"p-t-xss"},l.createElement(x.Z.Paragraph,{className:"text-grey-muted text-xs m-b-0 line-height-16"},De("label.access-to-collaborate")))))),key:"open-group-dropdown"}]),(0,a.CR)(G.teamType===M.C.BusinessUnit?[Ft]:[]))}),[yt,G,fe,ye]),$t=yt.ViewAll||yt.ViewBasic;return ft||pe>0?l.createElement(v.Z,null):$t?l.createElement("div",{className:"tw-h-full tw-flex tw-flex-col tw-flex-grow","data-testid":"team-details-container"},(0,i.isEmpty)(G)?l.createElement(f.Z,{buttons:l.createElement("div",{className:"tw-text-lg tw-text-center"},l.createElement(K.z,{"data-testid":"add-team",disabled:!kt,size:"small",theme:"primary",title:De(kt?"label.add-team":"message.no-permission-for-action"),variant:"outlined",onClick:function(){return be(!0)}},De("label.add-new-team"))),doc:L.E6,heading:De("label.teams"),type:"ADD_DATA"}):l.createElement(l.Fragment,null,!Oe&&l.createElement(re.Z,{className:"p-b-xs",titleLinks:ot}),l.createElement("div",{className:"tw-flex tw-justify-between tw-items-center","data-testid":"header"},l.createElement("div",{className:"tw-heading tw-text-link tw-text-base tw-mb-2"},je?l.createElement("div",{className:"tw-flex tw-items-center tw-gap-1"},l.createElement("input",{className:"tw-form-inputs tw-form-inputs-padding tw-py-0.5 tw-w-64","data-testid":"synonyms",id:"synonyms",name:"synonyms",placeholder:De("label.enter-comma-separated"),type:"text",value:Ke,onChange:function(e){return $e(e.target.value)}}),l.createElement("div",{className:"tw-flex tw-justify-end","data-testid":"buttons"},l.createElement(K.z,{className:"tw-px-1 tw-py-1 tw-rounded tw-text-sm tw-mr-1","data-testid":"cancelAssociatedTag",size:"custom",theme:"primary",variant:"contained",onMouseDown:function(){return Ge(!1)}},l.createElement(w.G,{className:"tw-w-3.5 tw-h-3.5",icon:"times"})),l.createElement(K.z,{className:"tw-px-1 tw-py-1 tw-rounded tw-text-sm","data-testid":"saveAssociatedTag",size:"custom",theme:"primary",variant:"contained",onMouseDown:function(){if(Ke&&G){var e=(0,a.pi)((0,a.pi)({},G),{displayName:Ke});he(e),Ge(!1)}}},l.createElement(w.G,{className:"tw-w-3.5 tw-h-3.5",icon:"check"})))):l.createElement("div",{className:"tw-flex tw-group","data-testid":"team-heading"},l.createElement(x.Z.Title,{ellipsis:{rows:1,tooltip:!0},level:5},Ke),Ut()&&l.createElement("div",{className:P()("tw-w-5 tw-min-w-max")},l.createElement(g.Z,{placement:"bottomLeft",title:yt.EditAll||yt.EditDisplayName?De("label.edit-entity",{entity:De("label.display-name")}):De("message.no-permission-for-action")},l.createElement("button",{className:"tw-ml-2 focus:tw-outline-none","data-testid":"edit-synonyms",disabled:!(yt.EditDisplayName||yt.EditAll),onClick:function(){return Ge(!0)}},l.createElement(j.ZP,{alt:De("label.edit"),className:"tw-mb-1",icon:"icon-edit",width:"16px"})))))),Oe?l.createElement(A.Z,{align:{targetOffset:[-12,0]},overlay:Qt,overlayStyle:{width:"350px"},placement:"bottomRight",trigger:["click"],visible:Rt,onVisibleChange:Zt},l.createElement(E.Z,{className:"rounded-4 w-6 manage-dropdown-button","data-testid":"teams-dropdown",size:"small"},l.createElement(w.G,{className:"text-primary self-center manage-dropdown-icon",icon:"ellipsis-vertical"}))):l.createElement(y.Z,{align:"center"},!(0,i.isUndefined)(qe)&&(_t=!function(e){var t;return!!qe&&(null===(t=qe.teams)||void 0===t?void 0:t.find((function(t){return t.id===e})))}(G.id),jt=G.isJoinable||!1,_t?jt||k?l.createElement(K.z,{className:"tw-h-8 tw-px-2","data-testid":"join-teams",size:"small",theme:"primary",variant:"contained",onClick:function(){var e;if(qe&&G){var t=(0,i.cloneDeep)(null!==(e=qe.teams)&&void 0!==e?e:[]);t.push({id:G.id,type:U.jc.TEAM,name:G.name});var n=(0,a.pi)((0,a.pi)({},qe),{teams:t}),l=(0,r.qu)(qe,n);Te(qe.id,l)}}},De("label.join-team")):null:l.createElement(K.z,{className:"tw-h-8 tw-rounded","data-testid":"leave-team-button",size:"small",theme:"primary",variant:"outlined",onClick:function(){return qe&&Pt(qe.id,!0)}},De("label.leave-team"))),yt.EditAll&&l.createElement(X.Z,{isRecursiveDelete:!0,afterDeleteAction:Se,allowSoftDelete:!G.deleted,buttonClassName:"tw-p-4",canDelete:yt.EditAll,entityId:G.id,entityName:G.fullyQualifiedName||G.name,entityType:"team",extraDropdownContent:Kt,hardDeleteMessagePostFix:q(G.fullyQualifiedName||G.name,De("label.permanently-lowercase")),softDeleteMessagePostFix:q(G.fullyQualifiedName||G.name,De("label.soft-lowercase"))}))),l.createElement(y.Z,{size:0},It.map((function(e,t){return l.createElement(l.Fragment,null,l.createElement(Y.Z,{currentOwner:G.owner,data:e,isGroupType:Ie,removeOwner:yt.EditAll||yt.EditOwner?Jt:void 0,showGroupOption:!fe.length,teamType:G.teamType,updateOwner:yt.EditAll||yt.EditOwner?Mt:void 0,updateTeamType:yt.EditAll?zt:void 0}),1!==It.length&&t<It.length-1?l.createElement("span",{className:"tw-mx-1.5 tw-inline-block tw-text-gray-400"},"|"):null)}))),l.createElement("div",{className:"m-b-sm m-t-xs","data-testid":"description-container"},l.createElement($.Z,{description:(null==G?void 0:G.description)||"",entityName:null!==(u=null==G?void 0:G.displayName)&&void 0!==u?u:null==G?void 0:G.name,hasEditAccess:yt.EditDescription||yt.EditAll,isEdit:me,onCancel:function(){return Ee(!1)},onDescriptionEdit:function(){return Ee(!0)},onDescriptionUpdate:we})),l.createElement("div",{className:"tw-flex tw-flex-col tw-flex-grow"},l.createElement(ae.Z,{activeTab:He,setActiveTab:function(e){return Ve(e)},tabs:St}),l.createElement("div",{className:"tw-flex-grow tw-flex tw-flex-col tw-pt-4"},1===He&&(0!==G.childrenCount||nt?l.createElement(C.Z,{className:"team-list-container",gutter:[8,16],justify:"space-between"},l.createElement(N.Z,{span:8},l.createElement(te.Z,{removeMargin:!0,placeholder:De("label.search-team")+"...",searchValue:nt,typingInterval:500,onSearch:function(e){at(e),lt(W(e?ue(fe,e):null!=fe?fe:[],ye))}})),l.createElement(N.Z,null,l.createElement(y.Z,{align:"center"},l.createElement(E.Z,{"data-testid":"add-team",disabled:!kt,title:De(kt?"label.add-team":"message.no-permission-for-action"),type:"primary",onClick:function(){return be(!0)}},De("label.add-team")))),l.createElement(N.Z,{span:24},l.createElement(Le,{currentTeam:G,data:it,onTeamExpand:ve}))):Dt({title:De(kt?"label.add-team":"message.no-permission-for-action"),label:De("label.add-team"),onClick:function(){return be(!0)},disabled:!kt,heading:De("label.team"),datatestid:"add-team"})),2===He&&(Vt=(0,i.orderBy)(F||[],["name"],"asc"),l.createElement("div",null,(0,i.isEmpty)(F)&&!ce&&pe<=0?Dt({description:l.createElement("div",{className:"tw-mb-2"},l.createElement("p",null,De("label.no-users",{text:ce?De("label.as-lowercase")+" "+ce+".":De("label.added-yet-lowercase")})),l.createElement("p",null,De("label.adding-some")," ")),disabled:!yt.EditAll,title:yt.EditAll?De("label.add-new-user"):De("message.no-permission-for-action"),onClick:function(){return Ze(!0)},label:De("label.add-new-user"),datatestid:"add-user"}):l.createElement(l.Fragment,null,l.createElement("div",{className:"tw-flex tw-justify-between tw-items-center tw-mb-3"},l.createElement("div",{className:"tw-w-4/12"},l.createElement(te.Z,{removeMargin:!0,placeholder:De("label.search-for-user")+"...",searchValue:ce,typingInterval:500,onSearch:Ce})),F.length>0&&Ut()&&l.createElement("div",null,l.createElement(K.z,{className:"tw-h-8 tw-px-2","data-testid":"add-user",disabled:!yt.EditAll,size:"small",theme:"primary",title:yt.EditAll?De("label.add-user"):De("message.no-permission-for-action"),variant:"contained",onClick:function(){Ze(!0)}},De("label.add-user")))),pe>0?l.createElement(v.Z,null):l.createElement("div",null,l.createElement(l.Fragment,null,l.createElement(Z.Z,{bordered:!0,className:"teams-list-table",columns:Ot,dataSource:Vt,pagination:!1,size:"small"}),se.total>O.Ou&&l.createElement(ee.Z,{currentPage:oe,isNumberBased:Boolean(ce),pageSize:O.Ou,paging:se,pagingHandler:xe,totalCount:se.total})))))),3===He&&((0,H.WN)((null==G?void 0:G.owns)||[]).length<=0?Dt({description:l.createElement("div",{className:"tw-mb-4"},l.createElement("p",null," ",De("label.team-no-asset")," "),l.createElement("p",null,De("label.adding-some")," ")),button:l.createElement(D.Link,{to:"/explore"},l.createElement(E.Z,{ghost:!0,size:"small",type:"primary"},De("label.explore")))}):l.createElement("div",{"data-testid":"table-container"},p.data.map((function(e,t){return l.createElement("div",{className:"m-b-sm",key:""+e.name+t},l.createElement(ne.Z,{database:e.database,databaseSchema:e.databaseSchema,deleted:e.deleted,description:e.description,fullyQualifiedName:e.fullyQualifiedName,id:"tabledatacard"+t,indexType:e.index,name:e.name,owner:e.owner,service:e.service,serviceType:e.serviceType||"--",tags:e.tags,tier:(0,z.th)(e),usage:e.weeklyPercentileRank}))})),p.total>O.An&&p.data.length>0&&l.createElement(ee.Z,{isNumberBased:!0,currentPage:p.currPage,pageSize:O.An,paging:{},pagingHandler:ke,totalCount:p.total}))),4===He&&((0,i.isEmpty)(G.defaultRoles||[])?Dt({title:yt.EditAll?De("label.add-role"):De("message.no-permission-for-action"),label:De("label.add-role"),onClick:function(){return mt({type:I.py.ROLE,selectedData:G.defaultRoles||[]})},disabled:!yt.EditAll,heading:De("label.role"),datatestid:"add-role",doc:L._F}):l.createElement(y.Z,{className:"tw-w-full roles-and-policy",direction:"vertical"},l.createElement(E.Z,{"data-testid":"add-role",disabled:!yt.EditAll,title:yt.EditAll?De("label.add-role"):De("message.no-permission-for-action"),type:"primary",onClick:function(){return mt({type:I.py.ROLE,selectedData:G.defaultRoles||[]})}},De("label.add-role")),l.createElement(de,{hasAccess:yt.EditAll,list:G.defaultRoles||[],type:I.py.ROLE,onDelete:function(e){return wt({record:e,attribute:"defaultRoles"})}}))),5===He&&((0,i.isEmpty)(G.policies)?Dt({title:yt.EditAll?De("label.add-policy"):De("message.no-permission-for-action"),label:De("label.add-policy"),datatestid:"add-policy",onClick:function(){return mt({type:I.py.POLICY,selectedData:G.policies||[]})},disabled:!yt.EditAll,heading:De("label.policies"),doc:L.ck}):l.createElement(y.Z,{className:"tw-w-full roles-and-policy",direction:"vertical"},l.createElement(E.Z,{"data-testid":"add-policy",disabled:!yt.EditAll,title:yt.EditAll?De("label.add-policy"):De("message.no-permission-for-action"),type:"primary",onClick:function(){return mt({type:I.py.POLICY,selectedData:G.policies||[]})}},De("label.add-policy")),l.createElement(de,{hasAccess:yt.EditAll,list:G.policies||[],type:I.py.POLICY,onDelete:function(e){return wt({record:e,attribute:"policies"})}})))))),l.createElement(ie.Z,{bodyText:function(e){var t,n,a,r,i=e?De("label.leave-the-team-team-name",{teamName:null!==(t=null==G?void 0:G.displayName)&&void 0!==t?t:null==G?void 0:G.name}):De("label.remove-entity",{entity:null!==(a=null===(n=Ye.user)||void 0===n?void 0:n.displayName)&&void 0!==a?a:null===(r=Ye.user)||void 0===r?void 0:r.name});return De("message.are-you-sure-want-to-text",{text:i})}(Ye.leave),cancelText:De("label.cancel"),confirmText:De("label.confirm"),header:Ye.leave?De("label.leave-team"):De("label.removing-user"),visible:Ye.state,onCancel:function(){return et(Ue)},onConfirm:function(){var e;Ye.leave?function(){var e;if(qe&&G){var t=(0,i.cloneDeep)(null!==(e=qe.teams)&&void 0!==e?e:[]);t=t.filter((function(e){return e.id!==G.id}));var n=(0,a.pi)((0,a.pi)({},qe),{teams:t}),l=(0,r.qu)(qe,n);return Re(qe.id,l)}return Promise.reject()}().then((function(){et(Ue)})):Ae(null===(e=Ye.user)||void 0===e?void 0:e.id).then((function(){et(Ue)}))}}),ut&&l.createElement(J.Z,{isModalLoading:Nt,isOpen:!(0,i.isUndefined)(ut),selectedKeys:ut.selectedData.map((function(e){return e.id})),title:De("label.add")+" "+ut.type,type:ut.type,onCancel:function(){return mt(void 0)},onSave:function(e){return t=e,(0,a.mG)(void 0,void 0,void 0,(function(){var e,n;return(0,a.Jh)(this,(function(r){switch(r.label){case 0:if(!ut)return[3,2];switch(xt(!0),e=(0,a.pi)({},G),n=t.map((function(e){var t=ut.selectedData.find((function(t){return t.id===e}));return t||{id:e,type:ut.type}})),ut.type){case I.py.ROLE:e=(0,a.pi)((0,a.pi)({},e),{defaultRoles:n});break;case I.py.POLICY:e=(0,a.pi)((0,a.pi)({},e),{policies:n})}return[4,he(e)];case 1:r.sent(),xt(!1),r.label=2;case 2:return[2]}}))}));var t}}),ht&&l.createElement(S.Z,{centered:!0,closable:!1,confirmLoading:Nt,okText:De("label.confirm"),title:De("label.remove-entity",{entity:(0,z.C_)(null==ht?void 0:ht.record)})+" "+De("label.from-lowercase")+" "+(0,z.C_)(G),visible:!(0,i.isUndefined)(ht.record),onCancel:function(){return wt(void 0)},onOk:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(t=ht.record,n=ht.attribute,(0,a.mG)(void 0,void 0,void 0,(function(){var e,r,i,l,s;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:return xt(!0),e=null!==(s=G[n])&&void 0!==s?s:[],r=e.filter((function(e){return e.id!==t.id})),i=(0,a.pi)((0,a.pi)({},G),((l={})[n]=r,l)),[4,he(i)];case 1:return o.sent(),xt(!1),[2]}}))})))];case 1:return e.sent(),wt(void 0),[2]}var t,n}))}))}},l.createElement(x.Z.Text,null,De("label.sure-to-remove")," ",(0,z.C_)(ht.record)+" t('label.from-lowercase') "+(0,z.C_)(G)+"?"))):l.createElement(C.Z,{align:"middle",className:"tw-h-full"},l.createElement(N.Z,{span:24},l.createElement(f.Z,null,l.createElement("p",null,De("message.no-permission-to-view")))))},Ue=n(20615),Be=n(22653);!function(e){e.BusinessUnit="BusinessUnit",e.Department="Department",e.Division="Division",e.Group="Group",e.Organization="Organization"}(Oe||(Oe={}));var Me=n(85087),Je=n(22334),ze=n(9242),He=n(4107),Ve=n(34041),_e=n(97809),je=n(6929),Ge=function(e){var t=e.visible,n=e.onCancel,r=e.onSave,o=e.isLoading,c=(0,s.$)().t,d=(0,a.CR)((0,l.useState)(""),2),u=d[0],p=d[1],f=(0,a.CR)((0,l.useState)([]),2),v=f[0],b=f[1],h=(0,l.useRef)(),w=(0,l.useMemo)((function(){return Object.values(M.C).filter((function(e){return e!==M.C.Organization})).map((function(e){return{label:e,value:e}}))}),[]),E=(0,l.useMemo)((function(){return{required:"${label} is required",string:{range:"${label} must be between ${min} and ${max}."},whitespace:"${label} is required"}}),[]);return(0,l.useEffect)((function(){t&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,m.LK)()];case 1:return e=n.sent().data,b(e),[3,3];case 2:return t=n.sent(),(0,Q.Eo)(t,je.Z["api-error-messages"]["unexpected-server-response"]),[3,3];case 3:return[2]}}))}))}),[t]),l.createElement(S.Z,{centered:!0,closable:!1,confirmLoading:o,okButtonProps:{form:"add-team-form",type:"primary",htmlType:"submit"},title:c("label.add-team"),visible:t,width:750,onCancel:n},l.createElement(ze.Z,{id:"add-team-form",initialValues:{teamType:M.C.Department},layout:"vertical",name:"add-team-nest-messages",validateMessages:E,onFinish:function(e){e=(0,a.pi)((0,a.pi)({},e),{name:(0,i.trim)(e.name),displayName:(0,i.trim)(e.displayName),description:u}),r(e)}},l.createElement(ze.Z.Item,{label:c("label.name"),name:"name",rules:[{required:!0,type:"string",min:1,max:128,whitespace:!0},{validator:function(e,t){return(0,z.Am)(t)?(0,i.isUndefined)(v.find((function(e){return(0,i.toLower)(e.name)===(0,i.toLower)(t)})))?Promise.resolve():Promise.reject(c("label.entity-already-exists",{entity:"Name"})):Promise.reject(c("label.special-character-not-allowed"))}}]},l.createElement(He.Z,{"data-testid":"name",placeholder:c("label.enter-name")})),l.createElement(ze.Z.Item,{label:c("label.display-name"),name:"displayName",rules:[{required:!0,type:"string",whitespace:!0,min:1,max:128}]},l.createElement(He.Z,{"data-testid":"display-name",placeholder:c("label.enter-display-name")})),l.createElement(ze.Z.Item,{label:c("label.team-type"),name:"teamType"},l.createElement(Ve.Z,{"data-testid":"team-selector",options:w,placeholder:c("label.select-team")})),l.createElement(ze.Z.Item,{label:c("label.description"),name:"description",style:{marginBottom:0}},l.createElement(_e.Z,{"data-testid":"description",initialValue:"",ref:h,onTextChange:function(e){return p(e)}}))))},We=n(38272),qe=n(7606),Fe=n(84621),Qe={};Qe.styleTagTransform=ke(),Qe.setAttributes=Re(),Qe.insert=xe().bind(null,"head"),Qe.domAPI=Ce(),Qe.insertStyleElement=Ae(),ye()(Fe.Z,Qe),Fe.Z&&Fe.Z.locals&&Fe.Z.locals;var Ke=n(69868),$e=function(e){var t=e.isVisible,n=e.header,r=e.list,s=e.onCancel,o=e.onSave,c=e.searchPlaceHolder,d=(0,a.CR)((0,l.useState)([]),2),m=d[0],f=d[1],v=(0,a.CR)((0,l.useState)([]),2),b=v[0],h=v[1],w=(0,a.CR)((0,l.useState)(""),2),E=w[0],y=w[1],g=(0,a.CR)((0,l.useState)(O.OQ),2),C=g[0],N=g[1],x=(0,a.CR)((0,l.useState)(1),2),T=x[0],R=x[1],Z=(0,a.CR)((0,l.useState)(0),2),A=Z[0],k=Z[1],P=function(e){return e.filter((function(e){return!r.some((function(t){return e.id===t.id}))&&e})).map((function(e){return{displayName:(0,z.C_)(e),fqn:e.fullyQualifiedName||"",id:e.id,type:U.jc.USER,name:e.name}}))},D=function(e,t){(0,u.rg)(e,t,O.Ou,"","","",Be.W.USER).then((function(e){var t=P((0,Je.wB)(e.data.hits.hits));k(e.data.hits.total.value),R((function(e){return e+1})),f((function(e){return(0,a.ev)((0,a.ev)([],(0,a.CR)(e)),(0,a.CR)(t))}))})).catch((function(){f([])}))},L=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,r,i,l;return(0,a.Jh)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,p.Rf)("",O.Ou,e)];case 1:return t=s.sent(),n=t.data,r=t.paging,i=P(n),f((function(e){return(0,a.ev)((0,a.ev)([],(0,a.CR)(e)),(0,a.CR)(i))})),N(r),[3,3];case 2:return l=s.sent(),f([]),(0,Q.Eo)(l,je.Z["api-error-messages"]["fetch-users-error"]),[3,3];case 3:return[2]}}))}))},I=function(e){h((function(t){if(t.includes(e)){var n=(0,a.ev)([],(0,a.CR)(t)),r=n.indexOf(e);return n.splice(r,1),n}return(0,a.ev)((0,a.ev)([],(0,a.CR)(t)),[e])}))};return(0,l.useEffect)((function(){L()}),[]),l.createElement(S.Z,{"data-testid":"modal-container",okButtonProps:{id:"save-button"},okText:"Save",title:n,visible:t,width:750,onCancel:s,onOk:function(){o(b.map((function(e){return{id:e,type:U.jc.USER}})))}},l.createElement(te.Z,{placeholder:c||"Search for a user...",searchValue:E,typingInterval:500,onSearch:function(e){f([]),R(1),y(e),e?D(e,T):L()}}),l.createElement(We.ZP,null,l.createElement(qe.Z,{className:"user-list",data:m,height:O.ju,itemKey:"id",onScroll:function(e){e.currentTarget.scrollHeight-e.currentTarget.scrollTop===O.ju&&(E?O.Ou*T<A&&D(E,T):!(0,i.isUndefined)(C.after)&&L({after:C.after}))}},(function(e){return l.createElement(Ke.Z,{isActionVisible:!0,isCheckBoxes:!0,isIconVisible:!0,item:e,key:e.id,onSelect:I})}))))},Xe=function(){var e=(0,o.k6)(),t=(0,s.$)().t,n=(0,b.BL)().getEntityPermissionByFqn,w=(0,Me.a)().isAdminUser,E=(0,d.Eu)().isAuthDisabled,y=(0,o.UO)().fqn,g=(0,a.CR)((0,l.useState)(""),2),C=g[0],N=g[1],x=(0,a.CR)((0,l.useState)([]),2),T=x[0],R=x[1],Z=(0,a.CR)((0,l.useState)({}),2),A=Z[0],S=Z[1],k=(0,a.CR)((0,l.useState)([]),2),P=k[0],D=k[1],L=(0,a.CR)((0,l.useState)(O.OQ),2),I=L[0],U=L[1],B=(0,a.CR)((0,l.useState)(0),2),M=B[0],J=B[1],H=(0,a.CR)((0,l.useState)(O.j2),2),j=H[0],G=H[1],W=(0,a.CR)((0,l.useState)(!1),2),q=W[0],F=W[1],K=(0,a.CR)((0,l.useState)(!0),2),$=K[0],X=K[1],Y=(0,a.CR)((0,l.useState)(!1),2),ee=Y[0],te=Y[1],ne=(0,a.CR)((0,l.useState)(""),2),ae=ne[0],re=ne[1],ie=(0,a.CR)((0,l.useState)(!1),2),le=ie[0],se=ie[1],ce=(0,a.CR)((0,l.useState)(!1),2),de=ce[0],ue=ce[1],me=(0,a.CR)((0,l.useState)(!1),2),pe=me[0],fe=me[1],ve=(0,a.CR)((0,l.useState)({data:[],total:0,currPage:1}),2),be=ve[0],he=ve[1],we=(0,a.CR)((0,l.useState)([]),2),Ee=we[0],ye=we[1],ge=(0,a.CR)((0,l.useState)(V.Bd),2),Ce=ge[0],Ne=ge[1],xe=function(e){te(e)},Te=function(e){se(e)},Re=function(e,t,n){var r,i;try{for(var l=(0,a.XA)(e),s=l.next();!s.done;s=l.next()){var o=s.value;if(o.fullyQualifiedName===t){o.children=n;break}o.children&&o.children.length>0&&Re(o.children,t,n)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}},Ze=function(e,n,r){return void 0===e&&(e=!0),void 0===r&&(r=!1),(0,a.mG)(void 0,void 0,void 0,(function(){var l,s,o,c;return(0,a.Jh)(this,(function(d){switch(d.label){case 0:e&&J((function(e){return++e})),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,(0,m.LK)(["defaultRoles","userCount","childrenCount","owns"],{parentTeam:null!=n?n:"organization",include:"all"})];case 2:return l=d.sent().data,s=l.map((function(e){return(0,a.pi)((0,a.pi)({},e),{key:e.fullyQualifiedName,children:e.childrenCount&&e.childrenCount>0?[]:void 0})})),r?(o=(0,i.cloneDeep)(T),Re(o,n||"",s),R(o)):R(s),[3,4];case 3:return c=d.sent(),(0,Q.Eo)(c,t("server.unexpected-response")),[3,4];case 4:return e&&J((function(e){return--e})),[2]}}))}))},Ae=function(e,t){void 0===t&&(t={}),J((function(e){return++e})),(0,p.Rf)("teams,roles",O.Ou,(0,a.pi)({team:e},t)).then((function(e){e.data&&(D(e.data),U(e.paging))})).catch((function(){D([]),U({total:0})})).finally((function(){return J((function(e){return--e}))}))},Se=function(e,n){return void 0===n&&(n=!1),(0,a.mG)(void 0,void 0,void 0,(function(){var r,l,s;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:X(!0),o.label=1;case 1:return o.trys.push([1,7,,8]),[4,(0,m.Xv)(e,["parents"],"all")];case 2:return(r=o.sent())?(ye((function(e){return n?[r]:(0,a.ev)([r],(0,a.CR)(e))})),(0,i.isEmpty)(r.parents)||!(null===(s=r.parents)||void 0===s?void 0:s[0].name)?[3,4]:[4,Se(r.parents[0].name,!1)]):[3,5];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:throw t("server.unexpected-response");case 6:return[3,8];case 7:return l=o.sent(),(0,Q.Eo)(l,t("server.unexpected-response")),[3,8];case 8:return[2]}}))}))},ke=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var n,r,l;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:X(!0),a.label=1;case 1:return a.trys.push([1,7,8,9]),[4,(0,m.Xv)(e,["users","owns","defaultRoles","policies","owner","parents","childrenCount"],"all")];case 2:return(n=a.sent())?(Ae(n.name),S(n),(0,i.isEmpty)(n.parents)||!(null===(l=n.parents)||void 0===l?void 0:l[0].name)?[3,4]:[4,Se(n.parents[0].name,!0)]):[3,5];case 3:a.sent(),a.label=4;case 4:return[3,6];case 5:throw t("server.unexpected-response");case 6:return[3,9];case 7:return r=a.sent(),(0,Q.Eo)(r,t("server.unexpected-response")),[3,9];case 8:return X(!1),[7];case 9:return[2]}}))}))},Pe=function(e,t){J((function(e){return++e})),(0,u.rg)(e,t,O.Ou,"(teams.id:"+(null==A?void 0:A.id)+")","","",Be.W.USER).then((function(e){var t=(0,Je.wB)(e.data.hits.hits);D(t),U({total:e.data.hits.total.value})})).catch((function(){D([])})).finally((function(){return J((function(e){return--e}))}))},De=function(){(0,u.rg)("owner.id:"+A.id,be.currPage,O.An,"","","",Ue.I).then((function(e){var t,n,a=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.hits)||void 0===n?void 0:n.hits;if((null==a?void 0:a.length)>0){var r=(0,Je.TG)(a),i=e.data.hits.total.value;he({data:r,total:i,currPage:be.currPage})}else he({data:r=[],total:i=0,currPage:be.currPage})})).catch((function(e){(0,Q.Eo)(e,t("server.entity-fetch-error",{entity:"Team Assets"}))}))};return(0,l.useEffect)((function(){(0,i.isEmpty)(A)||(0,i.isUndefined)(A)||De()}),[A]),(0,l.useEffect)((function(){De()}),[be.currPage]),(0,l.useEffect)((function(){(Ce.ViewAll||Ce.ViewBasic)&&C!==y&&(y&&ke(y),Ze(!0,y),N(y))}),[Ce,y]),(0,l.useEffect)((function(){var e;e=y,(0,a.mG)(void 0,void 0,void 0,(function(){var t,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:X(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,n(h.A.TEAM,e)];case 2:return t=a.sent(),Ne(t),[3,5];case 3:return r=a.sent(),(0,Q.Eo)(r),[3,5];case 4:return X(!1),[7];case 5:return[2]}}))}))}),[y]),$?l.createElement(v.Z,null):Ce.ViewAll||Ce.ViewBasic?l.createElement(l.Fragment,null,(0,i.isEmpty)(A)?l.createElement(f.Z,null,t("label.no-team-found")):l.createElement(Ie,{afterDeleteAction:function(){e.push((0,_.si)((0,_.KH)(Oe.Organization)))},assets:be,childTeams:T,currentTeam:A,currentTeamUserPage:j,currentTeamUsers:P,descriptionHandler:xe,handleAddTeam:Te,handleAddUser:function(e){ue(e)},handleCurrentUserPage:function(e){G(null!=e?e:O.j2)},handleJoinTeamClick:function(e,n){(0,p.f_)(e,n).then((function(e){if(!e)throw t("server.join-team-error");c.Z.updateUserDetails(e),ke(A.name),(0,Q.XA)(t("server.join-team-success"),2e3)})).catch((function(e){(0,Q.Eo)(e,t("server.join-team-error"))}))},handleLeaveTeamClick:function(e,n){return new Promise((function(a){(0,p.f_)(e,n).then((function(e){if(!e)throw t("server.leave-team-error");c.Z.updateUserDetails(e),ke(A.name),(0,Q.XA)(t("server.leave-team-success"),2e3),a()})).catch((function(e){(0,Q.Eo)(e,t("server.leave-team-error"))}))}))},handleTeamUsersSearchAction:function(e){re(e),G(O.j2),e?Pe(e,O.j2):Ae(A.name)},hasAccess:E||w,isDescriptionEditable:ee,isTeamMemberLoading:M,parentTeams:Ee,removeUserFromTeam:function(e){var n,i=null===(n=null==A?void 0:A.users)||void 0===n?void 0:n.filter((function(t){return t.id!==e})),l=(0,a.pi)((0,a.pi)({},A),{users:i}),s=(0,r.qu)(A,l);return new Promise((function(e){(0,m.hh)(A.id,s).then((function(e){if(!e)throw t("server.unexpected-response");ke(e.name)})).catch((function(e){(0,Q.Eo)(e,t("server.entity-updating-error",{entity:"Team"}))})).finally((function(){e()}))}))},showDeletedTeam:q,teamUserPagin:I,teamUserPaginHandler:function(e,t){var n;ae?(G(e),Pe(ae,e)):(G(t),Ae(A.name,((n={})[e]=I[e],n)))},teamUsersSearchText:ae,updateTeamHandler:function(e,n){void 0===n&&(n=!0);var i=(0,r.qu)(A,e);return new Promise((function(e,r){(0,m.hh)(A.id,i).then((function(r){if(!r)throw t("server.unexpected-response");n?ke(A.name):S((function(e){return(0,a.pi)((0,a.pi)({},e),r)})),e()})).catch((function(e){(0,Q.Eo)(e,t("server.entity-updating-error",{entity:"Team"})),r()}))}))},onAssetsPaginate:function(e){he((function(t){return(0,a.pi)((0,a.pi)({},t),{currPage:e})}))},onDescriptionUpdate:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var n,i,l,s;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:if(A.description===e)return[3,6];n=(0,a.pi)((0,a.pi)({},A),{description:e}),i=(0,r.qu)(A,n),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,(0,m.hh)(A.id,i)];case 2:if(!(l=o.sent()))throw t("server.unexpected-response");return ke(l.name),[3,5];case 3:return s=o.sent(),(0,Q.Eo)(s),[3,5];case 4:return xe(!1),[7];case 5:return[3,7];case 6:xe(!1),o.label=7;case 7:return[2]}}))}))},onShowDeletedTeamChange:function(e){F(e)},onTeamExpand:Ze}),de&&l.createElement($e,{header:"Adding new users to "+(0,z.C_)(A),isVisible:de,list:A.users||[],onCancel:function(){return ue(!1)},onSave:function(e){return function(e){if(!(0,i.isUndefined)(A)&&!(0,i.isUndefined)(A.users)){var n=(0,a.pi)((0,a.pi)({},A),{users:(0,a.ev)((0,a.ev)([],(0,a.CR)(A.users)),(0,a.CR)(e))}),l=(0,r.qu)(A,n);(0,m.hh)(A.id,l).then((function(e){if(!e)throw t("server.unexpected-response");ke(e.name)})).catch((function(e){(0,Q.Eo)(e,t("server.entity-updating-error",{entity:"Team"}))})).finally((function(){ue(!1)}))}}(e)}}),l.createElement(Ge,{isLoading:pe,visible:le,onCancel:function(){return se(!1)},onSave:function(e){return function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var n,r,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),fe(!0),n={name:e.name,displayName:e.displayName,description:e.description,teamType:e.teamType,parents:y?[A.id]:void 0},[4,(0,m.Cm)(n)];case 1:return a.sent()&&(r=y?A.fullyQualifiedName:void 0,Ze(!0,r),ke(A.name),Te(!1)),[3,4];case 2:return i=a.sent(),(0,Q.Eo)(i,t("message.entity-creation-error",{entity:"Team"})),[3,4];case 3:return fe(!1),[7];case 4:return[2]}}))}))}(e)}})):l.createElement(f.Z,null,oe._D)}},69868:function(e,t,n){var a=n(67814),r=n(56256),i=n(94199),l=n(71577),s=n(94184),o=n.n(s),c=n(96486),d=n(67294),u=n(97882),m=n(25577),p=n(93389),f=n(79839),v=n(52114),b=n(64632),h=n(22653),w=n(72819),E=n(48132),y=n(39570),g=n(38464),C=n(19790);t.Z=function(e){var t=e.item,n=e.isActionVisible,s=void 0!==n&&n,N=e.isIconVisible,x=void 0!==N&&N,T=e.isDataset,R=void 0!==T&&T,Z=e.isCheckBoxes,A=void 0!==Z&&Z,S=e.onTitleClick,k=e.onSelect,P=e.onRemove,D=(0,p.BL)().permissions,O=(0,d.useMemo)((function(){return(0,y.P_)(w.OX.EditAll,f.A.USER,D)}),[D]);return d.createElement("div",{className:o()("tw-card tw-flex tw-justify-between tw-py-2 tw-px-3 tw-group",{"tw-py-5 tw-items-center":R}),"data-testid":"user-card-container"},d.createElement("div",{className:"tw-flex "+(A?"tw-mr-2":"tw-gap-1 tw-items-center")},x&&!R?d.createElement(m.Z,{displayName:t.displayName||t.name,id:t.id||"",name:t.name||""}):d.createElement(d.Fragment,null,function(e){var t="";switch(e){case b.eg.TOPIC:t=g.PJ.TOPIC;break;case b.eg.DASHBOARD:t=g.PJ.DASHBOARD;break;case b.eg.PIPELINE:t=g.PJ.PIPELINE;break;case b.eg.TABLE:default:t=g.PJ.TABLE}return d.createElement(g.ZP,{alt:"icon",className:o()("tw-h-4 tw-w-4",{"tw-mt-0.5":e!==b.eg.DASHBOARD}),icon:t})}(t.type)),d.createElement("div",{className:o()("tw-flex tw-justify-center tw-flex-col",R?"asset-card-text tw-pl-1":"tw-pl-2"),"data-testid":"data-container"},R?d.createElement(d.Fragment,null,function(e,t){var n="";switch(e){case b.eg.TOPIC:n=(0,C.Ch)(h.W.TOPIC,t);break;case b.eg.PIPELINE:n=(0,C.Ch)(h.W.PIPELINE,t);break;case b.eg.DASHBOARD:n=(0,C.Ch)(h.W.DASHBOARD,t);break;case b.eg.MLMODEL:n=(0,C.Ch)(h.W.MLMODEL,t);break;case b.eg.TABLE:default:n=(0,C.Ch)(h.W.TABLE,t)}return d.createElement(u.Link,{className:"tw-no-underline","data-testid":"dataset-link",to:n},d.createElement("span",{className:"tw-font-medium tw-text-grey-body tw-break-all tw-text-left"},function(e,t){switch(e){case b.eg.TABLE:return(0,E.Td)(t,[b.ih.Database,b.ih.Schema,b.ih.Table]);case b.eg.DASHBOARD:case b.eg.PIPELINE:case b.eg.TOPIC:default:return(0,E.DS)(t,["service","database"])}}(e,t)))}(t.type,t.fqn)):d.createElement(d.Fragment,null,d.createElement("span",{className:o()("tw-font-normal",s?"tw-w-32":"tw-w-52",{"tw-cursor-pointer hover:tw-underline":Boolean(S)}),title:t.displayName,onClick:function(){null==S||S(t.fqn)}},d.createElement(r.Z.Text,{className:"ant-typography-ellipsis-custom",ellipsis:{tooltip:!0}},t.displayName)),t.name&&t.name!==t.displayName&&d.createElement("span",{className:o()(s?"tw-w-32":"tw-w-52"),title:x?t.name:(0,c.capitalize)(t.name)},d.createElement(r.Z.Text,{className:"ant-typography-ellipsis-custom",ellipsis:{tooltip:!0}},x?t.name:(0,c.capitalize)(t.name)))))),s&&(A?d.createElement("input",{className:"tw-p-1 custom-checkbox tw-self-center","data-testid":"checkboxAddUser",type:"checkbox",onChange:function(){null==k||k(t.id)}}):d.createElement("div",{className:"tw-flex-none"},d.createElement(i.Z,{title:O?"Remove":v.oH},d.createElement(l.Z,{className:o()("tw-h-8 tw-rounded tw-mb-3"),"data-testid":"remove",disabled:!O,type:"text",onClick:function(){return null==P?void 0:P(t.id)}},d.createElement(a.G,{className:"tw-cursor-pointer tw-opacity-0 group-hover:tw-opacity-100",icon:"remove"}))))))}},71859:function(e,t,n){n.d(t,{Ib:function(){return r},wz:function(){return i},B7:function(){return l}});var a=n(64632),r=[a.py.TABLE,a.py.DASHBOARD,a.py.TOPIC,a.py.PIPELINE,a.py.MLMODEL],i={required:"${fieldName} is required!",string:{range:"${fieldName} must be between ${min} and ${max} character."}},l=function(e,t){var n=Date.now()/1e3;return n>e&&n<t}}}]);