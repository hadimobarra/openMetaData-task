"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[1269],{11996:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),s=n.n(r)()(i());s.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.logs-heading {\n  background: #222222;\n}\n.logs-heading .ant-typography {\n  color: #fff;\n}\n.log-card .ant-card-body {\n  padding: 0;\n}\n.summary-key {\n  color: #00000080;\n}\n.lazy-log-container .react-lazylog-searchbar {\n  position: absolute;\n  z-index: 9;\n  top: -45px;\n  background: unset;\n  padding: unset;\n}\n.lazy-log-container .react-lazylog-searchbar .react-lazylog-searchbar-input {\n  height: 30px;\n  border-radius: 4px;\n  background: unset;\n  color: #000000;\n}\n.lazy-log-container .react-lazylog-searchbar-filter,\n.lazy-log-container .react-lazylog-searchbar-matches {\n  display: none;\n}\n',""]),t.Z=s},32822:function(e,t,n){n.d(t,{XZ:function(){return s},ne:function(){return l},E0:function(){return o},Pj:function(){return c},FD:function(){return u},aw:function(){return d},g6:function(){return p},cB:function(){return m},tr:function(){return v},x1:function(){return f},ut:function(){return w},fT:function(){return g},MX:function(){return y},z8:function(){return b}});var a=n(70655),i=n(22334),r=n(97451),s=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.post("/services/ingestionPipelines",e)];case 1:return[2,t.sent().data]}}))}))},l=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){var n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return n=(0,i.JP)("/services/ingestionPipelines/name/"+e,t),[4,r.Z.get(n)];case 1:return[2,a.sent().data]}}))}))},o=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){var n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return n=(0,i.JP)("/services/ingestionPipelines/name/"+e,t),[4,r.Z.get(n)];case 1:return[2,a.sent().data]}}))}))},c=function(e,t,n){return(0,a.mG)(void 0,void 0,void 0,(function(){var s,l;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return s=t?"service="+t:"",l=""+(0,i.JP)("/services/ingestionPipelines",e,s)+(n||""),[4,r.Z.get(l)];case 1:return[2,a.sent().data]}}))}))},u=function(e){return r.Z.post("/services/ingestionPipelines/trigger/"+e)},d=function(e){return r.Z.post("/services/ingestionPipelines/deploy/"+e)},p=function(e){return r.Z.post("/services/ingestionPipelines/toggleIngestion/"+e)},m=function(e){return r.Z.delete("/services/ingestionPipelines/"+e+"?hardDelete=true")},v=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.put("/services/ingestionPipelines",e)];case 1:return[2,t.sent().data]}}))}))},f=function(){return r.Z.get("/services/ingestionPipelines/status")},w=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,r.Z.get("/services/ingestionPipelines/ip")];case 1:return[2,e.sent().data]}}))}))},g=function(e,t){return r.Z.get("/services/ingestionPipelines/logs/"+e+"/last",{params:{after:t}})},y=function(e){return r.Z.post("/services/ingestionPipelines/kill/"+e)},b=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,r.Z.get("/services/ingestionPipelines/"+e+"/pipelineStatus",{params:t})];case 1:return[2,n.sent().data]}}))}))}},29695:function(e,t,n){n.d(t,{K:function(){return m}});var a=n(70655),i=n(19650),r=n(19586),s=n(55241),l=n(96486),o=n(67294),c=n(437),u=n(32822),d=n(87968),p={startTs:(0,d.lN)(1),endTs:(0,d.Mj)()},m=function(e){var t,n=e.ingestion,m=e.classNames,v=(0,c.$)().t,f=(0,a.CR)((0,o.useState)([]),2),w=f[0],g=f[1],y=(0,a.CR)((0,o.useState)(!0),2),b=y[0],h=y[1],E=(0,o.useCallback)((function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:h(!0),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,(0,u.z8)(n.fullyQualifiedName||"",p)];case 2:return e=a.sent(),t=null!==(i=e.data.splice(0,5).reverse())&&void 0!==i?i:[],g(0===t.length&&n.pipelineStatuses?[n.pipelineStatuses]:t),[3,4];case 3:return h(!1),[7];case 4:return[2]}}))}))}),[n.fullyQualifiedName]);return(0,o.useEffect)((function(){n.fullyQualifiedName&&E()}),[n.fullyQualifiedName]),o.createElement(i.Z,{className:m,size:2},b?o.createElement(r.Z.Input,{size:"small"}):(0,l.isEmpty)(w)?o.createElement("p",{"data-testid":"pipeline-status"},"--"):null!==(t=w.map((function(e,t){var n=t===w.length-1?o.createElement("p",{className:"tw-h-5 tw-w-16 tw-rounded-sm tw-bg-status-"+(null==e?void 0:e.pipelineState)+" tw-px-1 tw-text-white tw-text-center","data-testid":"pipeline-status",key:t},(0,l.capitalize)(null==e?void 0:e.pipelineState)):o.createElement("p",{className:"tw-w-4 tw-h-5 tw-rounded-sm tw-bg-status-"+(null==e?void 0:e.pipelineState)+" ","data-testid":"pipeline-status",key:t});return(null==e?void 0:e.endDate)||(null==e?void 0:e.startDate)||(null==e?void 0:e.timestamp)?o.createElement(s.Z,{key:t,title:o.createElement("div",{className:"tw-text-left"},e.timestamp&&o.createElement("p",null,v("label.execution-date")," :"," ",(0,d.fS)(e.timestamp)),e.startDate&&o.createElement("p",null,v("label.start-date"),":"," ",(0,d.fS)(e.startDate)),e.endDate&&o.createElement("p",null,v("label.end-date")," :"," ",(0,d.fS)(e.endDate)))},n):n})))&&void 0!==t?t:"--")}},10584:function(e,t,n){n.d(t,{z:function(){return o}});var a=n(70655),i=n(45697),r=n.n(i),s=n(67294),l={base:"button-comp tw-align-bottom tw-inline-flex tw-items-center tw-justify-center tw-cursor-pointer \n    tw-leading-5 tw-transition-colors tw-duration-150 tw-font-medium focus:tw-outline-none",block:"tw-block tw-w-full",size:{large:"tw-px-5 tw-py-3 tw-rounded-lg",regular:"tw-px-4 tw-py-2 tw-rounded-lg tw-text-sm",small:"tw-px-2 tw-py-0.5 tw-rounded-md tw-text-sm","x-small":"tw-px-2 tw-py-px tw-rounded-md tw-text-xs",custom:""},contained:{default:{base:"tw-text-gray-600 tw-bg-gray-300 tw-border tw-border-transparent",active:"active:tw-bg-gray-400 hover:tw-bg-gray-400 focus:tw-ring focus:tw-ring-gray-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-white tw-bg-primary tw-border tw-border-transparent",active:"active:tw-bg-primary-active hover:tw-bg-primary-hover focus:tw-bg-primary-active focus:tw-ring focus:tw-ring-purple-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"}},outlined:{default:{base:"tw-text-grey-muted tw-border-gray-300 tw-border dark:tw-text-gray-400 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-border-gray-600 focus:tw-border-gray-600 \n      hover:tw-text-gray-600 active:tw-text-gray-600 focus:tw-ring focus:tw-ring-gray-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-primary tw-border-primary tw-border dark:tw-text-blue-300 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-bg-primary hover:tw-text-white focus:tw-bg-primary \n      focus:tw-text-white active:tw-bg-primary active:tw-text-white focus:tw-ring focus:tw-ring-purple-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"}},link:{default:{base:"tw-text-grey dark:tw-text-gray-400 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-underline focus:tw-underline \n        hover:tw-text-gray-600 active:tw-text-gray-600",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-primary dark:tw-text-blue-300 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-underline focus:tw-underline \n        hover:tw-text-primary-hover active:tw-text-primary-active",disabled:"tw-opacity-50 tw-cursor-not-allowed"}},text:{default:{base:"tw-text-grey-muted dark:tw-text-gray-400 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-text-gray-600 active:tw-text-gray-600",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-primary dark:tw-text-blue-300 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-text-primary-hover active:tw-text-primary-active",disabled:"tw-opacity-50 tw-cursor-not-allowed"}}},o=s.forwardRef((function(e,t){var n=e.block,i=void 0!==n&&n,r=e.children,o=e.className,c=void 0===o?"":o,u=e.disabled,d=void 0!==u&&u,p=e.size,m=void 0===p?"regular":p,v=e.tag,f=void 0===v?"button":v,w=e.theme,g=void 0===w?"default":w,y=e.type,b=void 0===y?"button"===f?"button":void 0:y,h=e.variant,E=void 0===h?"contained":h,x=(0,a._T)(e,["block","children","className","disabled","size","tag","theme","type","variant"]),Z=l.base,N=l.block,k=l.size[m],S=l[E][g].base,z=l[E][g].active,T=l[E][g].disabled,C=[Z,k,S,d?T:z,i?N:"",c].join(" ");return s.createElement(f,(0,a.pi)({className:C,ref:t,disabled:d,type:b},x),r)}));o.propTypes={block:r().bool,children:r().node,className:r().string,disabled:r().bool,tag:r().string,size:r().oneOf(["large","regular","small","x-small","custom"]),theme:r().oneOf(["default","primary"]),type:r().oneOf(["button","submit","reset"]),variant:r().oneOf(["contained","outlined","link","text"])},o.displayName="Button"},33081:function(e,t,n){n.d(t,{m:function(){return u}});var a=n(70655),i=n(67294),r=n(74855),s=n.n(r),l=n(38464),o=n(95597),c=n(10584),u=function(e){var t=e.copyText,n=e.copyTimer,r=void 0===n?1500:n,u=e.position,d=void 0===u?"left":u,p=e.onCopy,m=(0,a.CR)((0,i.useState)(!1),2),v=m[0],f=m[1];return i.createElement(s(),{text:t,onCopy:function(){f(!0),null==p||p(),setTimeout((function(){f(!1)}),r)}},i.createElement(c.z,{className:"tw-h-8 tw-ml-4 tw-relative","data-testid":"copy-secret",size:"custom",theme:"default",variant:"text"},i.createElement(o.Z,{delay:0,html:i.createElement("span",{className:"tw-text-grey-body tw-text-xs tw-font-medium tw-italic","data-testid":"copy-success"},"Copied to the clipboard"),open:v,position:d,theme:"light",trigger:"click"},i.createElement(l.ZP,{alt:"Copy","data-testid":"copy-icon",icon:l.PJ.COPY,width:"16px"}))))};t.Z=u},21269:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var a=n(70655),i=n(19650),r=n(56256),s=n(91894),l=n(71230),o=n(15746),c=n(71577),u=n(96486),d=n(67294),p=n(437),m=n(68391),v=n(59293),f=n(32822),w=n(33081),g=n(84419),y=n(29695),b=n(53867),h=n(55726),E=n(96840),x=function(e,t,n){if((0,u.isUndefined)(n))return[];var i=(0,a.ev)([e],(0,a.CR)(t.split(".")));return i.map((function(t,n){return{name:0===n?(0,u.startCase)(t):t,url:n!==i.length-1?(0,E.c5)(t,e):""}}))},Z=n(50168),N=n(19586),k=function(){return d.createElement(l.Z,{gutter:[16,16]},d.createElement(o.Z,{span:18},d.createElement("div",{className:"flex justify-between m-md"},d.createElement(N.Z,{active:!0,paragraph:{rows:1}})),d.createElement(N.Z,{active:!0,className:"m-md",paragraph:{rows:12}})),d.createElement(o.Z,{span:6},d.createElement(N.Z,{active:!0,paragraph:{rows:6}})))},S=n(93379),z=n.n(S),T=n(7795),C=n.n(T),L=n(90569),P=n.n(L),I=n(3565),R=n.n(I),O=n(19216),_=n.n(O),A=n(44589),D=n.n(A),J=n(11996),G={};G.styleTagTransform=D(),G.setAttributes=R(),G.insert=P().bind(null,"head"),G.domAPI=C(),G.insertStyleElement=_(),z()(J.Z,G),J.Z&&J.Z.locals&&J.Z.locals;var H=function(){var e=(0,v.UO)(),t=e.logEntityType,n=e.ingestionName,E=(0,p.$)().t,N=(0,a.CR)((0,d.useState)(!1),2),S=N[0],z=N[1],T=(0,a.CR)((0,d.useState)(""),2),C=T[0],L=T[1],P=(0,a.CR)((0,d.useState)(),2),I=P[0],R=P[1],O=(0,a.CR)((0,d.useState)(),2),_=O[0],A=O[1],D=function(e,t){return(0,a.mG)(void 0,void 0,void 0,(function(){var n,i,r,s,l,o,c,d,p;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,f.fT)(e||(null==I?void 0:I.id)||"",(null==_?void 0:_.total)!==(null==_?void 0:_.after)?null==_?void 0:_.after:"")];case 1:switch((n=a.sent()).data.after&&n.data.total&&A({after:n.data.after,total:(0,u.toNumber)(n.data.total)}),t||(null==I?void 0:I.pipelineType)){case h.Hz.Metadata:L(C.concat((null===(r=n.data)||void 0===r?void 0:r.ingestion_task)||""));break;case h.Hz.Profiler:L(C.concat((null===(s=n.data)||void 0===s?void 0:s.profiler_task)||""));break;case h.Hz.Usage:L(C.concat((null===(l=n.data)||void 0===l?void 0:l.usage_task)||""));break;case h.Hz.Lineage:L(C.concat((null===(o=n.data)||void 0===o?void 0:o.lineage_task)||""));break;case h.Hz.Dbt:L(C.concat((null===(c=n.data)||void 0===c?void 0:c.dbt_task)||""));break;case h.Hz.TestSuite:L(C.concat((null===(d=n.data)||void 0===d?void 0:d.test_suite_task)||""));break;case h.Hz.DataInsight:L(C.concat((null===(p=n.data)||void 0===p?void 0:p.data_insight_task)||""));break;default:L("")}return[3,3];case 2:return i=a.sent(),(0,Z.Eo)(i),[3,3];case 3:return[2]}}))}))};(0,d.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),z(!0),[4,(0,f.E0)(n,["owner","pipelineStatuses"])];case 1:return(e=a.sent())&&(R(e),D(e.id,e.pipelineType)),[3,4];case 2:return t=a.sent(),(0,Z.Eo)(t),[3,4];case 3:return z(!1),[7];case 4:return[2]}}))}))}),[]);var J=function(e){var t=e.target,n=t.scrollTop,i=t.scrollHeight;t.clientHeight+n===i&&!(0,u.isNil)(_)&&!(0,u.isUndefined)(_.after)&&(0,u.toNumber)(null==_?void 0:_.after)<(0,u.toNumber)(null==_?void 0:_.total)&&(D(null==I?void 0:I.id,null==I?void 0:I.pipelineType),A((0,a.pi)((0,a.pi)({},_),{after:""}))),(0,u.toNumber)(null==_?void 0:_.after)+1===(0,u.toNumber)(null==_?void 0:_.total)&&A((0,a.pi)((0,a.pi)({},_),{after:void 0}))};(0,d.useLayoutEffect)((function(){var e=document.getElementsByClassName("ReactVirtualized__Grid")[0];return e&&e.addEventListener("scroll",J,{passive:!0}),function(){e&&e.removeEventListener("scroll",J)}})),(0,d.useLayoutEffect)((function(){var e=document.getElementsByClassName("react-lazylog-searchbar-input")[0];e&&(e.placeholder=E("label.search-logs")+"...")}));var G=(0,d.useMemo)((function(){var e;return(e={Type:(null==I?void 0:I.pipelineType)||"--",Schedule:(null==I?void 0:I.airflowConfig.scheduleInterval)||"--"})["Recent Runs"]=(null==I?void 0:I.fullyQualifiedName)?d.createElement(y.K,{ingestion:I}):"--",e}),[I]);return S?d.createElement(b.Z,null):d.createElement("div",{className:"m-xs "},d.createElement(i.Z,{align:"start",className:"w-full m-md m-t-xs",direction:"vertical"},d.createElement(i.Z,{align:"center"},d.createElement(g.Z,{titleLinks:x(t,n,I)})),d.createElement(i.Z,null,d.createElement(r.Z.Title,{level:5},null==I?void 0:I.name))),d.createElement(s.Z,{className:"h-full p-0 log-card"},(0,u.isEmpty)(C)?d.createElement(k,null):d.createElement(l.Z,null,d.createElement(o.Z,{className:"p-md",span:18},d.createElement(l.Z,{className:"relative",gutter:[16,16]},d.createElement(o.Z,{span:24},d.createElement(l.Z,{justify:"end"},d.createElement(o.Z,null,d.createElement(c.Z,{ghost:!0,"data-testid":"jump-to-end-button",type:"primary",onClick:function(){var e=document.getElementsByClassName("ReactVirtualized__Grid")[0];(0,u.isNil)(e)||(e.scrollTop=e.scrollHeight)}},E("label.jump-to-end"))),d.createElement(o.Z,null,d.createElement(w.m,{copyText:C})))),d.createElement(o.Z,{className:"h-min-80 lazy-log-container","data-testid":"lazy-log",span:24},d.createElement(m.LazyLog,{caseInsensitive:!0,enableSearch:!0,selectableLines:!0,extraLines:1,text:C})))),d.createElement(o.Z,{span:6},d.createElement(s.Z,{className:"h-full","data-testid":"summary-card"},d.createElement(i.Z,{className:"p-md w-full",direction:"vertical"},d.createElement(r.Z.Title,{level:5},E("label.summary")),d.createElement("div",null,d.createElement(r.Z.Text,{type:"secondary"},E("label.basic-configuration")),d.createElement(l.Z,{className:"m-t-xs",gutter:[8,8]},Object.entries(G).map((function(e){var t=(0,a.CR)(e,2),n=t[0],i=t[1];return d.createElement(d.Fragment,{key:n},d.createElement(o.Z,{className:"summary-key",span:12},n),d.createElement(o.Z,{className:"flex",span:12},i))}))))))))))}}}]);