/*! For license information please see 2065.e9d524d4d365c3bbb2aa.js.LICENSE.txt */
(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2065],{12028:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var a=n(87462),i=n(4942),r=n(7085),s=n(36228),o=n.n(s),l=n(23653),c=n(8384),u=n(67294),d=n(54433),m=n.n(d),p=n(21770),f=n(15105),v=u.forwardRef((function(e,t){var n,a=e.prefixCls,r=void 0===a?"rc-switch":a,s=e.className,o=e.checked,d=e.defaultChecked,v=e.disabled,h=e.loadingIcon,w=e.checkedChildren,E=e.unCheckedChildren,y=e.onClick,g=e.onChange,b=e.onKeyDown,C=(0,c.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),S=(0,p.Z)(!1,{value:o,defaultValue:d}),N=(0,l.Z)(S,2),Z=N[0],T=N[1];function x(e,t){var n=Z;return v||(T(n=e),null==g||g(n,t)),n}var k=m()(r,s,(n={},(0,i.Z)(n,"".concat(r,"-checked"),Z),(0,i.Z)(n,"".concat(r,"-disabled"),v),n));return u.createElement("button",Object.assign({},C,{type:"button",role:"switch","aria-checked":Z,disabled:v,className:k,ref:t,onKeyDown:function(e){e.which===f.Z.LEFT?x(!1,e):e.which===f.Z.RIGHT&&x(!0,e),null==b||b(e)},onClick:function(e){var t=x(!Z,e);null==y||y(t,e)}}),h,u.createElement("span",{className:"".concat(r,"-inner")},Z?w:E))}));v.displayName="Switch";var h=v,w=n(53124),E=n(98866),y=n(97647),g=n(21790),b=u.forwardRef((function(e,t){var n,s=e.prefixCls,l=e.size,c=e.disabled,d=e.loading,m=e.className,p=void 0===m?"":m,f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}(e,["prefixCls","size","disabled","loading","className"]),v=u.useContext(w.E_),b=v.getPrefixCls,C=v.direction,S=u.useContext(y.Z),N=u.useContext(E.Z),Z=(null!=c?c:N)||d,T=b("switch",s),x=u.createElement("div",{className:"".concat(T,"-handle")},d&&u.createElement(r.Z,{className:"".concat(T,"-loading-icon")})),k=o()((n={},(0,i.Z)(n,"".concat(T,"-small"),"small"===(l||S)),(0,i.Z)(n,"".concat(T,"-loading"),d),(0,i.Z)(n,"".concat(T,"-rtl"),"rtl"===C),n),p);return u.createElement(g.Z,{insertExtraNode:!0},u.createElement(h,(0,a.Z)({},f,{prefixCls:T,className:k,disabled:Z,ref:t,loadingIcon:x})))}));b.__ANT_SWITCH=!0;var C=b},49857:function(e,t,n){"use strict";var a=n(8081),i=n.n(a),r=n(23645),s=n.n(r)()(i());s.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.description-markdown-editor .ant-modal-header,\n.description-markdown-editor .ant-modal-body,\n.description-markdown-editor .ant-modal-footer {\n  padding: 20px 24px;\n}\n',""]),t.Z=s},54433:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},48442:function(e,t,n){"use strict";n.d(t,{w4:function(){return u},gL:function(){return m}});var a=n(70655),i=n(96486),r=n(22334),s=n(3399),o=n(97451),l=function(e){if(!(0,i.isNil)(e))return(0,i.isArray)(e)?e.join(","):e},c=function(e){var t=e.query,n=e.pageNumber,a=void 0===n?1:n,i=e.pageSize,r=void 0===i?10:i,c=e.queryFilter,u=e.sortField,d=e.sortOrder,m=e.searchIndex,p=e.includeDeleted,f=e.trackTotalHits,v=e.postFilter,h=e.fetchSource;return o.Z.get("/search/query",{params:{q:(0,s.J)(t||""),index:l(m),from:(a-1)*r,size:r,deleted:p,query_filter:JSON.stringify(c),post_filter:JSON.stringify(v),sort_field:u,sort_order:d,track_total_hits:f,fetch_source:h,include_source_fields:e.fetchSource?e.includeFields:void 0}})},u=function(e){return(0,a.mG)(void 0,void 0,Promise,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,c(e)];case 1:return[2,(n=t.sent().data,s={},s=n,s=(0,r.Cd)(s,i.isNil),s=(0,a.pi)((0,a.pi)({},s),{hits:(0,a.pi)((0,a.pi)({},s.hits),{hits:(0,i.isArray)(s.hits.hits)?s.hits.hits.map((function(e){return"_source"in e&&"entityType"in e._source?(0,a.pi)((0,a.pi)({},e),{_source:(0,a.pi)((0,a.pi)({},e._source),{type:e._source.entityType})}):e})):[]})}),s=(0,a.pi)((0,a.pi)({},s),{aggregations:s.aggregations&&Object.fromEntries(Object.entries(s.aggregations).map((function(e){var t=(0,a.CR)(e,2),n=t[0],i=t[1];return[n.replace("sterms#",""),i]})))}))]}var n,s}))}))},d=function(e){var t=e.query,n=e.searchIndex,a=e.field,i=e.fetchSource;return o.Z.get("/search/suggest",{params:{q:t,field:a,index:l(n),fetch_source:i,include_source_fields:e.fetchSource?e.includeFields:void 0}})},m=function(e){return(0,a.mG)(void 0,void 0,Promise,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,d(e)];case 1:return[2,(n=t.sent().data,s=n,s=(s=(0,r.Cd)(s.suggest["metadata-suggest"][0].options,i.isNil)).map((function(e){return"_source"in e&&"entityType"in e._source?(0,a.pi)((0,a.pi)({},e),{_source:(0,a.pi)((0,a.pi)({},e._source),{type:e._source.entityType})}):e})))]}var n,s}))}))}},19521:function(e,t,n){"use strict";var a=n(70655),i=n(38222),r=n(94184),s=n.n(r),o=n(96486),l=n(67294),c=n(73935),u=n(58369),d=n(31615),m=n(26051),p=n(82913);t.Z=function(e){var t=e.threadLink,n=e.className,r=e.onCancel,f=e.open,v=e.postFeedHandler,h=e.createThread,w=e.deletePostHandler,E=e.updateThreadHandler,y=e.threadType,g=i.Z.TabPane,b=(0,a.CR)((0,l.useState)(u.qL.TASKS),2),C=b[0],S=b[1];return(0,l.useEffect)((function(){(0,o.isEqual)(y,d.Th.Conversation)&&S(u.qL.CONVERSATIONS)}),[y]),(0,l.useEffect)((function(){document.body.style.overflow="hidden"}),[]),c.createPortal(l.createElement("div",{className:s()("tw-h-full",n)},l.createElement(m.Z,{className:"tw-z-9997 tw-fixed tw-inset-0 tw-top-16 tw-h-full tw-w-3/5 tw-bg-black tw-opacity-40",onCancel:function(){return r&&r()}}),l.createElement("div",{className:s()("tw-top-16 tw-right-0 tw-bottom-0 tw-w-2/5 tw-bg-white tw-fixed tw-shadow-md tw-transform tw-ease-in-out tw-duration-1000 tw-overflow-y-auto tw-z-9997",{"tw-translate-x-0":f,"tw-translate-x-full":!f}),id:"thread-panel"},l.createElement(i.Z,{activeKey:C,className:"ant-tabs-custom-line ant-tabs-custom-threadpanel",onChange:function(e){S(e)}},l.createElement(g,{key:u.qL.TASKS,tab:"Tasks"},l.createElement(p.Z,{createThread:h,deletePostHandler:w,postFeedHandler:v,threadLink:t,threadType:d.Th.Task,updateThreadHandler:E,onCancel:r})),l.createElement(g,{key:u.qL.CONVERSATIONS,tab:"Conversations"},l.createElement(p.Z,{createThread:h,deletePostHandler:w,postFeedHandler:v,threadLink:t,threadType:d.Th.Conversation,updateThreadHandler:E,onCancel:r}))))),document.body)}},47368:function(e,t,n){"use strict";n.d(t,{p:function(){return T}});var a=n(70655),i=n(50146),r=n(71577),s=n(56256),o=n(67294),l=n(437),c=n(50168),u=n(97809),d=n(53867),m=n(93379),p=n.n(m),f=n(7795),v=n.n(f),h=n(90569),w=n.n(h),E=n(3565),y=n.n(E),g=n(19216),b=n.n(g),C=n(44589),S=n.n(C),N=n(49857),Z={};Z.styleTagTransform=S(),Z.setAttributes=y(),Z.insert=w().bind(null,"head"),Z.domAPI=v(),Z.insertStyleElement=b(),p()(N.Z,Z),N.Z&&N.Z.locals&&N.Z.locals;var T=function(e){var t=e.header,n=e.placeholder,m=e.value,p=e.onSave,f=e.onCancel,v=e.visible,h=(0,l.$)().t,w=(0,a.CR)((0,o.useState)(!1),2),E=w[0],y=w[1],g=(0,o.useRef)();return o.createElement(i.Z,{centered:!0,destroyOnClose:!0,className:"description-markdown-editor",closable:!1,"data-testid":"markdown-editor",footer:[o.createElement(r.Z,{"data-testid":"cancel",disabled:E,key:"cancelButton",type:"link",onClick:f},h("label.cancel")),o.createElement(r.Z,{"data-testid":"save",key:"saveButton",type:"primary",onClick:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:if(!g.current)return[3,5];y(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,null==p?void 0:p(null!==(n=null===(t=g.current)||void 0===t?void 0:t.getEditorContent().trim())&&void 0!==n?n:"")];case 2:return a.sent(),[3,5];case 3:return e=a.sent(),(0,c.Eo)(e),[3,5];case 4:return y(!1),[7];case 5:return[2]}}))}))}},E?o.createElement(d.Z,{size:"small",type:"white"}):h("label.save"))],open:v,title:o.createElement(s.Z.Text,{"data-testid":"header"},t),width:"90%",onCancel:f},o.createElement(u.Z,{initialValue:m,placeHolder:n,ref:g}))}},8851:function(e,t,n){"use strict";var a=n(94184),i=n.n(a),r=n(96486),s=n(67294),o=n(48132);t.Z=function(e){var t=e.activeTab,n=e.setActiveTab,a=e.tabs,l=e.className,c=void 0===l?"":l,u=e.rightPosButton,d=function(e,t){return"tw-gh-tabs tw-px-0 tw-pt-2 tw-mr-8"+(t===e?" active":"")};return s.createElement("div",{className:i()("tw-bg-transparent",c)},s.createElement("nav",{className:"tw-flex tw-items-center tw-justify-between tw-gh-tabs-container","data-testid":"tabs",id:"tabs"},s.createElement("div",{className:"tw-flex tw-flex-grow"},a.map((function(e){return e.isHidden?null:s.createElement("button",{className:d(e.position,t),"data-testid":e.name,id:(0,r.camelCase)(e.name),key:e.position,onClick:function(){return null==n?void 0:n(e.position)}},e.name,(0,r.isNil)(e.count)?null:(0,o.yh)(e.count,"",e.position===t))}))),u))}},9632:function(e,t,n){"use strict";var a=n(70655),i=n(55241),r=n(94184),s=n.n(r),o=n(67800),l=n(96486),c=n(67294),u=n(59293),d=n(58369),m=n(31615),p=n(48132),f=n(22215),v=n(38464),h=n(44355),w=n(50168),E=n(47368),y=n(80131);t.Z=function(e){var t=e.className,n=e.hasEditAccess,r=e.onDescriptionEdit,g=e.description,b=void 0===g?"":g,C=e.isEdit,S=e.onCancel,N=e.onDescriptionUpdate,Z=e.isReadOnly,T=void 0!==Z&&Z,x=e.removeBlur,k=void 0!==x&&x,A=e.entityName,R=e.entityFieldThreads,_=e.onThreadLinkSelect,O=e.entityType,F=e.entityFqn,I=e.entityFieldTasks,P=(0,u.k6)(),D=null==R?void 0:R[0],L=null==I?void 0:I[0],H=function(){P.push((0,h.Ie)(O,F))},B=function(){P.push((0,h.Q3)(O,F))},q=function(){r&&r()},V=function(){var e=Boolean(b.trim());return h.GZ.includes(O)?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"request-entity-description",onClick:e?B:H},c.createElement(i.Z,{destroyTooltipOnHide:!0,content:e?"Request update description":"Request description",overlayClassName:"ant-popover-request-description",trigger:"hover",zIndex:9999},c.createElement(v.ZP,{alt:"request-description",icon:v.PJ.REQUEST,width:"16px"}))):null},j=function(e){var t=e.descriptionThread;return(0,l.isUndefined)(t)?c.createElement(c.Fragment,null,(null==b?void 0:b.trim())&&_?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"start-description-thread",onClick:function(){return null==_?void 0:_((0,f.ec)(O,F,d.Sn.DESCRIPTION))}},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT_PLUS,width:"16px"})):null):c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-thread",onClick:function(){return null==_?void 0:_(t.entityLink)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-thread-count"}," ",t.count)))};return c.createElement("div",{className:"schema-description tw-relative "+t},c.createElement("div",{className:"tw-flex description-inner-main-container tw-items-end"},c.createElement("div",{className:"tw-relative"},c.createElement("div",{className:"description tw-h-full tw-overflow-y-scroll tw-relative ","data-testid":"description",id:"center"},(null==b?void 0:b.trim())?c.createElement(y.Z,{enableSeeMoreVariant:!k,markdown:b}):c.createElement("span",{className:"tw-no-description p-y-xs"},(0,o.t)("label.no-description"))),c.createElement(E.p,{header:(0,o.t)("label.edit-description-for",{entityName:A}),placeholder:(0,o.t)("label.enter-description"),value:b,visible:Boolean(C),onCancel:S,onSave:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:if(!N||!(0,l.isFunction)(N))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,N(e)];case 2:return n.sent(),S&&S(),[3,4];case 3:return t=n.sent(),(0,w.Eo)(t),[3,4];case 4:return[2]}}))}))}})),c.createElement((function(){return T?null:c.createElement("div",{className:s()("tw-w-5 tw-min-w-max tw-flex")},n&&c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none focus:tw-outline-none","data-testid":"edit-description",onClick:q},c.createElement(v.ZP,{alt:"edit",icon:"icon-edit",title:"Edit",width:"16px"})),(0,p.nq)(O)?c.createElement(c.Fragment,null," ",c.createElement(V,null),(0,l.isUndefined)(L)?null:c.createElement("button",{className:"tw-w-7 tw-h-7 tw-mr-2 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-task",onClick:function(){return null==_?void 0:_(L.entityLink,m.Th.Task)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"tasks",icon:v.PJ.TASK_ICON,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-tasks-count"}," ",L.count)))):null,c.createElement(j,{descriptionThread:D}))}),null)))}},41693:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a,i=n(70655),r=n(51436),s=n(67814),o=n(67294);!function(e){e.BEFORE="before",e.AFTER="after"}(a||(a={}));var l=n(10584),c=function(e,t){return Math.ceil(t/e)},u=function(e){var t=e.paging,n=e.pagingHandler,u=e.totalCount,d=e.pageSize,m=e.isNumberBased,p=void 0!==m&&m,f=e.currentPage,v=(0,i.CR)((0,o.useState)(1),2),h=v[0],w=v[1];return(0,o.useEffect)((function(){w(f)}),[f]),o.createElement("div",{className:"tw-my-4 tw-flex tw-justify-center tw-items-center tw-gap-2","data-testid":"pagination"},o.createElement(l.z,{className:"tw-rounded tw-w-24  tw-px-3 tw-py-1.5 tw-text-sm","data-testid":"previous",disabled:p?1===h:!t.before,size:"custom",theme:"primary",variant:"outlined",onClick:function(){w(h-1),p?n(h-1):n(a.BEFORE,h-1)}},o.createElement(s.G,{className:"tw-text-sm tw-align-middle tw-pr-1.5",icon:r.acZ})," ",o.createElement("span",null,"Previous")),o.createElement("span",{className:"tw-px-2","data-testid":"page-indicator"},h+"/"+c(d,u)+" Page"),o.createElement(l.z,{className:"tw-rounded tw-w-24 tw-px-3 tw-py-1.5 tw-text-sm","data-testid":"next",disabled:function(){if(p){var e=c(d,u);return h===e}return!t.after}(),size:"custom",theme:"primary",variant:"outlined",onClick:function(){w(h+1),p?n(h+1):n(a.AFTER,h+1)}},o.createElement("span",null," Next")," ",o.createElement(s.G,{className:"tw-text-sm tw-align-middle tw-pl-1.5",icon:r.eFW})))}},30453:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return te}});var a=n(70655),i=n(25213),r=n(71230),s=n(15746),o=n(19650),l=n(60236),c=n(96486),u=n(67674),d=n(67294),m=n(437),p=n(97882),f=n(59293),v=n(52046),h=n(41912),w=n(13950),E=n(48442),y=n(22001),g=n(19521),b=n(9632),C=n(41603),S=n(4142),N=n(28178),Z=n(41693),T=n(80131),x=n(8851),k=n(84419),A=n(74380),R=n(53867),_=n(93389),O=n(79839),F=n(73213),I=n(62761),P=n(58369),D=n(96162),L=n(20615),H=n(64632),B=n(22653),q=n(89204),V=n(55546),j=n(51887),z=n(6929),J=n(48132),G=[{name:"Tables",path:"tables"},{name:"Activity Feeds",path:"activity_feed",field:H.GB.ACTIVITY_FEED}],M=function(e){return"activity_feed"===e?2:1},K=n(22215),U=n(31982),Q=n(39570),W=n(96840),Y=n(35892),$=n(81274),X=n(19790),ee=n(50168),te=(0,u.Pi)((function(){var e,t,n,u,te,ne,ae,ie,re,se,oe=(0,a.CR)((0,d.useState)([]),2),le=oe[0],ce=oe[1],ue=(0,m.$)().t,de=(0,_.BL)().getEntityPermissionByFqn,me=(0,f.UO)(),pe=me.databaseSchemaFQN,fe=me.tab,ve=(0,a.CR)((0,d.useState)(!0),2),he=ve[0],we=ve[1],Ee=(0,a.CR)((0,d.useState)(),2),ye=Ee[0],ge=Ee[1],be=(0,a.CR)((0,d.useState)([]),2),Ce=be[0],Se=be[1],Ne=(0,a.CR)((0,d.useState)(pe.split(F.o).slice(-1).pop()||""),2),Ze=Ne[0],Te=Ne[1],xe=(0,a.CR)((0,d.useState)(!1),2),ke=xe[0],Ae=xe[1],Re=(0,a.CR)((0,d.useState)(""),2),_e=Re[0],Oe=Re[1],Fe=(0,a.CR)((0,d.useState)(""),2),Ie=Fe[0],Pe=Fe[1],De=(0,a.CR)((0,d.useState)(0),2),Le=De[0],He=De[1],Be=(0,a.CR)((0,d.useState)(M(fe)),2),qe=Be[0],Ve=Be[1],je=(0,a.CR)((0,d.useState)(""),2),ze=je[0],Je=je[1],Ge=(0,a.CR)((0,d.useState)([]),2),Me=Ge[0],Ke=Ge[1],Ue=(0,a.CR)((0,d.useState)(!1),2),Qe=Ue[0],We=Ue[1],Ye=(0,a.CR)((0,d.useState)(0),2),$e=Ye[0],Xe=Ye[1],et=(0,a.CR)((0,d.useState)([]),2),tt=et[0],nt=et[1],at=(0,a.CR)((0,d.useState)(""),2),it=at[0],rt=at[1],st=(0,a.CR)((0,d.useState)({}),2),ot=st[0],lt=st[1],ct=(0,a.CR)((0,d.useState)(I.j2),2),ut=ct[0],dt=ct[1],mt=(0,a.CR)((0,j.M)(L.a),2),pt=mt[0],ft=mt[1],vt=(0,f.k6)(),ht=(0,d.useRef)(!0),wt=(0,a.CR)((0,d.useState)(Q.Bd),2),Et=wt[0],yt=wt[1],gt=[{name:"Tables",icon:{alt:"tables",name:"table-grey",title:"Tables",selectedName:"table"},count:Le,isProtected:!1,position:1},{name:"Activity Feeds",icon:{alt:"activity_feed",name:"activity_feed",title:"Activity Feed",selectedName:"activity-feed-color"},isProtected:!1,position:2,count:$e}],bt=[{key:"Owner",value:"team"===(null===(e=null==ye?void 0:ye.owner)||void 0===e?void 0:e.type)?(0,I.bV)((null===(t=null==ye?void 0:ye.owner)||void 0===t?void 0:t.displayName)||(null===(n=null==ye?void 0:ye.owner)||void 0===n?void 0:n.name)||""):(null===(u=null==ye?void 0:ye.owner)||void 0===u?void 0:u.displayName)||(null===(te=null==ye?void 0:ye.owner)||void 0===te?void 0:te.name)||"",placeholderText:(null===(ne=null==ye?void 0:ye.owner)||void 0===ne?void 0:ne.displayName)||(null===(ae=null==ye?void 0:ye.owner)||void 0===ae?void 0:ae.name)||"",isLink:"team"===(null===(ie=null==ye?void 0:ye.owner)||void 0===ie?void 0:ie.type),openInNewTab:!1,profileName:(null===(re=null==ye?void 0:ye.owner)||void 0===re?void 0:re.type)===V.jc.USER?null===(se=null==ye?void 0:ye.owner)||void 0===se?void 0:se.name:void 0}],Ct=function(){(0,w.Kg)((0,K.ec)(H.py.DATABASE_SCHEMA,pe)).then((function(e){if(!e)throw z.Z["api-error-messages"]["unexpected-server-response"];Xe(e.totalCount),nt(e.counts)})).catch((function(e){(0,ee.Eo)(e,z.Z["api-error-messages"]["fetch-entity-feed-count-error"])}))},St=function(e){(0,c.isUndefined)(ye)||function(e,t){(0,a.mG)(void 0,void 0,void 0,(function(){var n,i;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),dt(e),[4,(0,E.w4)({query:(r=t.service,s=t.database,o=t,"(service.name:"+r.name+") AND (database.name:"+s.name+") AND (databaseSchema.name:"+o.name+")"),pageNumber:e,pageSize:I.IV,searchIndex:B.W.TABLE,includeDeleted:!1})];case 1:return n=a.sent(),Se(function(e){return e.hits.hits.map((function(e){return e._source}))}(n)),He(n.hits.total.value),[3,3];case 2:return i=a.sent(),(0,ee.Eo)(i),[3,3];case 3:return[2]}var r,s,o}))}))}((0,c.toNumber)(e),ye)},Nt=function(e){return(0,a.mG)(void 0,void 0,Promise,(function(){var t;return(0,a.Jh)(this,(function(n){return t=[],ye&&(t=(0,l.qu)(ye,e)),[2,(0,h.qf)(Ie,t)]}))}))},Zt=function(e){var t=e-1;G[t].path!==fe&&(Ve(e),vt.push({pathname:(0,I.vh)(pe,G[t].path)}))},Tt=function(e){var t=(0,a.pi)((0,a.pi)({},ye),{owner:(0,a.pi)((0,a.pi)({},null==ye?void 0:ye.owner),e)});return new Promise((function(e,n){Nt(t).then((function(e){if(!e)throw n(),z.Z["api-error-messages"]["unexpected-server-response"];ge(e),n()})).catch((function(e){(0,ee.Eo)(e,z.Z["api-error-messages"]["update-databaseSchema-error"]),n()}))}))},xt=function(){var e=(0,a.pi)((0,a.pi)({},ye),{owner:void 0});return new Promise((function(t,n){Nt(e).then((function(e){if(!e)throw n(),z.Z["api-error-messages"]["unexpected-server-response"];ge(e),t()})).catch((function(e){(0,ee.Eo)(e,z.Z["api-error-messages"]["update-databaseSchema-error"]),n()}))}))},kt=function(e){We(!0),(0,w.XG)((0,K.ec)(H.py.DATABASE_SCHEMA,pe),e).then((function(e){var t=e.data,n=e.paging;if(!t)throw z.Z["api-error-messages"]["unexpected-server-response"];lt(n),Ke((function(e){return(0,a.ev)((0,a.ev)([],(0,a.CR)(e)),(0,a.CR)(t))}))})).catch((function(e){(0,ee.Eo)(e,z.Z["api-error-messages"]["fetch-entity-feed-error"])})).finally((function(){return We(!1)}))},At=function(e,t){var n,i,r,s={message:e,from:null!==(i=null===(n=v.Z.userDetails)||void 0===n?void 0:n.name)&&void 0!==i?i:null===(r=v.Z.users[0])||void 0===r?void 0:r.name};(0,w.Z1)(t,s).then((function(e){if(!e)throw z.Z["api-error-messages"]["unexpected-server-response"];var t=e.id,n=e.posts;Ke((function(i){return i.map((function(i){return i.id===t?(0,a.pi)((0,a.pi)({},e),{posts:null==n?void 0:n.slice(-3)}):i}))})),Ct()})).catch((function(e){(0,ee.Eo)(e,z.Z["api-error-messages"]["add-feed-error"])}))},Rt=function(e,t,n){(0,U.fR)(e,t,n,Ke)},_t=function(e,t,n,a){(0,U.jw)(e,t,n,a,Ke)},Ot=(0,d.useMemo)((function(){return[{title:ue("label.table-name"),dataIndex:"name",key:"name",render:function(e,t){return d.createElement(p.Link,{to:(0,X.Ch)(H.py.TABLE,t.fullyQualifiedName)},e)}},{title:ue("label.description"),dataIndex:"description",key:"description",render:function(e){return(null==e?void 0:e.trim())?d.createElement(T.Z,{markdown:e}):d.createElement("span",{className:"text-grey-muted"},"No description")}}]}),[]);return(0,d.useEffect)((function(){H.GB.ACTIVITY_FEED===fe?kt():Ke([])}),[fe]),(0,d.useEffect)((function(){var e,t;e=ot,t=Qe,ft&&(null==e?void 0:e.after)&&!t&&kt(e.after)}),[ft,ot,Qe]),(0,d.useEffect)((function(){if(Et.ViewAll||Et.ViewBasic){var e=M(fe);gt[e-1].isProtected&&Zt(1),(0,h.Tf)(pe,["owner","usageSummary"]).then((function(e){var t,n,a;if(!e)throw z.Z["api-error-messages"]["unexpected-server-response"];var i=e.description,r=void 0===i?"":i,s=e.id,o=void 0===s?"":s,l=e.name,u=e.service,d=e.serviceType,m=e.database;ge(e),Oe(r),Pe(o),Te(l),ce([{name:(0,c.startCase)(q.u.DATABASE_SERVICES),url:(0,W.si)(D.CZ.SERVICES,(0,Y.tJ)(q.u.DATABASE_SERVICES))},{name:null!==(t=u.name)&&void 0!==t?t:"",url:u.name?(0,I.LE)(u.name,q.u.DATABASE_SERVICES):"",imgSrc:d?(0,Y.zF)(d):void 0},{name:(0,J.Td)(null!==(n=m.fullyQualifiedName)&&void 0!==n?n:"",[H.ih.Database]),url:(0,I.aY)(null!==(a=m.fullyQualifiedName)&&void 0!==a?a:"")},{name:(0,J.C_)(e),url:"",activeTitle:!0}])})).catch((function(e){var t=(0,$.HR)(e,z.Z["api-error-messages"]["fetch-databaseSchema-details-error"]);Je(t),(0,ee.Eo)(t)})).finally((function(){we(!1)})),Ct()}}),[Et,pe]),(0,d.useEffect)((function(){St(I.j2)}),[ye]),(0,d.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:we(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,de(O.A.DATABASE_SCHEMA,pe)];case 2:return e=n.sent(),yt(e),[3,5];case 3:return t=n.sent(),(0,ee.Eo)(t),[3,5];case 4:return we(!1),[7];case 5:return[2]}}))}))}),[pe]),(0,d.useEffect)((function(){ht.current=!1,v.Z.inPageSearchText=""}),[]),d.createElement(d.Fragment,null,he?d.createElement(R.Z,null):ze?d.createElement(N.Z,null,d.createElement("p",{"data-testid":"error-message"},ze)):d.createElement(d.Fragment,null,Et.ViewAll||Et.ViewBasic?d.createElement(A.Z,null,d.createElement(r.Z,{className:"p-x-md p-t-lg","data-testid":"page-container",gutter:[0,12]},d.createElement(s.Z,{span:24},d.createElement(o.Z,{align:"center",className:"justify-between w-full"},d.createElement(k.Z,{titleLinks:le}),d.createElement(C.Z,{isRecursiveDelete:!0,allowSoftDelete:!1,canDelete:Et.Delete,entityFQN:pe,entityId:Ie,entityName:Ze,entityType:H.py.DATABASE_SCHEMA}))),d.createElement(s.Z,{span:24},bt.map((function(e,t){return d.createElement(o.Z,{key:t},d.createElement(S.Z,{currentOwner:null==ye?void 0:ye.owner,data:e,removeOwner:Et.EditOwner||Et.EditAll?xt:void 0,updateOwner:Et.EditOwner||Et.EditAll?Tt:void 0}))}))),d.createElement(s.Z,{"data-testid":"description-container",span:24},d.createElement(b.Z,{description:_e,entityFieldThreads:(0,U.S$)(P.Sn.DESCRIPTION,tt),entityFqn:pe,entityName:Ze,entityType:H.py.DATABASE_SCHEMA,hasEditAccess:Et.EditDescription||Et.EditAll,isEdit:ke,onCancel:function(){Ae(!1)},onDescriptionEdit:function(){Ae(!0)},onDescriptionUpdate:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:if(_e===e||!ye)return[3,6];t=(0,a.pi)((0,a.pi)({},ye),{description:e}),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,Nt(t)];case 2:if(!i.sent())throw z.Z["api-error-messages"]["unexpected-server-response"];return ge(t),Oe(e),Ct(),[3,5];case 3:return n=i.sent(),(0,ee.Eo)(n),[3,5];case 4:return Ae(!1),[7];case 5:return[3,7];case 6:Ae(!1),i.label=7;case 7:return[2]}}))}))},onThreadLinkSelect:function(e){rt(e)}})),d.createElement(s.Z,{span:24},d.createElement(r.Z,{className:"m-t-xss"},d.createElement(s.Z,{span:24},d.createElement(x.Z,{activeTab:qe,className:"flex-initial",setActiveTab:Zt,tabs:gt})),d.createElement(s.Z,{className:"p-y-md",span:24},1===qe&&d.createElement(d.Fragment,null,d.createElement(d.Fragment,null,d.createElement(i.Z,{bordered:!0,className:"table-shadow",columns:Ot,"data-testid":"databaseSchema-tables",dataSource:Ce,pagination:!1,rowKey:"id",size:"small"}),Le>I.IV&&Ce.length>0&&d.createElement(Z.Z,{isNumberBased:!0,currentPage:ut,pageSize:I.IV,paging:ot,pagingHandler:St,totalCount:Le}))),2===qe&&d.createElement(r.Z,{className:"p-t-xss entity-feed-list bg-white border-1 rounded-4 shadow-base h-full",id:"activityfeed"},d.createElement(s.Z,{offset:4,span:16},d.createElement(y.Z,{hideFeedFilter:!0,hideThreadFilter:!0,isEntityFeed:!0,withSidePanel:!0,className:"",deletePostHandler:Rt,entityName:Ze,feedList:Me,postFeedHandler:At,updateThreadHandler:_t}))),d.createElement(s.Z,{"data-testid":"observer-element",id:"observer-element",ref:pt,span:24},Qe?d.createElement(R.Z,null):null)))),d.createElement(s.Z,{span:24},it?d.createElement(g.Z,{createThread:function(e){(0,w.Kl)(e).then((function(e){e?(Ke((function(t){return(0,a.ev)((0,a.ev)([],(0,a.CR)(t)),[e])})),Ct()):(0,ee.Eo)(z.Z["api-error-messages"]["unexpected-server-response"])})).catch((function(e){(0,ee.Eo)(e,z.Z["api-error-messages"]["create-conversation-error"])}))},deletePostHandler:Rt,open:Boolean(it),postFeedHandler:At,threadLink:it,updateThreadHandler:_t,onCancel:function(){rt("")}}):null))):d.createElement(N.Z,null,ue("message.no-permission-to-view"))))}))}}]);