"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[3571],{49857:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),l=n.n(r)()(a());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.description-markdown-editor .ant-modal-header,\n.description-markdown-editor .ant-modal-body,\n.description-markdown-editor .ant-modal-footer {\n  padding: 20px 24px;\n}\n',""]),t.Z=l},27058:function(e,t,n){var i=n(8081),a=n.n(i),r=n(23645),l=n.n(r)()(a());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.policies-detail .list-table .ant-table-row .ant-table-cell:first-child,\n.policies-detail .list-table .ant-table-thead .ant-table-cell:first-child {\n  padding-left: 16px;\n}\n.policies-detail .ant-collapse {\n  background-color: #ffffff;\n  border: 1px solid #dde3ea;\n  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.12);\n  border-radius: 4px;\n}\n.policies-detail .ant-collapse .ant-collapse-item .ant-collapse-header {\n  padding: 16px;\n  align-items: flex-start;\n}\n.policies-detail .ant-collapse .ant-collapse-item .ant-collapse-header .ant-collapse-arrow {\n  color: #37352f;\n  font-size: 14px;\n}\n.policies-detail .ant-collapse .ant-collapse-content {\n  border-top: none;\n}\n.policies-detail .ant-collapse .ant-collapse-content .ant-collapse-content-box {\n  padding-top: 0px;\n}\n.policies-detail .ant-space.tabpane-space > .ant-space-item:first-child {\n  align-self: flex-end;\n}\n',""]),t.Z=l},63153:function(e,t,n){n.d(t,{F3:function(){return l},Ko:function(){return s},n5:function(){return o},u7:function(){return c},_d:function(){return u},u$:function(){return d},sZ:function(){return m},$j:function(){return p},cN:function(){return f},QW:function(){return v},dV:function(){return h}});var i=n(70655),a=n(97451),r={headers:{"Content-type":"application/json-patch+json"}},l=function(e,t,n,r,l){return void 0===r&&(r=!1),void 0===l&&(l=10),(0,i.mG)(void 0,void 0,void 0,(function(){var s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return s={default:r,limit:l,fields:e,after:t,before:n},[4,a.Z.get("/roles",{params:s})];case 1:return[2,i.sent().data]}}))}))},s=function(e,t,n,r){return void 0===r&&(r=10),(0,i.mG)(void 0,void 0,void 0,(function(){var l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return l={limit:r,fields:e,after:t,before:n},[4,a.Z.get("/policies",{params:l})];case 1:return[2,i.sent().data]}}))}))},o=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.get("/roles/name/"+e,{params:{fields:t}})];case 1:return[2,n.sent().data]}}))}))},c=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.get("/policies/name/"+e,{params:{fields:t}})];case 1:return[2,n.sent().data]}}))}))},u=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,a.Z.post("/roles",e)];case 1:return[2,t.sent().data]}}))}))},d=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,a.Z.post("/policies",e)];case 1:return[2,t.sent().data]}}))}))},m=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.patch("/roles/"+t,e,r)];case 1:return[2,n.sent().data]}}))}))},p=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.patch("/policies/"+t,e,r)];case 1:return[2,n.sent().data]}}))}))},f=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,a.Z.get("/policies/resources")];case 1:return[2,e.sent().data]}}))}))},v=function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,a.Z.get("/policies/functions")];case 1:return[2,e.sent().data]}}))}))},h=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,a.Z.get("/policies/validation/condition/"+e)];case 1:return[2,t.sent()]}}))}))}},66703:function(e,t,n){n.d(t,{LK:function(){return s},RG:function(){return o},Xv:function(){return c},Cm:function(){return u},hh:function(){return d},fs:function(){return m},kt:function(){return p}});var i=n(70655),a=n(96486),r=n(22334),l=n(97451),s=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,s;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return n=(0,i.pi)({fields:(0,a.isString)(e)?e:null==e?void 0:e.join(","),limit:1e5},t),s=(0,r.JP)("/teams"),[4,l.Z.get(s,{params:n})];case 1:return[2,o.sent().data]}}))}))},o=function(e){return void 0===e&&(e=!1),(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.get("/teams/hierarchy",{params:{isJoinable:e}})];case 1:return[2,t.sent().data]}}))}))},c=function(e,t,n){return(0,i.mG)(void 0,void 0,void 0,(function(){var a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return a=(0,r.JP)("/teams/name/"+e,t),[4,l.Z.get(a,{params:{include:n}})];case 1:return[2,i.sent().data]}}))}))},u=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.post("/teams",e)];case 1:return[2,t.sent().data]}}))}))},d=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n={headers:{"Content-type":"application/json-patch+json"}},[4,l.Z.patch("/teams/"+e,t,n)];case 1:return[2,i.sent().data]}}))}))},m=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.put("/teams",e)];case 1:return[2,t.sent().data]}}))}))},p=function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,l.Z.put("/teams/restore",{id:e})];case 1:return[2,t.sent().data]}}))}))}},47368:function(e,t,n){n.d(t,{p:function(){return k}});var i=n(70655),a=n(50146),r=n(71577),l=n(56256),s=n(67294),o=n(437),c=n(50168),u=n(97809),d=n(53867),m=n(93379),p=n.n(m),f=n(7795),v=n.n(f),h=n(90569),E=n.n(h),b=n(3565),w=n.n(b),y=n(19216),Z=n.n(y),x=n(44589),g=n.n(x),N=n(49857),C={};C.styleTagTransform=g(),C.setAttributes=w(),C.insert=E().bind(null,"head"),C.domAPI=v(),C.insertStyleElement=Z(),p()(N.Z,C),N.Z&&N.Z.locals&&N.Z.locals;var k=function(e){var t=e.header,n=e.placeholder,m=e.value,p=e.onSave,f=e.onCancel,v=e.visible,h=(0,o.$)().t,E=(0,i.CR)((0,s.useState)(!1),2),b=E[0],w=E[1],y=(0,s.useRef)();return s.createElement(a.Z,{centered:!0,destroyOnClose:!0,className:"description-markdown-editor",closable:!1,"data-testid":"markdown-editor",footer:[s.createElement(r.Z,{"data-testid":"cancel",disabled:b,key:"cancelButton",type:"link",onClick:f},h("label.cancel")),s.createElement(r.Z,{"data-testid":"save",key:"saveButton",type:"primary",onClick:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!y.current)return[3,5];w(!0),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,null==p?void 0:p(null!==(n=null===(t=y.current)||void 0===t?void 0:t.getEditorContent().trim())&&void 0!==n?n:"")];case 2:return i.sent(),[3,5];case 3:return e=i.sent(),(0,c.Eo)(e),[3,5];case 4:return w(!1),[7];case 5:return[2]}}))}))}},b?s.createElement(d.Z,{size:"small",type:"white"}):h("label.save"))],open:v,title:s.createElement(l.Z.Text,{"data-testid":"header"},t),width:"90%",onCancel:f},s.createElement(u.Z,{initialValue:m,placeHolder:n,ref:y}))}},9632:function(e,t,n){var i=n(70655),a=n(55241),r=n(94184),l=n.n(r),s=n(67800),o=n(96486),c=n(67294),u=n(59293),d=n(58369),m=n(31615),p=n(48132),f=n(22215),v=n(38464),h=n(44355),E=n(50168),b=n(47368),w=n(80131);t.Z=function(e){var t=e.className,n=e.hasEditAccess,r=e.onDescriptionEdit,y=e.description,Z=void 0===y?"":y,x=e.isEdit,g=e.onCancel,N=e.onDescriptionUpdate,C=e.isReadOnly,k=void 0!==C&&C,T=e.removeBlur,S=void 0!==T&&T,J=e.entityName,A=e.entityFieldThreads,I=e.onThreadLinkSelect,G=e.entityType,L=e.entityFqn,P=e.entityFieldTasks,O=(0,u.k6)(),R=null==A?void 0:A[0],q=null==P?void 0:P[0],D=function(){O.push((0,h.Ie)(G,L))},U=function(){O.push((0,h.Q3)(G,L))},_=function(){r&&r()},j=function(){var e=Boolean(Z.trim());return h.GZ.includes(G)?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"request-entity-description",onClick:e?U:D},c.createElement(a.Z,{destroyTooltipOnHide:!0,content:e?"Request update description":"Request description",overlayClassName:"ant-popover-request-description",trigger:"hover",zIndex:9999},c.createElement(v.ZP,{alt:"request-description",icon:v.PJ.REQUEST,width:"16px"}))):null},B=function(e){var t=e.descriptionThread;return(0,o.isUndefined)(t)?c.createElement(c.Fragment,null,(null==Z?void 0:Z.trim())&&I?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"start-description-thread",onClick:function(){return null==I?void 0:I((0,f.ec)(G,L,d.Sn.DESCRIPTION))}},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT_PLUS,width:"16px"})):null):c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-thread",onClick:function(){return null==I?void 0:I(t.entityLink)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-thread-count"}," ",t.count)))};return c.createElement("div",{className:"schema-description tw-relative "+t},c.createElement("div",{className:"tw-flex description-inner-main-container tw-items-end"},c.createElement("div",{className:"tw-relative"},c.createElement("div",{className:"description tw-h-full tw-overflow-y-scroll tw-relative ","data-testid":"description",id:"center"},(null==Z?void 0:Z.trim())?c.createElement(w.Z,{enableSeeMoreVariant:!S,markdown:Z}):c.createElement("span",{className:"tw-no-description p-y-xs"},(0,s.t)("label.no-description"))),c.createElement(b.p,{header:(0,s.t)("label.edit-description-for",{entityName:J}),placeholder:(0,s.t)("label.enter-description"),value:Z,visible:Boolean(x),onCancel:g,onSave:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(!N||!(0,o.isFunction)(N))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,N(e)];case 2:return n.sent(),g&&g(),[3,4];case 3:return t=n.sent(),(0,E.Eo)(t),[3,4];case 4:return[2]}}))}))}})),c.createElement((function(){return k?null:c.createElement("div",{className:l()("tw-w-5 tw-min-w-max tw-flex")},n&&c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none focus:tw-outline-none","data-testid":"edit-description",onClick:_},c.createElement(v.ZP,{alt:"edit",icon:"icon-edit",title:"Edit",width:"16px"})),(0,p.nq)(G)?c.createElement(c.Fragment,null," ",c.createElement(j,null),(0,o.isUndefined)(q)?null:c.createElement("button",{className:"tw-w-7 tw-h-7 tw-mr-2 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-task",onClick:function(){return null==I?void 0:I(q.entityLink,m.Th.Task)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"tasks",icon:v.PJ.TASK_ICON,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-tasks-count"}," ",q.count)))):null,c.createElement(B,{descriptionThread:R}))}),null)))}},63571:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var i=n(70655),a=n(67814),r=n(38222),l=n(13013),s=n(28682),o=n(71577),c=n(19650),u=n(94199),d=n(91894),m=n(56256),p=n(71230),f=n(15746),v=n(50146),h=n(60236),E=n(96486),b=n(67294),w=n(437),y=n(59293),Z=n(63153),x=n(66703),g=n(9632),N=n(28178),C=n(80131),k=n(84419),T=n(53867),S=n(93389),J=n(79839),A=n(96162),I=n(64632),G=n(48132),L=n(39570),P=n(96840),O=n(38464),R=n(50168),q=n(93379),D=n.n(q),U=n(7795),_=n.n(U),j=n(90569),B=n.n(j),F=n(3565),V=n.n(F),z=n(19216),M=n.n(z),Q=n(44589),$=n.n(Q),K=n(27058),W={};W.styleTagTransform=$(),W.setAttributes=V(),W.insert=B().bind(null,"head"),W.domAPI=_(),W.insertStyleElement=M(),D()(K.Z,W),K.Z&&K.Z.locals&&K.Z.locals;var Y=n(2307),H=n(97882),X=function(e){var t=e.list,n=e.type,i=e.onDelete,a=e.hasAccess,r=(0,w.$)().t,l=(0,b.useMemo)((function(){return[{title:r("label.name"),dataIndex:"name",width:"200px",key:"name",render:function(e,t){var i="";switch(n){case"role":i=(0,P.Uy)(t.fullyQualifiedName||"");break;case"team":i=(0,P.KH)(t.fullyQualifiedName||"")}return b.createElement(H.Link,{className:"hover:tw-underline tw-cursor-pointer",to:i},(0,G.C_)(t))}},{title:r("label.description"),dataIndex:"description",key:"description",render:function(e,t){return b.createElement(C.Z,{markdown:(null==t?void 0:t.description)||""})}},{title:r("label.actions"),dataIndex:"actions",width:"80px",key:"actions",render:function(e,t){return b.createElement(u.Z,{title:r(a?"label.remove":"message.no-permission-for-action")},b.createElement(o.Z,{"data-testid":"remove-action-"+(0,G.C_)(t),disabled:!a,type:"text",onClick:function(){return i(t)}},b.createElement(O.ZP,{alt:"remove",icon:O.PJ.ICON_REMOVE,title:r("label.remove")})))}}]}),[]);return b.createElement(Y.Z,{bordered:!0,className:"list-table",columns:l,dataSource:t,pagination:!1,size:"small"})},ee=r.Z.TabPane,te=function(){var e,t,n=(0,w.$)().t,q=(0,y.k6)(),D=(0,y.UO)().fqn,U=(0,S.BL)().getEntityPermissionByFqn,_=(0,i.CR)((0,b.useState)({}),2),j=_[0],B=_[1],F=(0,i.CR)((0,b.useState)(!1),2),V=F[0],z=F[1],M=(0,i.CR)((0,b.useState)(!1),2),Q=M[0],$=M[1],K=(0,i.CR)((0,b.useState)(!1),2),W=K[0],Y=K[1],H=(0,i.CR)((0,b.useState)(),2),te=H[0],ne=H[1],ie=(0,i.CR)((0,b.useState)(L.Bd),2),ae=ie[0],re=ie[1],le=(0,P.si)(A.CZ.ACCESS,A.lx.POLICIES),se=(0,b.useMemo)((function(){return[{name:n("label.policies"),url:le},{name:D,url:""}]}),[D]),oe=(0,b.useCallback)((function(e){return b.createElement(l.Z,{disabled:!ae.EditAll,overlay:b.createElement(s.Z,{items:[{label:b.createElement(o.Z,{className:"tw-p-0","data-testid":"edit-rule",type:"text",onClick:function(t){t.stopPropagation(),q.push((0,P.do)(D,e.name||""))}},b.createElement(c.Z,{align:"center"},b.createElement(O.ZP,{alt:n("label.edit"),icon:O.PJ.EDIT,width:"16px"}),n("label.edit"))),key:"edit-button"},{label:b.createElement(o.Z,{className:"tw-p-0","data-testid":"delete-rule",type:"text",onClick:function(t){var n;t.stopPropagation(),n=e,(0,i.mG)(void 0,void 0,void 0,(function(){var e,t,a,r,l;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:e=(null!==(l=j.rules)&&void 0!==l?l:[]).filter((function(e){return e.name!==n.name})),t=(0,h.qu)(j,(0,i.pi)((0,i.pi)({},j),{rules:e})),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,Z.$j)(t,j.id)];case 2:return a=s.sent(),B(a),[3,4];case 3:return r=s.sent(),(0,R.Eo)(r),[3,4];case 4:return[2]}}))}))}},b.createElement(c.Z,{align:"center"},b.createElement(O.ZP,{alt:n("label.delete"),icon:O.PJ.DELETE,width:"16px"}),n("label.delete"))),key:"delete-button"}]}),placement:"bottomRight",trigger:["click"]},b.createElement(u.Z,{title:ae.EditAll?n("label.manage-rule"):n("message.no-permission-for-action")},b.createElement(o.Z,{"data-testid":"manage-button-"+e.name,disabled:!ae.EditAll,size:"small",type:"text",onClick:function(e){e.stopPropagation()}},b.createElement(a.G,{className:"tw-text-grey-body",icon:"ellipsis-vertical"}))))}),[j,ae]);return(0,b.useEffect)((function(){(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:z(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,U(J.A.POLICY,D)];case 2:return e=n.sent(),re(e),[3,5];case 3:return t=n.sent(),(0,R.Eo)(t),[3,5];case 4:return z(!1),[7];case 5:return[2]}}))}))}),[D]),(0,b.useEffect)((function(){(ae.ViewAll||ae.ViewBasic)&&(0,i.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:z(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,Z.u7)(D,"owner,location,teams,roles")];case 2:return e=n.sent(),B(null!=e?e:{}),[3,5];case 3:return t=n.sent(),(0,R.Eo)(t),[3,5];case 4:return z(!1),[7];case 5:return[2]}}))}))}),[ae,D]),V?b.createElement(T.Z,null):b.createElement("div",{"data-testid":"policy-details-container"},b.createElement(k.Z,{titleLinks:se}),ae.ViewAll||ae.ViewBasic?b.createElement(b.Fragment,null,(0,E.isEmpty)(j)?b.createElement(N.Z,null,b.createElement("div",{className:"text-center"},b.createElement("p",null,n("label.no-policy-found")+" "+D),b.createElement(o.Z,{size:"small",type:"primary",onClick:function(){return q.push(le)}},n("label.go-back")))):b.createElement("div",{className:"policies-detail","data-testid":"policy-details"},b.createElement(g.Z,{description:j.description||"",entityFqn:j.fullyQualifiedName,entityName:(0,G.C_)(j),entityType:I.py.POLICY,hasEditAccess:ae.EditAll||ae.EditDescription,isEdit:W,onCancel:function(){return Y(!1)},onDescriptionEdit:function(){return Y(!0)},onDescriptionUpdate:function(e){return(0,i.mG)(void 0,void 0,void 0,(function(){var t,n,a;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:t=(0,h.qu)(j,(0,i.pi)((0,i.pi)({},j),{description:e})),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,Z.$j)(t,j.id)];case 2:return n=r.sent(),B((0,i.pi)((0,i.pi)({},j),{description:n.description})),[3,5];case 3:return a=r.sent(),(0,R.Eo)(a),[3,5];case 4:return Y(!1),[7];case 5:return[2]}}))}))}}),b.createElement(r.Z,{defaultActiveKey:"rules"},b.createElement(ee,{key:"rules",tab:n("label.rules")},(0,E.isEmpty)(j.rules)?b.createElement(N.Z,null,b.createElement("p",null,n("label.no-rule-found"))):b.createElement(c.Z,{className:"tw-w-full tabpane-space",direction:"vertical"},b.createElement(u.Z,{title:ae.EditAll?n("label.add-rule"):n("message.no-permission-for-action")},b.createElement(o.Z,{"data-testid":"add-rule",disabled:!ae.EditAll,type:"primary",onClick:function(){return q.push((0,P.qW)(D))}},n("label.add-rule"))),b.createElement(c.Z,{className:"tw-w-full",direction:"vertical",size:20},j.rules.map((function(e){var t,i,a;return b.createElement(d.Z,{"data-testid":"rule-card",key:e.name||"rule"},b.createElement(c.Z,{align:"baseline",className:"tw-w-full tw-justify-between tw-pb-5",direction:"horizontal"},b.createElement(m.Z.Text,{className:"tw-font-medium tw-text-base tw-text-grey-body","data-testid":"rule-name"},e.name),oe(e)),b.createElement(c.Z,{className:"tw-w-full",direction:"vertical",size:12},e.description&&b.createElement(p.Z,{"data-testid":"description"},b.createElement(f.Z,{span:2},b.createElement(m.Z.Text,{className:"tw-text-grey-muted"},n("label.description")," :")),b.createElement(f.Z,{span:22},b.createElement(C.Z,{markdown:e.description||""}))),b.createElement(p.Z,{"data-testid":"resources"},b.createElement(f.Z,{span:2},b.createElement(m.Z.Text,{className:"tw-text-grey-muted tw-mb-0"},n("label.resources")," :")),b.createElement(f.Z,{span:22},b.createElement(m.Z.Text,{className:"tw-text-grey-body"},null===(i=null===(t=e.resources)||void 0===t?void 0:t.map((function(e){return(0,E.startCase)(e)})))||void 0===i?void 0:i.join(", ")))),b.createElement(p.Z,{"data-testid":"operations"},b.createElement(f.Z,{span:2},b.createElement(m.Z.Text,{className:"tw-text-grey-muted"},n("label.operations")," :")),b.createElement(f.Z,{span:22},b.createElement(m.Z.Text,{className:"tw-text-grey-body"},null===(a=e.operations)||void 0===a?void 0:a.join(", ")))),b.createElement(p.Z,{"data-testid":"effect"},b.createElement(f.Z,{span:2},b.createElement(m.Z.Text,{className:"tw-text-grey-muted"},n("label.effect")," :")),b.createElement(f.Z,{span:22},b.createElement(m.Z.Text,{className:"tw-text-grey-body"},(0,E.startCase)(e.effect)))),e.condition&&b.createElement(p.Z,{"data-testid":"condition"},b.createElement(f.Z,{span:2},b.createElement(m.Z.Text,{className:"tw-text-grey-muted"},n("label.condition")," :")),b.createElement(f.Z,{span:22},b.createElement("code",null,e.condition)))))}))))),b.createElement(ee,{key:"roles",tab:n("label.roles")},b.createElement(X,{hasAccess:ae.EditAll,list:null!==(e=j.roles)&&void 0!==e?e:[],type:"role",onDelete:function(e){return ne({record:e,attribute:"roles"})}})),b.createElement(ee,{key:"teams",tab:n("label.teams")},b.createElement(X,{hasAccess:ae.EditAll,list:null!==(t=j.teams)&&void 0!==t?t:[],type:"team",onDelete:function(e){return ne({record:e,attribute:"teams"})}}))))):b.createElement(N.Z,null,n("message.no-permission-to-view")),te&&b.createElement(v.Z,{centered:!0,closable:!1,confirmLoading:Q,okText:n("label.confirm"),title:n("label.remove-entity",{entity:(0,G.C_)(te.record)})+" "+n("label.from-lowercase")+" "+(0,G.C_)(j),visible:!(0,E.isUndefined)(te.record),onCancel:function(){return ne(void 0)},onOk:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,(t=te.record,n=te.attribute,(0,i.mG)(void 0,void 0,void 0,(function(){var e,a,r,l,s,o,c;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return $(!0),"roles"!==n?[3,1]:(function(e){(0,i.mG)(void 0,void 0,void 0,(function(){var t,n,a,r,l,s,o;return(0,i.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,4,5]),[4,(0,Z.n5)(e.fullyQualifiedName||"","policies")];case 1:return t=c.sent(),n=(null!==(s=t.policies)&&void 0!==s?s:[]).filter((function(e){return e.id!==j.id})),a=(0,h.qu)(t,(0,i.pi)((0,i.pi)({},t),{policies:n})),[4,(0,Z.sZ)(a,t.id)];case 2:return c.sent()&&(r=(null!==(o=j.roles)&&void 0!==o?o:[]).filter((function(t){return t.id!==e.id})),B((function(e){return(0,i.pi)((0,i.pi)({},e),{roles:r})}))),[3,5];case 3:return l=c.sent(),(0,R.Eo)(l),[3,5];case 4:return $(!1),[7];case 5:return[2]}}))}))}(t),[3,7]);case 1:return"teams"!==n?[3,2]:(function(e){(0,i.mG)(void 0,void 0,void 0,(function(){var t,n,a,r,l,s,o;return(0,i.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,4,5]),[4,(0,x.Xv)(e.fullyQualifiedName||"","policies")];case 1:return t=c.sent(),n=(null!==(s=t.policies)&&void 0!==s?s:[]).filter((function(e){return e.id!==j.id})),a=(0,h.qu)(t,(0,i.pi)((0,i.pi)({},t),{policies:n})),[4,(0,x.hh)(t.id,a)];case 2:return c.sent()&&(r=(null!==(o=j.teams)&&void 0!==o?o:[]).filter((function(t){return t.id!==e.id})),B((function(e){return(0,i.pi)((0,i.pi)({},e),{teams:r})}))),[3,5];case 3:return l=c.sent(),(0,R.Eo)(l),[3,5];case 4:return $(!1),[7];case 5:return[2]}}))}))}(t),[3,7]);case 2:e=null!==(c=j[n])&&void 0!==c?c:[],a=e.filter((function(e){return e.id!==t.id})),r=(0,h.qu)(j,(0,i.pi)((0,i.pi)({},j),((o={})[n]=a,o))),u.label=3;case 3:return u.trys.push([3,5,6,7]),[4,(0,Z.$j)(r,j.id)];case 4:return l=u.sent(),B(l),[3,7];case 5:return s=u.sent(),(0,R.Eo)(s),[3,7];case 6:return $(!1),[7];case 7:return[2]}}))})))];case 1:return e.sent(),ne(void 0),[2]}var t,n}))}))}},b.createElement(m.Z.Text,null," "+n("label.sure-to-remove")+" "+(0,G.C_)(te.record)+" "+n("label.from-lowercase")+" "+(0,G.C_)(j)+"?")))}}}]);