"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[2491],{83663:function(e,t,n){var a=n(75263).default,l=n(64836).default;t.Z=void 0;var i,r=l(n(81670)),s=l(n(10434)),o=l(n(40753)),c=l(n(36228)),u=l(n(57315)),d=a(n(67294)),m=l(n(65400)),p=n(41954),f=n(31929),v=n(51130),y=l(n(73625)),h=n(53683),E=n(38882),b=(l(n(13594)),n(10625));(0,E.canUseDocElement)()&&document.documentElement.addEventListener("click",(function(e){i={x:e.pageX,y:e.pageY},setTimeout((function(){i=null}),100)}),!0);t.Z=function(e){var t,n=d.useContext(f.ConfigContext),a=n.getPopupContainer,l=n.getPrefixCls,E=n.direction,g=function(t){var n=e.onCancel;null==n||n(t)},w=function(t){var n=e.onOk;null==n||n(t)},Z=e.prefixCls,N=e.footer,C=e.visible,x=e.open,T=void 0!==x&&x,k=e.wrapClassName,S=e.centered,I=e.getContainer,O=e.closeIcon,P=e.focusTriggerAfterClose,A=void 0===P||P,R=e.width,D=void 0===R?520:R,L=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++)t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}return n}(e,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","width"]),U=l("modal",Z),j=l(),q=d.createElement(y.default,{componentName:"Modal",defaultLocale:(0,b.getConfirmLocale)()},(function(t){var n=e.okText,a=e.okType,l=void 0===a?"primary":a,i=e.cancelText,r=e.confirmLoading,o=void 0!==r&&r;return d.createElement(d.Fragment,null,d.createElement(m.default,(0,s.default)({onClick:g},e.cancelButtonProps),i||t.cancelText),d.createElement(m.default,(0,s.default)({},(0,p.convertLegacyProps)(l),{loading:o,onClick:w},e.okButtonProps),null!=n?n:t.okText))})),F=d.createElement("span",{className:"".concat(U,"-close-x")},O||d.createElement(o.default,{className:"".concat(U,"-close-icon")})),K=(0,c.default)(k,(t={},(0,r.default)(t,"".concat(U,"-centered"),!!S),(0,r.default)(t,"".concat(U,"-wrap-rtl"),"rtl"===E),t));return d.createElement(v.NoFormStyle,{status:!0,override:!0},d.createElement(u.default,(0,s.default)({width:D},L,{getContainer:void 0===I?a:I,prefixCls:U,wrapClassName:K,footer:void 0===N?q:N,visible:T||C,mousePosition:i,onClose:g,closeIcon:F,focusTriggerAfterClose:A,transitionName:(0,h.getTransitionName)(j,"zoom",e.transitionName),maskTransitionName:(0,h.getTransitionName)(j,"fade",e.maskTransitionName)})))}},20640:function(e,t,n){var a=n(11742),l={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,i,r,s,o,c,u=!1;t||(t={}),n=t.debug||!1;try{if(r=a(),s=document.createRange(),o=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),void 0===a.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=l[t.format]||l.default;window.clipboardData.setData(i,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(c),s.selectNodeContents(c),o.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{o&&("function"==typeof o.removeRange?o.removeRange(s):o.removeAllRanges()),c&&document.body.removeChild(c),r()}return u}},86214:function(e,t,n){var a=n(8081),l=n.n(a),i=n(23645),r=n.n(i)()(l());r.push([e.id,'/*\n *  Copyright 2021 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.ant-space-authMechanism .ant-space-item:first-child {\n  width: 100%;\n}\n',""]),t.Z=r},92406:function(e,t,n){var a=n(8081),l=n.n(a),i=n(23645),r=n.n(i)()(l());r.push([e.id,".display-name.ant-typography {\n  margin-right: 0.5rem;\n  margin-bottom: 0;\n}\n",""]),t.Z=r},60034:function(e,t,n){var a=n(8081),l=n.n(a),i=n(23645),r=n.n(i)()(l());r.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.add-display-name {\n  color: #6b7280;\n}\n',""]),t.Z=r},49857:function(e,t,n){var a=n(8081),l=n.n(a),i=n(23645),r=n.n(i)()(l());r.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.description-markdown-editor .ant-modal-header,\n.description-markdown-editor .ant-modal-body,\n.description-markdown-editor .ant-modal-footer {\n  padding: 20px 24px;\n}\n',""]),t.Z=r},74213:function(e,t,n){var a=n(8081),l=n.n(a),i=n(23645),r=n.n(i)()(l());r.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.inherited-roles-heading {\n  font-weight: 500;\n  color: #37352f;\n}\n.inherited-no-description {\n  color: #6b7280;\n}\n',""]),t.Z=r},23234:function(e,t,n){var a=n(8081),l=n.n(a),i=n(23645),r=n.n(i)()(l());r.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.roles-no-description {\n  color: #6b7280;\n}\n',""]),t.Z=r},74300:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var a=i(n(67294)),l=i(n(20640));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?m(e):t}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return f(m(n=u(this,(e=d(t)).call.apply(e,[this].concat(r)))),"onClick",(function(e){var t=n.props,i=t.text,r=t.onCopy,s=t.children,o=t.options,c=a.default.Children.only(s),u=(0,l.default)(i,o);r&&r(i,u),c&&c.props&&"function"==typeof c.props.onClick&&c.props.onClick(e)})),n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,i=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=function(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,["text","onCopy","options","children"]),l=a.default.Children.only(t);return a.default.cloneElement(l,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{onClick:this.onClick}))}}],i&&c(n.prototype,i),t}(a.default.PureComponent);t.CopyToClipboard=v,f(v,"defaultProps",{onCopy:void 0,options:void 0})},74855:function(e,t,n){var a=n(74300).CopyToClipboard;a.CopyToClipboard=a,e.exports=a},52977:function(e,t,n){var a=n(71577),l=n(56256),i=n(83663),r=n(94184),s=n.n(r),o=n(67294),c=n(437);t.Z=function(e){var t=e.loadingState,n=void 0===t?"initial":t,r=e.cancelText,u=e.confirmText,d=e.header,m=e.headerClassName,p=void 0===m?"":m,f=e.bodyClassName,v=void 0===f?"":f,y=e.footerClassName,h=void 0===y?"":y,E=e.confirmButtonCss,b=void 0===E?"":E,g=e.cancelButtonCss,w=void 0===g?"":g,Z=e.onConfirm,N=e.onCancel,C=e.bodyText,x=e.className,T=e.visible,k=(0,c.$)().t;return o.createElement(i.Z,{centered:!0,destroyOnClose:!0,className:x,closable:!1,"data-testid":"confirmation-modal",footer:o.createElement("div",{className:s()("justify-end",h)},o.createElement(a.Z,{className:s()("mr-2",w),"data-testid":"cancel",key:"remove-edge-btn",type:"text",onClick:N},r),o.createElement(a.Z,{className:b,danger:u===k("label.delete"),"data-testid":"waiting"===n?"loading-button":"save-button",key:"save-btn",type:"primary",onClick:Z},u)),title:o.createElement(l.Z.Text,{strong:!0,className:p,"data-testid":"modal-header"},d),visible:T},o.createElement("div",{className:s()("h-20",v)},o.createElement(l.Z.Text,{"data-testid":"body-text"},C)))}},47368:function(e,t,n){n.d(t,{p:function(){return T}});var a=n(70655),l=n(50146),i=n(71577),r=n(56256),s=n(67294),o=n(437),c=n(50168),u=n(97809),d=n(53867),m=n(93379),p=n.n(m),f=n(7795),v=n.n(f),y=n(90569),h=n.n(y),E=n(3565),b=n.n(E),g=n(19216),w=n.n(g),Z=n(44589),N=n.n(Z),C=n(49857),x={};x.styleTagTransform=N(),x.setAttributes=b(),x.insert=h().bind(null,"head"),x.domAPI=v(),x.insertStyleElement=w(),p()(C.Z,x),C.Z&&C.Z.locals&&C.Z.locals;var T=function(e){var t=e.header,n=e.placeholder,m=e.value,p=e.onSave,f=e.onCancel,v=e.visible,y=(0,o.$)().t,h=(0,a.CR)((0,s.useState)(!1),2),E=h[0],b=h[1],g=(0,s.useRef)();return s.createElement(l.Z,{centered:!0,destroyOnClose:!0,className:"description-markdown-editor",closable:!1,"data-testid":"markdown-editor",footer:[s.createElement(i.Z,{"data-testid":"cancel",disabled:E,key:"cancelButton",type:"link",onClick:f},y("label.cancel")),s.createElement(i.Z,{"data-testid":"save",key:"saveButton",type:"primary",onClick:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:if(!g.current)return[3,5];b(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,null==p?void 0:p(null!==(n=null===(t=g.current)||void 0===t?void 0:t.getEditorContent().trim())&&void 0!==n?n:"")];case 2:return a.sent(),[3,5];case 3:return e=a.sent(),(0,c.Eo)(e),[3,5];case 4:return b(!1),[7];case 5:return[2]}}))}))}},E?s.createElement(d.Z,{size:"small",type:"white"}):y("label.save"))],open:v,title:s.createElement(r.Z.Text,{"data-testid":"header"},t),width:"90%",onCancel:f},s.createElement(u.Z,{initialValue:m,placeHolder:n,ref:g}))}},9632:function(e,t,n){var a=n(70655),l=n(55241),i=n(94184),r=n.n(i),s=n(67800),o=n(96486),c=n(67294),u=n(59293),d=n(58369),m=n(31615),p=n(48132),f=n(22215),v=n(38464),y=n(44355),h=n(50168),E=n(47368),b=n(80131);t.Z=function(e){var t=e.className,n=e.hasEditAccess,i=e.onDescriptionEdit,g=e.description,w=void 0===g?"":g,Z=e.isEdit,N=e.onCancel,C=e.onDescriptionUpdate,x=e.isReadOnly,T=void 0!==x&&x,k=e.removeBlur,S=void 0!==k&&k,I=e.entityName,O=e.entityFieldThreads,P=e.onThreadLinkSelect,A=e.entityType,R=e.entityFqn,D=e.entityFieldTasks,L=(0,u.k6)(),U=null==O?void 0:O[0],j=null==D?void 0:D[0],q=function(){L.push((0,y.Ie)(A,R))},F=function(){L.push((0,y.Q3)(A,R))},K=function(){i&&i()},M=function(){var e=Boolean(w.trim());return y.GZ.includes(A)?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"request-entity-description",onClick:e?F:q},c.createElement(l.Z,{destroyTooltipOnHide:!0,content:e?"Request update description":"Request description",overlayClassName:"ant-popover-request-description",trigger:"hover",zIndex:9999},c.createElement(v.ZP,{alt:"request-description",icon:v.PJ.REQUEST,width:"16px"}))):null},J=function(e){var t=e.descriptionThread;return(0,o.isUndefined)(t)?c.createElement(c.Fragment,null,(null==w?void 0:w.trim())&&P?c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"start-description-thread",onClick:function(){return null==P?void 0:P((0,f.ec)(A,R,d.Sn.DESCRIPTION))}},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT_PLUS,width:"16px"})):null):c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-thread",onClick:function(){return null==P?void 0:P(t.entityLink)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"comments",icon:v.PJ.COMMENT,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-thread-count"}," ",t.count)))};return c.createElement("div",{className:"schema-description tw-relative "+t},c.createElement("div",{className:"tw-flex description-inner-main-container tw-items-end"},c.createElement("div",{className:"tw-relative"},c.createElement("div",{className:"description tw-h-full tw-overflow-y-scroll tw-relative ","data-testid":"description",id:"center"},(null==w?void 0:w.trim())?c.createElement(b.Z,{enableSeeMoreVariant:!S,markdown:w}):c.createElement("span",{className:"tw-no-description p-y-xs"},(0,s.t)("label.no-description"))),c.createElement(E.p,{header:(0,s.t)("label.edit-description-for",{entityName:I}),placeholder:(0,s.t)("label.enter-description"),value:w,visible:Boolean(Z),onCancel:N,onSave:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:if(!C||!(0,o.isFunction)(C))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,C(e)];case 2:return n.sent(),N&&N(),[3,4];case 3:return t=n.sent(),(0,h.Eo)(t),[3,4];case 4:return[2]}}))}))}})),c.createElement((function(){return T?null:c.createElement("div",{className:r()("tw-w-5 tw-min-w-max tw-flex")},n&&c.createElement("button",{className:"tw-w-7 tw-h-7 tw-flex-none focus:tw-outline-none","data-testid":"edit-description",onClick:K},c.createElement(v.ZP,{alt:"edit",icon:"icon-edit",title:"Edit",width:"16px"})),(0,p.nq)(A)?c.createElement(c.Fragment,null," ",c.createElement(M,null),(0,o.isUndefined)(j)?null:c.createElement("button",{className:"tw-w-7 tw-h-7 tw-mr-2 tw-flex-none link-text focus:tw-outline-none","data-testid":"description-task",onClick:function(){return null==P?void 0:P(j.entityLink,m.Th.Task)}},c.createElement("span",{className:"tw-flex"},c.createElement(v.ZP,{alt:"tasks",icon:v.PJ.TASK_ICON,width:"16px"})," ",c.createElement("span",{className:"tw-ml-1","data-testid":"description-tasks-count"}," ",j.count)))):null,c.createElement(J,{descriptionThread:U}))}),null)))}},32339:function(e,t,n){n.r(t),n.d(t,{default:function(){return Se}});var a=n(70655),l=n(56256),i=n(60236),r=n(67294),s=n(437),o=n(59293),c=n(33891),u=n(71230),d=n(15746),m=n(91894),p=n(19650),f=n(96486),v=n(62436),y=n(62761),h=n(96162),E=n(64632),b=n(63764),g=n(48132),w=n(96840),Z=n(38464),N=n(50168),C=n(9632),x=n(93379),T=n.n(x),k=n(7795),S=n.n(k),I=n(90569),O=n.n(I),P=n(3565),A=n.n(P),R=n(19216),D=n.n(R),L=n(44589),U=n.n(L),j=n(74213),q={};q.styleTagTransform=U(),q.setAttributes=A(),q.insert=O().bind(null,"head"),q.domAPI=S(),q.insertStyleElement=D(),T()(j.Z,q),j.Z&&j.Z.locals&&j.Z.locals;var F=function(e){var t,n=e.userData,a=(0,s.$)().t;return r.createElement(m.Z,{className:"relative page-layout-v1-left-panel",key:"inherited-roles-card-component",title:r.createElement("div",{className:"flex"},r.createElement("h6",{className:"heading mb-0","data-testid":"inherited-roles-heading"},a("label.inherited-roles")))},r.createElement(r.Fragment,null,(0,f.isEmpty)(n.inheritedRoles)?r.createElement("div",{className:"mb-4"},r.createElement("span",{className:"inherited-no-description"},a("label.no-inherited-found"))):r.createElement("div",{className:"flex justify-between flex-col"},null===(t=n.inheritedRoles)||void 0===t?void 0:t.map((function(e,t){return r.createElement("div",{className:"mb-2 flex items-center gap-2",key:t},r.createElement(Z.ZP,{alt:"icon",className:"w-4",icon:Z.PJ.USERS}),r.createElement(l.Z.Text,{className:"ant-typography-ellipsis-custom w-48",ellipsis:{tooltip:!0}},(0,g.C_)(e)))})))))},K=n(67814),M=n(34041),J=n(71577),G=n(96566),B=n(85087),W=n(23234),_={};_.styleTagTransform=U(),_.setAttributes=A(),_.insert=O().bind(null,"head"),_.domAPI=S(),_.insertStyleElement=D(),T()(W.Z,_),W.Z&&W.Z.locals&&W.Z.locals;var z=function(e){var t,n=e.userData,a=(0,s.$)().t;return r.createElement(r.Fragment,null,n.isAdmin&&r.createElement("div",{className:"mb-2 flex items-center gap-2"},r.createElement(Z.ZP,{alt:"icon",className:"w-4",icon:Z.PJ.USERS}),r.createElement("span",null,y.WO)),null===(t=null==n?void 0:n.roles)||void 0===t?void 0:t.map((function(e,t){return r.createElement("div",{className:"mb-2 flex items-center gap-2",key:t},r.createElement(Z.ZP,{alt:"icon",className:"w-4",icon:Z.PJ.USERS}),r.createElement(l.Z.Text,{className:"ant-typography-ellipsis-custom w-48",ellipsis:{tooltip:!0}},(0,g.C_)(e)))})),!n.isAdmin&&(0,f.isEmpty)(n.roles)&&r.createElement("span",{className:"roles-no-description"},a("label.no-roles-assigned")))},V=function(e){var t=e.roles,n=e.userData,l=e.updateUserDetails,i=e.selectedRoles,o=e.setSelectedRoles,c=(0,a.CR)((0,r.useState)(!1),2),u=c[0],d=c[1],v=(0,s.$)().t,h=(0,B.a)().isAdminUser,E=(0,G.Eu)().isAuthDisabled,b=(0,f.isArray)(t)?t.map((function(e){return{label:(0,g.C_)(e),value:e.id}})):[];return n.isAdmin||b.push({label:y.WO,value:(0,f.toLower)(y.WO)}),h&&!E?r.createElement(m.Z,{className:"ant-card-feed relative page-layout-v1-left-panel",key:"roles-card",title:r.createElement("div",{className:"flex items-center justify-between"},r.createElement("h6",{className:"mb-0"},v("label.roles")),!u&&r.createElement("button",{className:"m-l-xs focus:tw-outline-none tw-self-baseline","data-testid":"edit-roles",onClick:function(){return d(!0)}},r.createElement(Z.ZP,{alt:"edit",className:"m-b-xss",icon:"icon-edit",title:"Edit",width:"16px"})))},r.createElement("div",{className:"mb-4"},u?r.createElement(p.Z,{className:"w-full",direction:"vertical"},r.createElement(M.Z,{"aria-label":"Select roles",className:"w-full",defaultValue:i,id:"select-role",mode:"multiple",options:b,placeholder:v("label.roles")+"...",onChange:function(e){(0,f.isNil)(e)?o([]):o(e)}}),r.createElement("div",{className:"flex justify-end","data-testid":"buttons"},r.createElement(J.Z,{className:"text-sm mr-1","data-testid":"cancel-roles",icon:r.createElement(K.G,{className:"w-3.5 h-3.5",icon:"times"}),size:"small",type:"primary",onMouseDown:function(){return d(!1)}}),r.createElement(J.Z,{className:"text-sm","data-testid":"save-roles",icon:r.createElement(K.G,{className:"w-3.5 h-3.5",icon:"check"}),size:"small",type:"primary",onClick:function(){var e=(0,f.isArray)(i)?i.filter((function(e){return e!==(0,f.toLower)(y.WO)})):[],n=(0,f.isArray)(i)?i.find((function(e){return e===(0,f.toLower)(y.WO)})):[];l({roles:e.map((function(e){var n=t.find((function(t){return t.id===e}));return{id:e,type:"role",name:(null==n?void 0:n.name)||""}})),isAdmin:Boolean(n)}),d(!1)}}))):r.createElement(z,{userData:n}))):r.createElement(m.Z,{className:"relative page-layout-v1-left-panel mt-2.5",key:"roles-card",title:r.createElement("div",{className:"flex items-center justify-between"},r.createElement("h6",{className:"mb-0"},v("label.roles")))},r.createElement("div",{className:"flex items-center justify-between mb-4"},r.createElement(z,{userData:n})))},Y=n(84419),H=n(46892),$=n(52977),Q=n(27049),X=n(4107),ee=n(72861),te=n(87738),ne=n(33081),ae=n(86214),le={};le.styleTagTransform=U(),le.setAttributes=A(),le.insert=O().bind(null,"head"),le.domAPI=S(),le.insertStyleElement=D(),T()(ae.Z,le),ae.Z&&ae.Z.locals&&ae.Z.locals;var ie=function(e){var t,n,a,i,s,o=e.authenticationMechanism,c=e.hasPermission,u=e.onEdit,d=e.onTokenRevoke,m=e.botUser;if(o.authType===ee.Gr.Jwt){var v=null===(t=o.config)||void 0===t?void 0:t.JWTToken,y=null!==(a=null===(n=o.config)||void 0===n?void 0:n.JWTTokenExpiresAt)&&void 0!==a?a:0,h=(0,te.I9)(y),E=h.tokenExpiryDate,b=h.isTokenExpired;return r.createElement(r.Fragment,null,r.createElement(p.Z,{className:"w-full tw-justify-between"},r.createElement(l.Z.Text,{className:"tw-text-base"},"MCI-DGP JWT Token"),r.createElement(p.Z,null,v?r.createElement(J.Z,{danger:!0,"data-testid":"revoke-button",disabled:!c,size:"small",type:"default",onClick:d},"Revoke token"):r.createElement(J.Z,{disabled:!c,size:"small",type:"primary",onClick:u},"Generate New Token"))),r.createElement(Q.Z,{style:{margin:"8px 0px"}}),r.createElement(l.Z.Paragraph,null,"Token you have generated that can be used to access the MCI-DGP API."),v?r.createElement(r.Fragment,null,r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z.Password,{readOnly:!0,"data-testid":"token",placeholder:"Generate new token...",value:v}),r.createElement(ne.Z,{copyText:v})),r.createElement("p",{className:"tw-text-grey-muted tw-mt-2 tw-italic","data-testid":"token-expiry"},y?b?"Expired on "+E+".":"Expires on "+E+".":r.createElement(r.Fragment,null,r.createElement(Z.ZP,{alt:"warning",icon:"error"}),r.createElement("span",{className:"tw-ml-1 tw-align-middle"},"This token has no expiration date.")))):r.createElement("div",{className:"tw-no-description tw-text-sm tw-mt-4","data-testid":"no-token"},"No token available"))}if(o.authType===ee.Gr.Sso){var g=null===(i=o.config)||void 0===i?void 0:i.authConfig,w=null===(s=o.config)||void 0===s?void 0:s.ssoServiceType;return r.createElement(r.Fragment,null,r.createElement(p.Z,{className:"w-full tw-justify-between"},r.createElement(l.Z.Text,null,(0,f.capitalize)(w)+" SSO"),r.createElement(J.Z,{disabled:!c,size:"small",type:"primary",onClick:u},"Edit")),r.createElement(Q.Z,{style:{margin:"8px 0px"}}),r.createElement(p.Z,{className:"w-full",direction:"vertical"},r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"Account Email"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"botUser-email",value:m.email}),r.createElement(ne.Z,{copyText:m.email}))),(null==g?void 0:g.secretKey)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"SecretKey"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z.Password,{readOnly:!0,"data-testid":"secretKey",value:null==g?void 0:g.secretKey}),r.createElement(ne.Z,{copyText:null==g?void 0:g.secretKey}))),(null==g?void 0:g.privateKey)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"PrivateKey"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z.Password,{readOnly:!0,"data-testid":"privateKey",value:null==g?void 0:g.privateKey}),r.createElement(ne.Z,{copyText:null==g?void 0:g.privateKey}))),(null==g?void 0:g.clientSecret)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"ClientSecret"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z.Password,{readOnly:!0,"data-testid":"clientSecret",value:null==g?void 0:g.clientSecret}),r.createElement(ne.Z,{copyText:null==g?void 0:g.clientSecret}))),(null==g?void 0:g.audience)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"Audience"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"audience",value:null==g?void 0:g.audience}),r.createElement(ne.Z,{copyText:null==g?void 0:g.audience}))),(null==g?void 0:g.clientId)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"ClientId"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"clientId",value:null==g?void 0:g.clientId}),r.createElement(ne.Z,{copyText:null==g?void 0:g.clientId}))),(null==g?void 0:g.email)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"Email"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"email",value:null==g?void 0:g.email}),r.createElement(ne.Z,{copyText:null==g?void 0:g.email}))),(null==g?void 0:g.orgURL)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"OrgURL"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"orgURL",value:null==g?void 0:g.orgURL}),r.createElement(ne.Z,{copyText:null==g?void 0:g.orgURL}))),(null==g?void 0:g.scopes)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"Scopes"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"scopes",value:null==g?void 0:g.scopes.join(",")}),r.createElement(ne.Z,{copyText:null==g?void 0:g.scopes.join(",")}))),(null==g?void 0:g.domain)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"Domain"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"domain",value:null==g?void 0:g.domain}),r.createElement(ne.Z,{copyText:null==g?void 0:g.domain}))),(null==g?void 0:g.authority)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"Authority"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"authority",value:null==g?void 0:g.authority}),r.createElement(ne.Z,{copyText:null==g?void 0:g.authority}))),(null==g?void 0:g.tokenEndpoint)&&r.createElement(r.Fragment,null,r.createElement(l.Z.Text,null,"TokenEndpoint"),r.createElement(p.Z,{className:"w-full tw-justify-between ant-space-authMechanism"},r.createElement(X.Z,{readOnly:!0,"data-testid":"tokenEndpoint",value:null==g?void 0:g.tokenEndpoint}),r.createElement(ne.Z,{copyText:null==g?void 0:g.tokenEndpoint})))))}return null},re=n(9242),se=n(50146),oe=n(69270),ce=n(16139),ue=n(38362),de=n(13523),me=n(53867),pe=M.Z.Option,fe=function(e){var t,n,i,o,u=e.isUpdating,d=e.onSave,m=e.onCancel,y=e.authenticationMechanism,h=e.botUser,g=e.botData,w=e.onEmailChange,Z=(0,s.$)().t,C=(0,G.Eu)().authConfig,x=(0,a.CR)((0,r.useState)(null!==(t=y.authType)&&void 0!==t?t:b.Gr.Jwt),2),T=x[0],k=x[1],S=(0,a.CR)((0,r.useState)(null!==(i=null===(n=y.config)||void 0===n?void 0:n.JWTTokenExpiry)&&void 0!==i?i:b.T_.OneHour),2),I=S[0],O=S[1],P=(0,a.CR)((0,r.useState)(null===(o=y.config)||void 0===o?void 0:o.authConfig),2),A=P[0],R=P[1],D=(0,a.CR)((0,r.useState)(h.email),2),L=D[0],U=D[1],j=(0,a.CR)((0,r.useState)(!1),2),q=j[0],F=j[1],K=(0,a.CR)((0,r.useState)(!1),2),B=K[0],W=K[1];(0,r.useEffect)((function(){var e,t,n=y.authType,a=null===(e=y.config)||void 0===e?void 0:e.authConfig,l=null===(t=y.config)||void 0===t?void 0:t.JWTTokenExpiry;k(null!=n?n:b.Gr.Jwt),R(a),O(null!=l?l:b.T_.OneHour)}),[y]);var _=function(e){var t=e.target.value,n=e.target.name;switch(n){case"secretKey":case"audience":case"clientId":case"domain":case"clientSecret":case"authority":case"privateKey":case"orgURL":case"tokenEndpoint":R((function(e){var l;return(0,a.pi)((0,a.pi)({},e),((l={})[n]=t,l))}));break;case"scopes":R((function(e){return(0,a.pi)((0,a.pi)({},e),{scopes:t?t.split(","):[]})}));break;case"oktaEmail":R((function(e){return(0,a.pi)((0,a.pi)({},e),{email:t})}));break;case"email":U(t)}},z=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,(0,v.Kp)({name:g.name,description:g.description,displayName:g.displayName,botUser:{id:e.id,type:E.py.USER}})];case 1:return n.sent(),F(!1),[3,4];case 2:return t=n.sent(),(0,N.Eo)(t),[3,4];case 3:return w(),W(!1),[7];case 4:return[2]}}))}))};return r.createElement(r.Fragment,null,r.createElement(re.Z,{id:"update-auth-mechanism-form",initialValues:(0,te.y2)(y,h),layout:"vertical",onFinish:function(){if(L!==h.email)F(!0);else{var e={authType:T,config:T===b.Gr.Jwt?{JWTTokenExpiry:I}:{ssoServiceType:null==C?void 0:C.provider,authConfig:(0,a.pi)({},A)}};d(e)}}},r.createElement(re.Z.Item,{label:Z("label.auth-mechanism"),name:"auth-mechanism",rules:[{required:!0,validator:function(){return T?Promise.resolve():Promise.reject(Z("message.auth-mechanism-required"))}}]},r.createElement(M.Z,{className:"w-full","data-testid":"auth-mechanism",defaultValue:T,placeholder:Z("label.select-auth-mechanism"),onChange:function(e){return k(e)}},(0,te.Y8)(C).map((function(e){return r.createElement(pe,{key:e.value},e.label)})))),T===b.Gr.Jwt&&r.createElement(re.Z.Item,{label:Z("label.token-expiration"),name:"token-expiration",rules:[{required:!0,validator:function(){return I?Promise.resolve():Promise.reject(Z("message.token-expiration-required"))}}]},r.createElement(M.Z,{className:"w-full","data-testid":"token-expiry",defaultValue:I,placeholder:Z("label.select-token-expiration"),onChange:function(e){return O(e)}},(0,te.D1)().map((function(e){return r.createElement(pe,{key:e.value},e.label)})))),T===b.Gr.Sso&&r.createElement(r.Fragment,null,r.createElement(re.Z.Item,{label:Z("label.email"),name:"email",rules:[{pattern:ce.OV,required:!0,type:"email",message:Z("message.email-is-invalid")}]},r.createElement(X.Z,{"data-testid":"email",name:"email",placeholder:Z("label.email"),value:L,onChange:_})),function(){var e,t;switch(null==C?void 0:C.provider){case ue.I.Google:return r.createElement(r.Fragment,null,r.createElement(re.Z.Item,{label:Z("label.secret-key"),name:"secretKey",rules:[{required:!0,message:Z("message.secret-key-required")}]},r.createElement(X.Z.Password,{"data-testid":"secretKey",name:"secretKey",placeholder:Z("label.secret-key"),value:null==A?void 0:A.secretKey,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.audience"),name:"audience"},r.createElement(X.Z,{"data-testid":"audience",name:"audience",placeholder:Z("label.audience"),value:null==A?void 0:A.audience,onChange:_})));case ue.I.Auth0:return r.createElement(r.Fragment,null,r.createElement(re.Z.Item,{label:Z("label.secret-key"),name:"secretKey",rules:[{required:!0,message:Z("message.secret-key-required")}]},r.createElement(X.Z.Password,{"data-testid":"secretKey",name:"secretKey",placeholder:Z("label.secret-key"),value:null==A?void 0:A.secretKey,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.client-id"),name:"clientId",rules:[{required:!0,message:Z("message.client-id-required")}]},r.createElement(X.Z,{"data-testid":"clientId",name:"clientId",placeholder:Z("label.client-id"),value:null==A?void 0:A.clientId,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.domain"),name:"domain",rules:[{required:!0,message:Z("message.domain-required")}]},r.createElement(X.Z,{"data-testid":"domain",name:"domain",placeholder:Z("label.domain"),value:null==A?void 0:A.domain,onChange:_})));case ue.I.Azure:return r.createElement(r.Fragment,null,r.createElement(re.Z.Item,{label:Z("label.client-secret"),name:"clientSecret",rules:[{required:!0,message:Z("message.clientSecret-required")}]},r.createElement(X.Z.Password,{"data-testid":"clientSecret",name:"clientSecret",placeholder:Z("label.client-secret"),value:null==A?void 0:A.clientSecret,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.client-id"),name:"clientId",rules:[{required:!0,message:Z("message.client-id-required")}]},r.createElement(X.Z,{"data-testid":"clientId",name:"clientId",placeholder:Z("label.client-id"),value:null==A?void 0:A.clientId,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.authority"),name:"authority",rules:[{required:!0,message:Z("message.authority-required")}]},r.createElement(X.Z,{"data-testid":"authority",name:"authority",placeholder:Z("label.authority"),value:null==A?void 0:A.authority,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.scopes"),name:"scopes",rules:[{required:!0,message:Z("message.scopes-required")}]},r.createElement(X.Z,{"data-testid":"scopes",name:"scopes",placeholder:Z("message.scopes-comma-separated"),value:null===(e=null==A?void 0:A.scopes)||void 0===e?void 0:e.join(","),onChange:_})));case ue.I.Okta:return r.createElement(r.Fragment,null,r.createElement(re.Z.Item,{label:Z("label.privateKey"),name:"privateKey",rules:[{required:!0,message:Z("message.privateKey-required")}]},r.createElement(X.Z.Password,{"data-testid":"privateKey",name:"privateKey",placeholder:Z("label.privateKey"),value:null==A?void 0:A.privateKey,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.client-id"),name:"clientId",rules:[{required:!0,message:Z("message.client-id-required")}]},r.createElement(X.Z,{"data-testid":"clientId",name:"clientId",placeholder:Z("label.client-id"),value:null==A?void 0:A.clientId,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.org-url"),name:"orgURL",rules:[{required:!0,message:Z("label.org-url-required")}]},r.createElement(X.Z,{"data-testid":"orgURL",name:"orgURL",placeholder:Z("label.org-url"),value:null==A?void 0:A.orgURL,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.email"),name:"oktaEmail",rules:[{required:!0,type:"email",message:Z("message.service-email-required")}]},r.createElement(X.Z,{"data-testid":"oktaEmail",name:"oktaEmail",placeholder:Z("label.okta-email"),value:null==A?void 0:A.email,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.scopes"),name:"scopes"},r.createElement(X.Z,{"data-testid":"scopes",name:"scopes",placeholder:Z("label.scopes-comma-separated"),value:null===(t=null==A?void 0:A.scopes)||void 0===t?void 0:t.join(""),onChange:_})));case ue.I.CustomOidc:return r.createElement(r.Fragment,null,r.createElement(re.Z.Item,{label:Z("label.secret-key"),name:"secretKey",rules:[{required:!0,message:Z("message.secret-key-required")}]},r.createElement(X.Z.Password,{"data-testid":"secretKey",name:"secretKey",placeholder:Z("label.secret-key"),value:null==A?void 0:A.secretKey,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.client-id"),name:"clientId",rules:[{required:!0,message:Z("message.client-id-required")}]},r.createElement(X.Z,{"data-testid":"clientId",name:"clientId",placeholder:Z("label.client-id"),value:null==A?void 0:A.clientId,onChange:_})),r.createElement(re.Z.Item,{label:Z("label.token-end-point"),name:"tokenEndpoint",rules:[{required:!0,message:Z("message.token-end-point-required")}]},r.createElement(X.Z,{"data-testid":"tokenEndpoint",name:"tokenEndpoint",placeholder:Z("label.token-end-point"),value:null==A?void 0:A.tokenEndpoint,onChange:_})));default:return null}}()),r.createElement(p.Z,{className:"w-full tw-justify-end",size:4},!(0,f.isEmpty)(y)&&r.createElement(J.Z,{"data-testid":"cancel-edit",type:"link",onClick:m},Z("label.cancel")),r.createElement(J.Z,{"data-testid":"save-edit",form:"update-auth-mechanism-form",htmlType:"submit",type:"primary"},u?r.createElement(me.Z,{size:"small"}):Z("label.save")))),q&&r.createElement(se.Z,{centered:!0,destroyOnClose:!0,closable:!1,confirmLoading:B,okText:Z("label.confirm"),title:Z("label.are-you-sure"),visible:q,onCancel:function(){return F(!1)},onOk:function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),W(!0),[4,(0,oe.eg)(L)];case 1:return n.sent()?[4,(0,c.gs)((0,de.W0)(L))]:[3,3];case 2:return e=n.sent(),z(e),[3,5];case 3:return[4,(0,c.BK)({email:L,name:(0,de.W0)(L),botName:g.name,isBot:!0,authenticationMechanism:{authType:T,config:T===b.Gr.Jwt?{JWTTokenExpiry:I}:{ssoServiceType:null==C?void 0:C.provider,authConfig:(0,a.pi)({},A)}}})];case 4:e=n.sent(),z(e),n.label=5;case 5:return[3,7];case 6:return t=n.sent(),(0,N.Eo)(t),[3,7];case 7:return[2]}}))}))}},r.createElement(l.Z.Text,null,Z("message.bot-email-confirmation",{email:Z("label.create-or-update-email-account-for-bot"),botName:g.name}))))},ve=n(92406),ye={};ye.styleTagTransform=U(),ye.setAttributes=A(),ye.insert=O().bind(null,"head"),ye.domAPI=S(),ye.insertStyleElement=D(),T()(ve.Z,ye),ve.Z&&ve.Z.locals&&ve.Z.locals;var he=n(60034),Ee={};Ee.styleTagTransform=U(),Ee.setAttributes=A(),Ee.insert=O().bind(null,"head"),Ee.domAPI=S(),Ee.insertStyleElement=D(),T()(he.Z,Ee),he.Z&&he.Z.locals&&he.Z.locals;var be=function(e){var t=e.isDisplayNameEdit,n=e.displayName,a=e.onDisplayNameChange,i=e.handleDisplayNameChange,o=e.displayNamePermission,c=e.editAllPermission,u=e.setIsDisplayNameEdit,d=(0,s.$)().t;return r.createElement("div",{className:"mt-4 w-full flex"},t?r.createElement("div",{className:"flex items-center gap-2"},r.createElement(X.Z,{className:"w-full","data-testid":"displayName",id:"displayName",name:"displayName",placeholder:d("label.display-name"),value:n,onChange:a}),r.createElement("div",{className:"flex justify-end","data-testid":"buttons"},r.createElement(J.Z,{className:"text-sm mr-1","data-testid":"cancel-displayName",icon:r.createElement(K.G,{className:"w-3.5 h-3.5",icon:"times"}),size:"small",type:"primary",onMouseDown:function(){return u(!1)}}),r.createElement(J.Z,{className:"text-sm mr-1","data-testid":"save-displayName",icon:r.createElement(K.G,{className:"w-3.5 h-3.5",icon:"check"}),size:"small",type:"primary",onClick:i}))):r.createElement(p.Z,null,n?r.createElement(l.Z.Title,{className:"display-name",level:5},n):r.createElement(l.Z.Text,{className:"add-display-name"},d("label.add-display-name")),(o||c)&&r.createElement("button",{className:"focus:tw-outline-none m-b-xss","data-testid":"edit-displayName",onClick:function(){return u(!0)}},r.createElement(Z.ZP,{alt:"edit",icon:"icon-edit",title:d("label.edit"),width:"16px"}))))},ge=function(e){var t=e.botData,n=e.botUserData,i=e.updateBotsDetails,o=e.revokeTokenHandler,x=e.botPermission,T=e.onEmailChange,k=e.updateUserDetails,S=(0,a.CR)((0,r.useState)(t.displayName),2),I=S[0],O=S[1],P=(0,a.CR)((0,r.useState)(!1),2),A=P[0],R=P[1],D=(0,a.CR)((0,r.useState)(!1),2),L=D[0],U=D[1],j=(0,a.CR)((0,r.useState)(!1),2),q=j[0],K=j[1],M=(0,a.CR)((0,r.useState)([]),2),J=M[0],G=M[1],B=(0,a.CR)((0,r.useState)([]),2),W=B[0],_=B[1],z=(0,a.CR)((0,r.useState)(!1),2),Q=z[0],X=z[1],ee=(0,s.$)().t,te=(0,a.CR)((0,r.useState)(),2),ne=te[0],ae=te[1],le=(0,a.CR)((0,r.useState)(!1),2),re=le[0],se=le[1],oe=(0,r.useMemo)((function(){return x.EditAll}),[x]),ce=(0,r.useMemo)((function(){return x.EditDisplayName}),[x]),ue=(0,r.useMemo)((function(){return x.EditDescription}),[x]),de=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,c.aA)(n.id)];case 1:return e=a.sent(),ae(e),[3,3];case 2:return t=a.sent(),(0,N.Eo)(t),[3,3];case 3:return[2]}}))}))},me=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var l,i,r,s,o,u,d,m,p,f,y,h,g;return(0,a.Jh)(this,(function(w){switch(w.label){case 0:X(!0),w.label=1;case 1:return w.trys.push([1,5,6,7]),l=n.isAdmin,i=n.timezone,r=n.name,s=n.description,o=n.displayName,u=n.profile,d=n.email,m=n.isBot,[4,(0,c.BK)({isAdmin:l,timezone:i,name:r,description:s,displayName:o,profile:u,email:d,isBot:m,authenticationMechanism:(0,a.pi)((0,a.pi)({},n.authenticationMechanism),{authType:e.authType,config:e.authType===b.Gr.Jwt?{JWTTokenExpiry:null===(y=e.config)||void 0===y?void 0:y.JWTTokenExpiry}:{ssoServiceType:null===(h=e.config)||void 0===h?void 0:h.ssoServiceType,authConfig:null===(g=e.config)||void 0===g?void 0:g.authConfig}}),botName:t.name})];case 2:return(p=w.sent())?[4,(0,v.Kp)({name:t.name,description:t.description,displayName:t.displayName,botUser:{id:p.id,type:E.py.USER}})]:[3,4];case 3:w.sent(),de(),w.label=4;case 4:return[3,7];case 5:return f=w.sent(),(0,N.Eo)(f),[3,7];case 6:return X(!1),se(!1),[7];case 7:return[2]}}))}))},pe=function(){return se(!0)};return(0,r.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,c.F3)("",void 0,void 0,!1,y.SF)];case 1:return e=n.sent(),_(e.data.data),[3,3];case 2:return t=n.sent(),_([]),(0,N.Eo)(t),[3,3];case 3:return[2]}}))}))}),[]),(0,r.useEffect)((function(){!function(){var e,t=(0,a.ev)([],(0,a.CR)((null===(e=n.roles)||void 0===e?void 0:e.map((function(e){return e.id})))||[]));n.isAdmin&&t.push((0,f.toLower)(y.WO)),G(t)}(),n.id&&de()}),[n]),r.createElement(H.Z,{classes:"tw-h-full tw-px-4",header:r.createElement(Y.Z,{className:"tw-px-6",titleLinks:[{name:"Bots",url:(0,w.si)(h.CZ.INTEGRATIONS,h.lx.BOTS)},{name:t.name||"",url:"",activeTitle:!0}]}),leftPanel:r.createElement(u.Z,{gutter:[16,16]},r.createElement(d.Z,{span:24},r.createElement(m.Z,{className:"page-layout-v1-left-panel mt-2"},r.createElement("div",{"data-testid":"left-panel"},r.createElement("div",{className:"flex flex-col"},r.createElement(Z.ZP,{alt:"bot-profile",icon:Z.PJ.BOT_PROFILE,width:"280px"}),r.createElement(p.Z,{className:"p-b-md",direction:"vertical",size:8},r.createElement(be,{displayName:I,displayNamePermission:ce,editAllPermission:oe,handleDisplayNameChange:function(){I!==t.displayName&&i({displayName:I||""}),R(!1)},isDisplayNameEdit:A,setIsDisplayNameEdit:function(e){return R(e)},onDisplayNameChange:function(e){O(e.target.value)}}),r.createElement(C.Z,{description:t.description||"",entityName:(0,g.C_)(t),hasEditAccess:ue||oe,isEdit:L,onCancel:function(){return U(!1)},onDescriptionEdit:function(){return U(!0)},onDescriptionUpdate:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){return(0,a.Jh)(this,(function(t){switch(t.label){case 0:return[4,i({description:e})];case 1:return t.sent(),U(!1),[2]}}))}))}})))))),r.createElement(d.Z,{span:24},r.createElement(V,{roles:W,selectedRoles:J,setSelectedRoles:function(e){return G(e)},updateUserDetails:k,userData:n})),r.createElement(d.Z,{span:24},r.createElement(F,{userData:n}))),rightPanel:r.createElement(m.Z,{className:"page-layout-v1-left-panel mt-2"},r.createElement("div",{"data-testid":"right-panel"},r.createElement("div",{className:"flex flex-col"},r.createElement(l.Z.Text,{className:"mb-2 text-lg"},ee("label.token-security")),r.createElement(l.Z.Text,{className:"mb-2"},ee("message.token-security-description")))))},r.createElement(m.Z,{className:"page-layout-v1-left-panel mt-2","data-testid":"center-panel"},ne?r.createElement(r.Fragment,null,re?r.createElement(fe,{authenticationMechanism:ne,botData:t,botUser:n,isUpdating:Q,onCancel:function(){return se(!1)},onEmailChange:T,onSave:me}):r.createElement(ie,{authenticationMechanism:ne,botUser:n,hasPermission:oe,onEdit:pe,onTokenRevoke:function(){return K(!0)}})):r.createElement(fe,{authenticationMechanism:{},botData:t,botUser:n,isUpdating:Q,onCancel:function(){return se(!1)},onEmailChange:T,onSave:me})),r.createElement($.Z,{bodyText:ee("message.are-you-sure-to-revoke-access"),cancelText:ee("label.cancel"),confirmText:ee("label.confirm"),header:ee("label.are-you-sure"),visible:q,onCancel:function(){return K(!1)},onConfirm:function(){o(),K(!1),pe()}}))},we=n(28178),Ze=n(74380),Ne=n(93389),Ce=n(79839),xe=n(52114),Te=n(6929),ke=n(39570),Se=function(){var e=(0,o.UO)().botsName,t=(0,Ne.BL)().getEntityPermissionByFqn,n=(0,a.CR)((0,r.useState)({}),2),u=n[0],d=n[1],m=(0,a.CR)((0,r.useState)({}),2),p=m[0],f=m[1],v=(0,a.CR)((0,r.useState)(!1),2),y=v[0],h=v[1],E=(0,a.CR)((0,r.useState)(!1),2),b=E[0],g=E[1],w=(0,a.CR)((0,r.useState)(ke.Bd),2),Z=w[0],C=w[1],x=(0,s.$)().t,T=function(){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,l;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),h(!0),[4,(0,c.RR)(e)];case 1:return t=a.sent(),[4,(0,c.gs)(t.botUser.fullyQualifiedName||"","roles,profile")];case 2:return n=a.sent(),d(n),f(t),[3,5];case 3:return l=a.sent(),(0,N.Eo)(l),g(!0),[3,5];case 4:return h(!1),[7];case 5:return[2]}}))}))};return(0,r.useEffect)((function(){(Z.ViewAll||Z.ViewBasic)&&T()}),[Z,e]),(0,r.useEffect)((function(){var n;n=e,(0,a.mG)(void 0,void 0,void 0,(function(){var e,l;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:h(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,t(Ce.A.BOT,n)];case 2:return e=a.sent(),C(e),[3,5];case 3:return l=a.sent(),(0,N.Eo)(l),[3,5];case 4:return h(!1),[7];case 5:return[2]}}))}))}),[e]),r.createElement(Ze.Z,{className:"p-y-md"},y?r.createElement(me.Z,null):r.createElement(r.Fragment,null,Z.ViewAll||Z.ViewBasic?b?r.createElement(we.Z,null,r.createElement(l.Z.Paragraph,{className:"text-base","data-testid":"error-message"},"No bots available with name"," ",r.createElement("span",{className:"font-medium","data-testid":"username"},e)," ")):r.createElement(ge,{botData:p,botPermission:Z,botUserData:u,revokeTokenHandler:function(){(0,c.e6)(u.id).then((function(e){d(e)})).catch((function(e){(0,N.Eo)(e)}))},updateBotsDetails:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,l,r;return(0,a.Jh)(this,(function(s){switch(s.label){case 0:t=(0,a.pi)((0,a.pi)({},p),e),n=(0,i.qu)(p,t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,c.ZM)(p.id,n)];case 2:if(!(l=s.sent()))throw Te.Z["api-error-messages"]["unexpected-error"];return f((function(e){return(0,a.pi)((0,a.pi)({},e),l)})),[3,4];case 3:return r=s.sent(),(0,N.Eo)(r),[3,4];case 4:return[2]}}))}))},updateUserDetails:function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,l,r;return(0,a.Jh)(this,(function(s){switch(s.label){case 0:t=(0,a.pi)((0,a.pi)({},u),e),n=(0,i.qu)(u,t),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(0,c.f_)(u.id,n)];case 2:if(!(l=s.sent()))throw x("message.unexpected-error");return d((function(e){return(0,a.pi)((0,a.pi)({},e),l)})),[3,4];case 3:return r=s.sent(),(0,N.Eo)(r),[3,4];case 4:return[2]}}))}))},onEmailChange:T}):r.createElement(we.Z,null,xe._D)))}}}]);