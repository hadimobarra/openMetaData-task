"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[4729],{10584:function(t,e,a){a.d(e,{z:function(){return s}});var r=a(70655),i=a(45697),n=a.n(i),o=a(67294),l={base:"button-comp tw-align-bottom tw-inline-flex tw-items-center tw-justify-center tw-cursor-pointer \n    tw-leading-5 tw-transition-colors tw-duration-150 tw-font-medium focus:tw-outline-none",block:"tw-block tw-w-full",size:{large:"tw-px-5 tw-py-3 tw-rounded-lg",regular:"tw-px-4 tw-py-2 tw-rounded-lg tw-text-sm",small:"tw-px-2 tw-py-0.5 tw-rounded-md tw-text-sm","x-small":"tw-px-2 tw-py-px tw-rounded-md tw-text-xs",custom:""},contained:{default:{base:"tw-text-gray-600 tw-bg-gray-300 tw-border tw-border-transparent",active:"active:tw-bg-gray-400 hover:tw-bg-gray-400 focus:tw-ring focus:tw-ring-gray-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-white tw-bg-primary tw-border tw-border-transparent",active:"active:tw-bg-primary-active hover:tw-bg-primary-hover focus:tw-bg-primary-active focus:tw-ring focus:tw-ring-purple-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"}},outlined:{default:{base:"tw-text-grey-muted tw-border-gray-300 tw-border dark:tw-text-gray-400 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-border-gray-600 focus:tw-border-gray-600 \n      hover:tw-text-gray-600 active:tw-text-gray-600 focus:tw-ring focus:tw-ring-gray-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-primary tw-border-primary tw-border dark:tw-text-blue-300 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-bg-primary hover:tw-text-white focus:tw-bg-primary \n      focus:tw-text-white active:tw-bg-primary active:tw-text-white focus:tw-ring focus:tw-ring-purple-300",disabled:"tw-opacity-50 tw-cursor-not-allowed"}},link:{default:{base:"tw-text-grey dark:tw-text-gray-400 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-underline focus:tw-underline \n        hover:tw-text-gray-600 active:tw-text-gray-600",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-primary dark:tw-text-blue-300 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-underline focus:tw-underline \n        hover:tw-text-primary-hover active:tw-text-primary-active",disabled:"tw-opacity-50 tw-cursor-not-allowed"}},text:{default:{base:"tw-text-grey-muted dark:tw-text-gray-400 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-text-gray-600 active:tw-text-gray-600",disabled:"tw-opacity-50 tw-cursor-not-allowed"},primary:{base:"tw-text-primary dark:tw-text-blue-300 focus:tw-outline-none",active:"active:tw-bg-transparent hover:tw-text-primary-hover active:tw-text-primary-active",disabled:"tw-opacity-50 tw-cursor-not-allowed"}}},s=o.forwardRef((function(t,e){var a=t.block,i=void 0!==a&&a,n=t.children,s=t.className,c=void 0===s?"":s,u=t.disabled,d=void 0!==u&&u,w=t.size,p=void 0===w?"regular":w,m=t.tag,f=void 0===m?"button":m,y=t.theme,v=void 0===y?"default":y,b=t.type,g=void 0===b?"button"===f?"button":void 0:b,E=t.variant,x=void 0===E?"contained":E,h=(0,r._T)(t,["block","children","className","disabled","size","tag","theme","type","variant"]),T=l.base,D=l.block,S=l.size[p],C=l[x][v].base,R=l[x][v].active,A=l[x][v].disabled,k=[T,S,C,d?A:R,i?D:"",c].join(" ");return o.createElement(f,(0,r.pi)({className:k,ref:e,disabled:d,type:g},h),n)}));s.propTypes={block:n().bool,children:n().node,className:n().string,disabled:n().bool,tag:n().string,size:n().oneOf(["large","regular","small","x-small","custom"]),theme:n().oneOf(["default","primary"]),type:n().oneOf(["button","submit","reset"]),variant:n().oneOf(["contained","outlined","link","text"])},s.displayName="Button"},72945:function(t,e,a){a.d(e,{Z:function(){return g}});var r,i=a(70655),n=a(50146),o=a(55742),l=a(96486),s=a(67294),c=a(59293),u=a(74313),d={loading:"initial",state:!1,softDelete:!0},w=a(64632),p=a(6929),m=a(48132),f=a(22215),y=a(50168),v=a(10584),b=a(53867);!function(t){t.SOFT_DELETE="soft-delete",t.HARD_DELETE="hard-delete"}(r||(r={}));var g=function(t){var e=t.allowSoftDelete,a=void 0===e||e,g=t.visible,E=t.deleteMessage,x=t.softDeleteMessagePostFix,h=void 0===x?"":x,T=t.hardDeleteMessagePostFix,D=void 0===T?"":T,S=t.entityName,C=t.entityType,R=t.onCancel,A=t.entityId,k=t.prepareType,_=void 0===k||k,L=t.isRecursiveDelete,N=t.afterDeleteAction,O=(0,c.k6)(),I=(0,i.CR)((0,s.useState)(d),2),z=I[0],F=I[1],Z=(0,i.CR)((0,s.useState)(""),2),P=Z[0],M=Z[1],H=(0,i.CR)((0,s.useState)(a?r.SOFT_DELETE:r.HARD_DELETE),2),G=H[0],V=H[1],j=(0,i.CR)((0,s.useState)(!1),2),B=j[0],K=j[1],U=function(t){void 0===t&&(t=!1);var e="Soft deleting will deactivate the "+S+". This will disable any discovery, read or write operations on "+S+".",a=(0,m.fP)((0,f.DX)(C),"");return t?e:a},X=[{title:"Delete "+C+" “"+S+"”",description:U(!0)+" "+h,type:r.SOFT_DELETE,isAllowd:a},{title:"Permanently Delete "+C+" “"+S+"”",description:(E||U())+" "+D,type:r.HARD_DELETE,isAllowd:!0}],Y=function(){F(d),M(""),V(r.SOFT_DELETE),R()},q=(0,s.useCallback)((function(){return"DELETE"===P&&(G===r.SOFT_DELETE||G===r.HARD_DELETE)}),[P]);return(0,s.useEffect)((function(){V(a?r.SOFT_DELETE:r.HARD_DELETE),F((0,i.pi)((0,i.pi)({},d),{softDelete:a}))}),[a]),s.createElement(n.Z,{closable:!1,confirmLoading:B,"data-testid":"delete-modal",footer:s.createElement("div",{className:"tw-justify-end","data-testid":"footer"},s.createElement(v.z,{className:"tw-mr-2","data-testid":"discard-button",disabled:"waiting"===z.loading,size:"regular",theme:"primary",variant:"text",onClick:Y},"Cancel"),"waiting"===z.loading?s.createElement(v.z,{disabled:!0,className:"tw-w-16 tw-h-8 tw-rounded-md disabled:tw-opacity-100","data-testid":"loading-button",size:"custom",theme:"primary",variant:"contained"},s.createElement(b.Z,{size:"small",type:"white"})):s.createElement(v.z,{className:"tw-h-8 tw-px-3 tw-py-2 tw-rounded-md","data-testid":"confirm-button",disabled:!q(),size:"custom",theme:"primary",variant:"contained",onClick:function(){K(!1),F((function(t){return(0,i.pi)((0,i.pi)({},t),{loading:"waiting"})})),(0,u.Ks)(_?[w.py.DASHBOARD_SERVICE,w.py.DATABASE_SERVICE,w.py.MESSAGING_SERVICE,w.py.PIPELINE_SERVICE,w.py.METADATA_SERVICE].includes(C||"")?"services/"+C+"s":C===w.py.GLOSSARY?"glossaries":C===w.py.POLICY?"policies":C===w.py.TEST_SUITE||C===w.py.KPI?C:C+"s":C,null!=A?A:"",Boolean(L),!z.softDelete).then((function(t){200===t.status?setTimeout((function(){Y(),(0,y.XA)(p.Z["api-success-messages"]["delete-entity-success"].replace("Entity",(0,l.startCase)(C))),N?N():setTimeout((function(){O.push("/")}),500)}),1e3):(0,y.Eo)(p.Z["api-error-messages"]["unexpected-server-response"])})).catch((function(t){(0,y.Eo)(t,p.Z["api-error-messages"]["delete-entity-error"])})).finally((function(){Y(),K(!1)}))}},"Confirm")),okText:"Delete",title:"Delete "+S,visible:g,onCancel:Y},s.createElement(o.ZP.Group,{value:G,onChange:function(t){var e,a=t.target.value;V(a),void 0===(e=a===r.SOFT_DELETE)&&(e=!0),F((function(t){return(0,i.pi)((0,i.pi)({},t),{state:!0,softDelete:e})}))}},X.map((function(t){return t.isAllowd&&s.createElement(o.ZP,{"data-testid":t.type,key:t.type,value:t.type},s.createElement("p",{className:"tw-text-sm tw-mb-1 tw-font-medium","data-testid":t.type+"-option"},t.title),s.createElement("p",{className:"tw-text-grey-muted tw-text-xs tw-mb-2"},t.description))}))),s.createElement("div",null,s.createElement("p",{className:"tw-mb-2"},"Type ",s.createElement("strong",null,"DELETE")," to confirm"),s.createElement("input",{autoComplete:"off",className:"tw-form-inputs tw-form-inputs-padding","data-testid":"confirmation-text-input",disabled:"waiting"===z.loading,name:"entityName",placeholder:"DELETE",type:"text",value:P,onChange:function(t){M(t.target.value)}})))}},84729:function(t,e,a){a.r(e);var r=a(70655),i=a(91894),n=a(96486),o=a(67294),l=a(437),s=a(59293),c=a(96971),u=a(74155),d=a(72945),w=a(96162),p=a(64632),m=a(48132),f=a(96840),y=a(50168);e.default=function(){var t=(0,l.$)().t,e=(0,s.UO)().fqn,a=(0,r.CR)((0,o.useState)(0),2),v=a[0],b=a[1],g=(0,r.CR)((0,o.useState)(),2),E=g[0],x=g[1],h=(0,r.CR)((0,o.useState)([]),2),T=h[0],D=h[1],S=(0,r.CR)((0,o.useState)(!1),2),C=S[0],R=S[1];(0,o.useEffect)((function(){e&&(0,r.mG)(void 0,void 0,void 0,(function(){var a,i,o,l,s;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,4,5]),b((function(t){return t+1})),[4,(0,c.Zt)(e)];case 1:return a=u.sent(),[4,(0,c.Fj)(a.id)];case 2:return i=u.sent(),o=null!==(s=null===(l=a.filteringRules)||void 0===l?void 0:l.map((function(t){var e,a,i=(0,r.CR)(null!==(a=null===(e=t.condition)||void 0===e?void 0:e.split("("))&&void 0!==a?a:[],2),o=i[0],l=i[1];return(0,r.pi)((0,r.pi)({},t),{fullyQualifiedName:o,condition:l.replaceAll("'","").replace(new RegExp("\\)"),"").split(",").map(n.trim)})})))&&void 0!==s?s:[],x((0,r.pi)((0,r.pi)({},a),{filteringRules:o})),D(i),[3,5];case 3:return u.sent(),(0,y.Eo)(t("server.entity-fetch-error",{entity:t("label.alert")}),e),[3,5];case 4:return b((function(t){return t-1})),[7];case 5:return[2]}}))}))}),[e]);var A=(0,o.useMemo)((function(){return[{name:t("label.alert-plural"),url:(0,f.si)(w.CZ.NOTIFICATIONS,w.lx.ALERTS)},{name:(0,m.C_)(E),url:""}]}),[E]);return o.createElement(o.Fragment,null,v>0&&o.createElement(i.Z,{loading:v>0}),E&&o.createElement(u.M,{alertActions:T,alerts:E,breadcrumb:A,onDelete:function(){return R(!0)}}),o.createElement(d.Z,{afterDeleteAction:function(){return history.back()},allowSoftDelete:!1,entityId:(null==E?void 0:E.id)||"",entityName:(null==E?void 0:E.name)||"",entityType:p.py.ALERT,visible:C,onCancel:function(){R(!1)}}))}}}]);