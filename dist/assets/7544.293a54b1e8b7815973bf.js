"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[7544],{30842:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.entity-summary-details .ant-space-item {\n  position: relative;\n}\n.entity-summary-details .ant-btn {\n  border: none;\n  background-color: inherit;\n  height: 16px;\n  padding: 0px;\n}\n',""]),t.Z=l},11910:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,".dropdown-list.edit-owner-dropdown {\n  left: -23px;\n  top: 20px;\n}\n",""]),t.Z=l},27473:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.team-type-select .ant-select {\n  width: 150px;\n}\n.team-type-select .edit-team-type-buttons .ant-btn {\n  background-color: #54c5d0;\n  color: white;\n  width: 24px;\n  height: 24px;\n}\n.team-type-select .edit-team-icons {\n  font-size: 12px;\n}\n',""]),t.Z=l},45732:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,".tier-card{width:760px;border:1px solid #dde3ea;box-shadow:1px 1px 3px rgba(0,0,0,.12);border-radius:4px !important}",""]),t.Z=l},4142:function(e,t,n){n.d(t,{Z:function(){return ve}});var a=n(70655),i=n(13013),r=n(19650),l=n(71577),s=n(94055),c=n(94184),o=n.n(c),u=n(96486),d=n(67294),m=n(437),p=n(48217),w=n(48132),f=n(38464),E=n(10584),y=n(52046),h=n(96566),v=n(33891),g=n(73213),b=n(85087),T=n(52187),C=n(50168),S=n(19812),k=n(95126),N=n(93379),x=n.n(N),Z=n(7795),A=n.n(Z),O=n(90569),R=n.n(O),I=n(3565),L=n.n(I),U=n(19216),F=n.n(U),D=n(44589),G=n.n(D),z=n(11910),_={};_.styleTagTransform=G(),_.setAttributes=L(),_.insert=R().bind(null,"head"),_.domAPI=A(),_.insertStyleElement=F(),x()(z.Z,_),z.Z&&z.Z.locals&&z.Z.locals;var P=function(e){var t=e.visible,n=void 0!==t&&t,i=e.currentOwner,r=e.updateUser,l=e.allowTeamOwner,s=void 0===l||l,c=e.currentUser,o=e.hideWidget,m=e.removeOwner,p=(0,h.Eu)().isAuthDisabled,f=(0,b.a)().isAdminUser,E=(0,a.CR)((0,d.useState)("initial"),2),N=E[0],x=E[1],Z=(0,a.CR)((0,d.useState)([]),2),A=Z[0],O=Z[1],R=(0,a.CR)((0,d.useState)(!0),2),I=R[0],L=R[1],U=(0,a.CR)((0,d.useState)(c),2),F=U[0],D=U[1],G=(0,a.CR)((0,d.useState)(""),2),z=G[0],_=G[1],P=(0,d.useMemo)((function(){var e=y.Z.getCurrentUserDetails();return[{name:(0,w.C_)(e),value:null==e?void 0:e.id,group:"Users",type:"user"}]}),[y.Z.users,y.Z.userDetails]),W=(0,a.CR)((0,d.useState)(0),2),M=W[0],B=W[1],Y=(0,a.CR)((0,d.useState)(0),2),V=Y[0],j=Y[1],q=(0,d.useCallback)((function(e,t){void 0===e&&(e=g.m),void 0===t&&(t=1),L(!0),(0,S.bc)(e,t).then((function(t){var n=t.users,a=t.teams,i=t.teamsTotal,r=t.usersTotal;j(null!=i?i:0),B(null!=r?r:0),O((0,T.D)(n,a,!1,e))})).catch((function(){O([])})).finally((function(){L(!1)}))}),[O,L]),J=(0,d.useCallback)((function(e){q(e||g.m)}),[q]),K=(0,d.useCallback)((0,u.debounce)(J,400),[J]);return(0,d.useEffect)((function(){n&&(p||!f?(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),0!==A.length?[3,2]:[4,(0,v.OJ)()];case 1:e=i.sent(),t=e.map((function(e){return{name:(0,w.C_)(e),value:e.id,group:"Teams",type:"team"}})),j(e.length),O((0,a.ev)((0,a.ev)([],(0,a.CR)(t)),(0,a.CR)(P))),i.label=2;case 2:return[3,5];case 3:return n=i.sent(),(0,C.Eo)(n),[3,5];case 4:return L(!1),[7];case 5:return[2]}}))})):(_(""),K("")))}),[n]),(0,d.useEffect)((function(){n&&K(z)}),[z]),(0,d.useEffect)((function(){"waiting"===N&&(x("success"),setTimeout((function(){x("initial")}),300)),D(c)}),[c]),n?d.createElement(k.Z,{showEmptyList:!0,className:"edit-owner-dropdown",controlledSearchStr:z,dropDownList:A,getTotalCountForGroup:function(e){return"users"===(0,u.lowerCase)(e)?f?M:1:"teams"===(0,u.lowerCase)(e)?V:0},groupType:"tab",isLoading:I,listGroups:s?["Teams","Users"]:["Users"],removeOwner:function(){m&&(m(),o())},showSearchBar:(0,S.NC)(),value:(null==F?void 0:F.id)||"",onSearchTextChange:function(e){_(e),K(e)},onSelect:function(e,t){void 0===t&&(t="");var n,l=A.find((function(e){return e.value===t}));if(l){var s=(n={type:l.type,id:l.value},(0,u.isEqual)(n,c)?void 0:n);if(s){var d=(0,a.pi)((0,a.pi)({},i),s);r&&r(d)}}o()}}):null},W=n(25577),M=n(67814),B=n(34041),Y=n(27473),V={};V.styleTagTransform=G(),V.setAttributes=L(),V.insert=R().bind(null,"head"),V.domAPI=A(),V.insertStyleElement=F(),x()(Y.Z,V),Y.Z&&Y.Z.locals&&Y.Z.locals;var j=function(e){var t=e.handleShowTypeSelector,n=e.showGroupOption,i=e.teamType,s=e.updateTeamType,c=(0,a.CR)((0,d.useState)(i),2),o=c[0],u=c[1],m=(0,d.useMemo)((function(){return function(e){return Object.values(p.C).filter((function(t){return t===p.C.Group?e:t!==p.C.Organization})).map((function(e){return{label:e,value:e}}))}(n)}),[]);return d.createElement(r.Z,{align:"center",className:"team-type-select",size:4},d.createElement(B.Z,{defaultActiveFirstOption:!0,options:m,value:o,onSelect:function(e){u(e)}}),d.createElement(r.Z,{className:"edit-team-type-buttons",size:4},d.createElement(l.Z,{icon:d.createElement(M.G,{className:"tw-w-3.5 tw-h-3.5",icon:"xmark"}),onClick:function(){t(!1)}}),d.createElement(l.Z,{icon:d.createElement(M.G,{className:"tw-w-3.5 tw-h-3.5",icon:"check"}),onClick:function(){s&&s(o)}})))},q=n(91894),J=n(71230),K=n(15746),H=n(56256),Q=n(55241),X=n(43318),$=n(6929),ee=n(80131),te=n(53867),ne="tw-flex tw-px-5 tw-py-3 tw-cursor-pointer tw-justify-between tw-items-center",ae="",ie="tw-bg-primary-lite tw-border-b tw-border-primary",re="tw-bg-primary tw-text-white",le="tw-text-base tw-mb-0 tw-font-semibold",se="tw-font-medium tw-pr-2 tw-font-normal",ce="tw-py-5 tw-px-10",oe="tw-hidden",ue="tw-block",de=function(e){var t,n,a=e.card,i=e.index,r=e.isActive,l=e.isSelected,s=e.onCardSelect,c=e.onSave,u=e.tierStatus,m=e.className;return d.createElement("div",{className:o()("tw-flex tw-flex-col tw-border tw-bg-white",l||r?"tw-border-primary":"tw-border-main",m),"data-testid":"card-list",onClick:function(){s(a.id)}},d.createElement("div",{className:o()(ne,(n=r?ie:ae,l?re:n),0===i?r?"tw-rounded-t-md":"tw-rounded-t":null)},d.createElement("div",{className:"tw-flex"},d.createElement("div",{className:"tw-self-start tw-mr-2"},d.createElement(M.G,{className:"tw-text-xs",icon:r?"chevron-down":"chevron-right"})),d.createElement("div",{className:"tw-flex tw-flex-col"},d.createElement("p",{className:le},a.title),d.createElement("p",{className:se},a.description.replace(/\*/g,"")))),d.createElement("div",{"data-testid":"icon"},(t=a.id,l&&r||l?d.createElement(M.G,{className:"tw-text-h4",icon:"check-circle"}):r?function(e){switch(u){case"waiting":return d.createElement(te.Z,{className:"tw-inline-block",size:"small",style:{marginBottom:"-4px"},type:"default"});case"success":return d.createElement(M.G,{icon:"check"});default:return d.createElement(E.z,{"data-testid":"select-tier-buuton",size:"small",theme:"primary",onClick:function(){return c(e)}},"Select")}}(t):d.createElement(E.z,{"data-testid":"select-tier-buuton",size:"small",theme:"primary",variant:"outlined",onClick:function(){return c(t)}},"Select")))),d.createElement("div",{className:o()(ce,r?ue:oe)},d.createElement(ee.Z,{enableSeeMoreVariant:!1,markdown:a.data})))},me=n(45732),pe={};pe.styleTagTransform=G(),pe.setAttributes=L(),pe.insert=R().bind(null,"head"),pe.domAPI=A(),pe.insertStyleElement=F(),x()(me.Z,pe),me.Z&&me.Z.locals&&me.Z.locals;var we=function(e){var t=e.currentTier,n=e.hideTier,i=e.updateTier,r=e.removeTier,s=(0,a.CR)((0,d.useState)([]),2),c=s[0],u=s[1],m=(0,a.CR)((0,d.useState)(t),2),p=m[0],w=m[1],f=(0,a.CR)((0,d.useState)("initial"),2),E=f[0],y=f[1],h=(0,a.CR)((0,d.useState)(!1),2),v=h[0],b=h[1],T=function(e){w(e)},S=function(e){y("waiting");var n=function(e){return e!==t?e:void 0}(e);null==i||i(n)};return(0,d.useEffect)((function(){n||(b(!0),(0,X.n3)("Tier").then((function(e){var t,n;if(e){var a=null!==(n=null===(t=e.children)||void 0===t?void 0:t.map((function(e){return{id:"Tier"+g.o+e.name,title:e.name,description:e.description.substring(0,e.description.indexOf("\n\n")),data:e.description.substring(e.description.indexOf("\n\n")+1)}})))&&void 0!==n?n:[];u(a)}else u([])})).catch((function(e){(0,C.Eo)(e,$.Z["api-error-messages"]["fetch-tiers-error"])})).finally((function(){b(!1)})))}),[]),(0,d.useEffect)((function(){w(t),"waiting"===E&&(y("success"),setTimeout((function(){y("initial")}),300))}),[t]),d.createElement(Q.Z,{"data-testid":"tier-card-container",trigger:"click"},n?null:v?d.createElement(te.Z,null):d.createElement(q.Z,{className:"tier-card","data-testid":"cards",headStyle:{borderBottom:"none",paddingLeft:"16px",paddingTop:"12px"},title:d.createElement(J.Z,null,d.createElement(K.Z,{span:21},d.createElement(H.Z.Title,{className:"m-b-0",level:5},"Edit Tier")),d.createElement(K.Z,{span:3},t?d.createElement(l.Z,{className:"font-medium","data-testid":"remove-tier",type:"link",onClick:r}," ","Clear Tier"):""))},c.map((function(e,n){return d.createElement(de,{card:e,className:o()("tw-mb-0 tw-rounded-t-none pl-[16px]",{"tw-rounded-t-md":0===n},{"tw-rounded-b-md ":n===c.length-1}),index:n,isActive:p===e.id,isSelected:e.id===t,key:n,tierStatus:E,onCardSelect:T,onSave:S})}))))},fe=n(30842),Ee={};Ee.styleTagTransform=G(),Ee.setAttributes=L(),Ee.insert=R().bind(null,"head"),Ee.domAPI=A(),Ee.insertStyleElement=F(),x()(fe.Z,Ee),fe.Z&&fe.Z.locals&&fe.Z.locals;var ye=function(e){var t=e.iconClasses;return d.createElement(f.ZP,{alt:"edit",className:o()("tw-cursor-pointer tw-align-text-top",t),icon:f.PJ.EDIT,title:"Edit",width:"16px"})},he=function(e){var t=e.content;return d.createElement(s.default,{className:"tw-ml-2",title:t},d.createElement(f.ZP,{alt:"info-secondary",icon:"info-secondary",width:"12px"}))},ve=function(e){var t=e.data,n=e.isGroupType,c=e.tier,y=e.teamType,h=e.showGroupOption,v=e.removeOwner,g=e.updateOwner,b=e.updateTier,T=e.updateTeamType,C=e.removeTier,S=e.currentOwner,k=e.deleted,N=void 0!==k&&k,x=d.createElement(d.Fragment,null),Z=(0,m.$)().t,A=t.placeholderText||t.value,O=(0,a.CR)((0,d.useState)(!1),2),R=O[0],I=O[1],L=(0,a.CR)((0,d.useState)(!1),2),U=L[0],F=L[1],D=(0,d.useCallback)((function(e){F(e)}),[]),G=(0,d.useMemo)((function(){var e=(0,w.Ez)(t);return{isEntityCard:null==t?void 0:t.isEntityCard,isEntityDetails:null==t?void 0:t.isEntityDetails,userDetails:e,isTier:"Tier"===t.key,isOwner:"Owner"===t.key,isTeamType:"TeamType"===t.key}}),[t]),z=G.isEntityDetails,_=G.userDetails,M=G.isTier,B=G.isOwner,Y=G.isTeamType;switch(t.key){case"Owner":x=A&&"--"!==A?(0,u.isString)(A)?d.createElement(d.Fragment,null,!(0,u.isUndefined)(_)&&z&&d.createElement(d.Fragment,null,d.createElement(W.Z,{displayName:_.ownerName,id:_.id,name:_.ownerName||"",width:"20"}),d.createElement("span",null,_.ownerName),d.createElement("span",{className:"tw-mr-1 tw-inline-block tw-text-gray-400"},"|")),d.createElement(W.Z,{displayName:A,id:"",name:t.profileName||"",width:t.avatarWidth||"20"})):d.createElement(d.Fragment,null):d.createElement(d.Fragment,null,Z("label.no-entity",{entity:Z("label.owner")}),d.createElement("span",{"data-testid":"edit-"+t.key+"-icon",onClick:function(){return I(!R)}},g&&!N?d.createElement(ye,null):null));break;case"Tier":x=A&&"--"!==A?d.createElement(d.Fragment,null):d.createElement(d.Fragment,null,Z("label.no-entity",{entity:Z("label.tier")}),d.createElement(i.Z,{overlay:d.createElement(we,{currentTier:null==c?void 0:c.tagFQN,removeTier:C,updateTier:b}),trigger:["click"]},d.createElement("span",{"data-testid":"edit-"+t.key+"-icon"},b&&!N?d.createElement(ye,null):null)));break;case"TeamType":x=A?d.createElement(d.Fragment,null,Z("label.type")," - "):d.createElement(d.Fragment,null);break;case"Usage":x=d.createElement(d.Fragment,null,Z("label.usage")," - ");break;default:x=d.createElement(d.Fragment,null,t.key?A?t.showLabel?Z("label."+(0,u.toLower)(t.key))+" - ":null:""+Z("label.no-entity",{entity:Z("label."+(0,u.toLower)(t.key))}):null)}return d.createElement(r.Z,{className:"entity-summary-details","data-testid":"entity-summary-details",direction:"horizontal"},x,A&&d.createElement(d.Fragment,null,t.isLink?d.createElement(d.Fragment,null,d.createElement("a",{className:o()("tw-inline-block tw-truncate link-text tw-align-middle",{"tw-w-52":A.length>32}),"data-testid":"owner-link",href:t.value,rel:"noopener noreferrer",target:t.openInNewTab?"_blank":"_self",onClick:function(e){e.stopPropagation()}},A,t.openInNewTab&&d.createElement(d.Fragment,null,"Â ",d.createElement(f.ZP,{alt:"external-link",className:"tw-align-middle",icon:"external-link",width:"16px"}))),z&&!(0,u.isUndefined)(_)?d.createElement(he,{content:A?Z("message.entity-owned-by-name",{entityOwner:null!=A?A:""})+"\n                        \n                        "+Z("message.and-followed-owned-by-name",{userName:(0,u.isUndefined)(_)?"":_.ownerName}):""}):null,(B||M)&&d.createElement("span",{"data-testid":"edit-"+t.key+"-icon",onClick:function(){return I(!0)}},g?d.createElement(ye,null):null)):B?d.createElement("span",{className:o()("tw-inline-block tw-truncate tw-align-middle",{"tw-w-52":A.length>32}),"data-testid":"owner-name",title:A},d.createElement(E.z,{"data-testid":"owner-dropdown",size:"custom",theme:"primary",variant:"text"},A),d.createElement("span",{className:"tw-ml-2","data-testid":"edit-"+t.key+"-icon",onClick:function(){return I(!0)}},g?d.createElement(ye,null):null)):M?d.createElement(r.Z,{className:o()("tw-mr-1  tw-truncate tw-align-middle",{"tw-w-52":A.length>32}),"data-testid":"tier-name",direction:"horizontal",title:A},d.createElement("span",{"data-testid":"tier-dropdown"},A),d.createElement(i.Z,{overlay:d.createElement(we,{currentTier:null==c?void 0:c.tagFQN,removeTier:C,updateTier:b}),placement:"bottomRight",trigger:["click"]},d.createElement("span",{className:"tw-flex tw--mt-0.5","data-testid":"edit-"+t.key+"-icon"},b?d.createElement(ye,null):null))):Y?U?d.createElement(j,{handleShowTypeSelector:D,showGroupOption:null!=h&&h,teamType:null!=y?y:p.C.Department,updateTeamType:T}):d.createElement(d.Fragment,null,A,d.createElement(s.default,{placement:"bottom",title:Z(n?"message.group-team-type-change-message":"label.edit-team-type")},d.createElement(l.Z,{className:n?"tw-opacity-50":"","data-testid":"edit-"+t.key+"-icon",disabled:n,onClick:function(){return F(!0)}},T?d.createElement(ye,null):null))):d.createElement("span",null,A)),d.createElement(P,{currentUser:S,hideWidget:function(){return I(!1)},removeOwner:v,updateUser:g,visible:R}))}},55546:function(e,t,n){var a,i,r,l;n.d(t,{jc:function(){return i},Wm:function(){return r},aX:function(){return l}}),function(e){e.USERS="users",e.ADMINS="admins",e.BOTS="bots"}(a||(a={})),function(e){e.USER="user",e.TEAM="team"}(i||(i={})),function(e){e.AutomaticGenerate="AUTOMATIC_GENERATE",e.CreatePassword="CREATE_PASSWORD"}(r||(r={})),function(e){e.ACTIVITY="activity",e.TASKS="tasks",e.MY_DATA="mydata",e.FOLLOWING="following"}(l||(l={}))},52187:function(e,t,n){n.d(t,{D:function(){return c}});var a=n(70655),i=n(96486),r=n(52046),l=n(73213),s=n(48132),c=function(e,t,n,c){var o=r.Z.getCurrentUserDetails(),u=!(!(0,s.C_)(o).includes((0,i.toString)(c))&&c!==l.m);if(null==o?void 0:o.isAdmin){var d=(e||[]).map((function(e){return{name:(0,s.C_)(e),value:e.id,group:"Users",type:"user"}})).filter((function(e){return e.value!=o.id})),m=(t||[]).map((function(e){return{name:(0,s.C_)(e),value:e.id,group:"Teams",type:"team"}}));return(0,a.ev)((0,a.ev)((0,a.ev)([],(0,a.CR)(!n&&u?[{name:(0,s.C_)(o),value:o.id,group:"Users",type:"user"}]:[])),(0,a.CR)(d)),(0,a.CR)(m))}return[{name:(0,s.C_)(o),value:null==o?void 0:o.id,group:"Users",type:"user"}]}}}]);