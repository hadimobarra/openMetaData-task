"use strict";(self.webpackChunkopen_metadata=self.webpackChunkopen_metadata||[]).push([[953],{88389:function(e,t,n){var a=n(8081),i=n.n(a),r=n(23645),l=n.n(r)()(i());l.push([e.id,'/*\n *  Copyright 2022 Collate\n *  Licensed under the Apache License, Version 2.0 (the "License");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *  http://www.apache.org/licenses/LICENSE-2.0\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an "AS IS" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n.table-profiler-container .overall-summery-card:not(:first-child) {\n  border-left: 1px solid #e5e7eb;\n  padding-left: 16px;\n}\n.table-profiler-container .success {\n  color: #28a745;\n}\n.table-profiler-container .failed {\n  color: #cb2431;\n}\n.table-profiler-container .aborted {\n  color: #efae2f;\n}\n.table-profiler-container .ant-table-row .ant-table-cell:first-child,\n.table-profiler-container .ant-table-thead .ant-table-cell:first-child {\n  padding-left: 16px;\n}\n.table-profiler-container .ant-menu-inline {\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n}\n.profiler-setting-sql-editor {\n  border: 1px solid #dde3ea;\n  border-radius: 2px;\n}\n.profiler-setting-sql-editor .CodeMirror {\n  height: 200px;\n}\n.include-columns-add-button.ant-btn-icon-only.ant-btn-sm {\n  width: 18px;\n  height: 18px;\n  font-size: 8px;\n}\n',""]),t.Z=l},36736:function(e,t,n){var a=n(93379),i=n.n(a),r=n(7795),l=n.n(r),o=n(90569),u=n.n(o),s=n(3565),c=n.n(s),d=n(19216),m=n.n(d),p=n(44589),f=n.n(p),v=n(88389),E={};E.styleTagTransform=f(),E.setAttributes=c(),E.insert=u().bind(null,"head"),E.domAPI=l(),E.insertStyleElement=m(),i()(v.Z,E),v.Z&&v.Z.locals&&v.Z.locals},30835:function(e,t,n){var a=n(70655),i=n(49101),r=n(4107),l=n(85986),o=n(12028),u=n(9242),s=n(71577),c=(n(87825),n(67294)),d=n(99017),m=n(38464);n(36736),t.Z=function(e){var t=e.definition,n=function(e){var t=c.createElement(r.Z,{placeholder:"Enter "+e.displayName});switch(e.dataType){case d.QP.String:t=c.createElement(r.Z,{placeholder:"Enter "+e.displayName});break;case d.QP.Number:case d.QP.Int:case d.QP.Decimal:case d.QP.Double:case d.QP.Float:t=c.createElement(l.Z,{className:"tw-w-full",placeholder:"Enter "+e.displayName});break;case d.QP.Boolean:t=c.createElement(o.Z,null);break;case d.QP.Array:case d.QP.Set:return t=c.createElement(r.Z,{placeholder:"Enter comma(,) separated "+e.displayName}),c.createElement(u.Z.List,{initialValue:[{value:""}],key:e.name,name:e.name||""},(function(t,n){var l=n.add,o=n.remove;return c.createElement(u.Z.Item,{key:e.name,label:c.createElement("span",null,c.createElement("span",{className:"tw-mr-3"},e.displayName,":"),c.createElement(s.Z,{icon:c.createElement(i.Z,null),size:"small",type:"primary",onClick:function(){return l()}})),name:e.name,tooltip:e.description},t.map((function(t){var n=t.key,i=t.name,l=(0,a._T)(t,["key","name"]);return c.createElement("div",{className:"tw-flex tw-gap-2 tw-w-full",key:n},c.createElement(u.Z.Item,(0,a.pi)({className:"tw-w-11/12 tw-mb-4"},l,{name:[i,"value"],rules:[{required:e.required,message:e.displayName+" is required!"}]}),c.createElement(r.Z,{placeholder:"Enter "+e.displayName})),c.createElement(s.Z,{icon:c.createElement(m.ZP,{alt:"delete",className:"tw-w-4",icon:m.PJ.DELETE}),type:"text",onClick:function(){return o(i)}}))})))}))}return c.createElement(u.Z.Item,{key:e.name,label:e.displayName+":",name:e.name,rules:[{required:e.required,message:e.displayName+" is required!"}],tooltip:e.description},t)};return c.createElement(u.Z.List,{name:"params"},(function(){var e;return null===(e=t.parameterDefinition)||void 0===e?void 0:e.map(n)}))}},69852:function(e,t,n){var a=n(75899),i=n(94184),r=n.n(i),l=n(67294),o=a.Z.Step;t.Z=function(e){var t=e.steps,n=e.activeStep,i=e.excludeSteps,u=void 0===i?[]:i;return l.createElement("div",{className:"tw-px-24","data-testid":"stepper-container"},l.createElement(a.Z,{current:n,labelPlacement:"vertical",size:"small"},t.filter((function(e){return!u.includes(e.step)})).map((function(e){return l.createElement(o,{icon:l.createElement("span",{className:r()("ingestion-rounder tw-self-center",{active:e.step===n},{completed:e.step<n}),"data-testid":"step-icon-"+e.step}),key:""+e.name,title:e.name})}))))}},46892:function(e,t,n){n.d(t,{K:function(){return o}});var a=n(94184),i=n.n(a),r=n(67294),l=n(61637),o={border:"1px rgb(221, 227, 234) solid",borderRadius:"4px",boxShadow:"1px 1px 8px rgb(0 0 0 / 6%)"};t.Z=function(e){var t=e.leftPanel,n=e.header,a=e.children,o=e.rightPanel,u=e.layout,s=void 0===u?l.Q["3Col"]:u,c=e.classes,d=void 0===c?"":c,m=function(){return t&&r.createElement("div",{className:"tw-py-1",id:"left-panel"},t)},p=function(){return o&&r.createElement("div",{className:"tw-py-1",id:"right-panel"},o)};return function(e){switch(e){case l.Q["2ColLTR"]:return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:"tw-px-6"},n),r.createElement("div",{className:i()("page-layout-container l2-ltr-col tw-gap-x-3 tw-px-6 centered-layout",d,t?"page-layout-container-left-center":"page-layout-container-center")},m(),r.createElement("div",{className:i()("tw-py-1",{"tw-pl-8":t}),id:"center"},a)));case l.Q["2ColRTL"]:return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:"page-layout-container tw-gap-x-3 tw-px-6 centered-layout tw-max-w-full-hd tw-pt-4"},n),r.createElement("div",{className:i()("page-layout-container l2-rtl-col tw-gap-x-3 tw-px-6 centered-layout",d,o?"page-layout-container-center-right":"page-layout-container-center")},r.createElement("div",{className:i()("tw-py-1",{"tw-pr-10":o}),id:"center"},a),p()));case l.Q["3Col"]:default:return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:"tw-px-6"},n),r.createElement("div",{className:i()("page-layout-container l3-col tw-gap-x-3 tw-px-6 centered-layout",d,{"page-layout-container-left-center-right":t&&a&&o},{"page-layout-container-left-center":!o},{"page-layout-container-center-right":!t},{"page-layout-container-center":!t&&!o})},m(),r.createElement("div",{className:t||o?"tw-py-1":"",id:"center"},a),p()))}}(s)}},56275:function(e,t,n){n.d(t,{DM:function(){return m},US:function(){return S},GR:function(){return b},Fh:function(){return p},kK:function(){return v},Wi:function(){return T},dO:function(){return f},U4:function(){return y},H9:function(){return E},V:function(){return N},SX:function(){return w},gj:function(){return A},CF:function(){return d},T3:function(){return c},wG:function(){return I},pq:function(){return g},Yk:function(){return C},Dj:function(){return h}});var a,i,r=n(67800),l=n(27914);!function(e){e.Delete="DELETE",e.Insert="INSERT",e.Update="UPDATE"}(a||(a={})),function(e){e.Percentage="PERCENTAGE",e.Rows="ROWS"}(i||(i={}));var o=n(80307),u=n(98809),s=n(62761),c=["valuesCount","valuesPercentage","validCount","duplicateCount","nullCount","nullProportion","missingPercentage","missingCount","uniqueCount","uniqueProportion","distinctCount","distinctProportion","min","max","minLength","maxLength","mean","sum","stddev","variance","median","histogram","customMetricsProfile"],d={last3days:{days:3,title:"Last 3 days"},last7days:{days:7,title:"Last 7 days"},last14days:{days:14,title:"Last 14 days"},last30days:{days:30,title:"Last 30 days"},last60days:{days:60,title:"Last 60 days"}},m=["#54C5D0","#2ab0a0","#2ab069","#18ffec","#008376"],p={information:[{title:"Distinct Count",dataKey:"distinctCount",color:"#1890FF"},{title:"Null Count",dataKey:"nullCount",color:"#54C5D0"},{title:"Unique Count",dataKey:"uniqueCount",color:"#008376"},{title:"Values Count",dataKey:"valuesCount",color:"#B02AAC"}],data:[]},f={information:[{title:"Distinct Proportion",dataKey:"distinctProportion",color:"#1890FF"},{title:"Null Proportion",dataKey:"nullProportion",color:"#54C5D0"},{title:"Unique Proportion",dataKey:"uniqueProportion",color:"#008376"}],data:[]},v={information:[{title:"Median",dataKey:"median",color:"#1890FF"},{title:"Max",dataKey:"max",color:"#54C5D0"},{title:"Mean",dataKey:"mean",color:"#008376"},{title:"Min",dataKey:"min",color:"#B02AAC"}],data:[]},E={information:[{title:"Sum",dataKey:"sum",color:"#1890FF"}],data:[]},y={information:[{title:(0,r.t)("label.row-count"),dataKey:"rowCount",color:"#008376"}],data:[]},T={information:[{title:(0,r.t)("label.insert"),dataKey:a.Insert,color:"#008376"},{title:(0,r.t)("label.update"),dataKey:a.Update,color:"#1890FF"},{title:(0,r.t)("label.delete"),dataKey:a.Delete,color:"#54C5D0"}],data:[]},S=[{columnName:void 0,metrics:["all"]}],N={success:0,aborted:0,failed:0},b=[{value:0,type:u.M.Success},{value:0,type:u.M.Aborted},{value:0,type:u.M.Failed}],h={tabSize:s.Wb,indentUnit:s.Wb,indentWithTabs:!0,lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,matchBrackets:!0,autoCloseBrackets:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],mode:{name:l.Q.SQL}},g=[{name:"Select/Add Test Suite",step:1},{name:"Configure Test Case",step:2}],C=[o.g.Timestamp,o.g.Date,o.g.Datetime,o.g.Timestampz],w=Object.values(o.Af).map((function(e){return{value:e,label:e}})),A=Object.values(o.Gv).map((function(e){return{value:e,label:e}})),I=[{label:(0,r.t)("label.percentage"),key:o.KF.Percentage,value:o.KF.Percentage},{label:(0,r.t)("label.row-count"),key:o.KF.Rows,value:o.KF.Rows}]},61637:function(e,t,n){var a;n.d(t,{Q:function(){return a}}),function(e){e["3Col"]="3-Column",e["2ColLTR"]="2-Column-ltr",e["2ColRTL"]="2-Column-rtl"}(a||(a={}))},55546:function(e,t,n){var a,i,r,l;n.d(t,{jc:function(){return i},Wm:function(){return r},aX:function(){return l}}),function(e){e.USERS="users",e.ADMINS="admins",e.BOTS="bots"}(a||(a={})),function(e){e.USER="user",e.TEAM="team"}(i||(i={})),function(e){e.AutomaticGenerate="AUTOMATIC_GENERATE",e.CreatePassword="CREATE_PASSWORD"}(r||(r={})),function(e){e.ACTIVITY="activity",e.TASKS="tasks",e.MY_DATA="mydata",e.FOLLOWING="following"}(l||(l={}))},99017:function(e,t,n){var a,i,r,l;n.d(t,{py:function(){return a},QP:function(){return i},EN:function(){return l}}),function(e){e.Column="COLUMN",e.Table="TABLE"}(a||(a={})),function(e){e.Array="ARRAY",e.Boolean="BOOLEAN",e.Date="DATE",e.Datetime="DATETIME",e.Decimal="DECIMAL",e.Double="DOUBLE",e.Float="FLOAT",e.Int="INT",e.Map="MAP",e.Number="NUMBER",e.Set="SET",e.String="STRING",e.Time="TIME",e.Timestamp="TIMESTAMP"}(i||(i={})),function(e){e.Aggregatefunction="AGGREGATEFUNCTION",e.Array="ARRAY",e.Bigint="BIGINT",e.Binary="BINARY",e.Blob="BLOB",e.Boolean="BOOLEAN",e.Bytea="BYTEA",e.Byteint="BYTEINT",e.Bytes="BYTES",e.Char="CHAR",e.Date="DATE",e.Datetime="DATETIME",e.Decimal="DECIMAL",e.Double="DOUBLE",e.Enum="ENUM",e.Float="FLOAT",e.Geography="GEOGRAPHY",e.Geometry="GEOMETRY",e.Int="INT",e.Interval="INTERVAL",e.JSON="JSON",e.Long="LONG",e.Longblob="LONGBLOB",e.Map="MAP",e.Mediumblob="MEDIUMBLOB",e.Mediumtext="MEDIUMTEXT",e.Number="NUMBER",e.Numeric="NUMERIC",e.Point="POINT",e.Polygon="POLYGON",e.Set="SET",e.Smallint="SMALLINT",e.String="STRING",e.Struct="STRUCT",e.Text="TEXT",e.Time="TIME",e.Timestamp="TIMESTAMP",e.Timestampz="TIMESTAMPZ",e.Tinyint="TINYINT",e.UUID="UUID",e.Union="UNION",e.Varbinary="VARBINARY",e.Varchar="VARCHAR",e.Variant="VARIANT"}(r||(r={})),function(e){e.Dbt="DBT",e.Deequ="Deequ",e.GreatExpectations="GreatExpectations",e.OpenMetadata="OpenMetadata",e.Other="Other",e.Soda="Soda"}(l||(l={}))},20953:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var a=n(70655),i=n(67294),r=n(59293),l=n(57794),o=n(71230),u=n(15746),s=n(56256),c=n(96486),d=n(32822),m=n(34797),p=n(62761),f=n(56275),v=n(64632),E=n(31968),y=n(61637),T=n(89204),S=n(86910),N=n(55546),b=n(48132),h=n(96840),g=n(35892),C=n(81274),w=n(50168),A=n(78339),I=n(84419),D=n(46892),Z=n(69852),R=n(27586),L=n(9242),x=n(34041),P=n(27049),O=n(4107),M=n(71577),F=n(19650),U=n(50963),V=n(96566),k=n(85087),B=n(6929),Q=n(38464),q=n(97809),G=function(e){var t,n,l,u=e.onSubmit,d=e.initialValue,f=(0,r.UO)().entityTypeFQN,v=(0,k.a)().isAdminUser,E=(0,V.Eu)().isAuthDisabled,y=(0,a.CR)((0,U.useForm)(),1)[0],T=v||E,S=(0,r.k6)(),N=(0,a.CR)((0,i.useState)({testSuiteId:(null===(t=null==d?void 0:d.data)||void 0===t?void 0:t.id)||"",testSuiteName:(null==d?void 0:d.name)||""}),2),b=N[0],h=N[1],g=(0,a.CR)((0,i.useState)(null!==(n=null==d?void 0:d.isNewTestSuite)&&void 0!==n&&n),2),C=g[0],A=g[1],I=(0,a.CR)((0,i.useState)([]),2),D=I[0],Z=I[1],R=(0,i.useRef)(),G=function(){var e;return(null===(e=R.current)||void 0===e?void 0:e.getEditorContent())||""},K=function(){y.setFieldsValue({testSuiteId:void 0})};return(0,i.useEffect)((function(){0===D.length&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,m.eL)({limit:p.AL})];case 1:return e=n.sent().data,Z(e),[3,3];case 2:return t=n.sent(),(0,w.Eo)(t),[3,3];case 3:return[2]}}))}))}),[]),i.createElement(L.Z,{form:y,initialValues:{testSuiteId:null===(l=null==d?void 0:d.data)||void 0===l?void 0:l.id,testSuiteName:null==d?void 0:d.name},layout:"vertical",name:"selectTestSuite",onFinish:function(e){var t={name:e.testSuiteName,description:G(),data:D.find((function(t){return t.id===e.testSuiteId})),isNewTestSuite:(0,c.isEmpty)(b.testSuiteId)};u(t)},onValuesChange:function(e,t){var n;h(t),e.testSuiteId?(null===(n=null==R?void 0:R.current)||void 0===n||n.clearEditorContent(),y.setFieldsValue((0,a.pi)((0,a.pi)({},t),{testSuiteName:""}))):e.testSuiteName&&K()}},i.createElement(L.Z.Item,{label:"Test Suite:",name:"testSuiteId",rules:[{required:!C||!(0,c.isEmpty)(y.getFieldValue("testSuiteId")),message:"Test suite is required"}]},i.createElement(x.Z,{options:D.map((function(e){return{label:e.name,value:e.id}})),placeholder:"Select test suite"})),T&&i.createElement(i.Fragment,null,i.createElement(P.Z,{plain:!0},"OR"),C?i.createElement(i.Fragment,null,i.createElement(s.Z.Paragraph,{className:"text-base m-t-lg","data-testid":"new-test-title"},"New Test Suite"),i.createElement(L.Z.Item,{label:"Name:",name:"testSuiteName",rules:[{required:(0,c.isEmpty)(y.getFieldValue("testSuiteId")),message:"Name is required!"},{pattern:/^[A-Za-z0-9_]*$/g,message:B.Z.label["special-character-error"]},{validator:function(e,t){return D.some((function(e){return e.name===t}))?Promise.reject("Name already exist!"):Promise.resolve()}}]},i.createElement(O.Z,{"data-testid":"test-suite-name",placeholder:"Enter test suite name"})),i.createElement(L.Z.Item,{label:"Description:",name:"description",rules:[{required:(0,c.isEmpty)(y.getFieldValue("testSuiteId")),validator:function(){return(0,c.isEmpty)(G())&&(0,c.isEmpty)(y.getFieldValue("testSuiteId"))?Promise.reject("Description is required!"):Promise.resolve()}}]},i.createElement(q.Z,{initialValue:(null==d?void 0:d.description)||"",ref:R,style:{margin:0},onTextChange:function(){K()}}))):i.createElement(o.Z,{className:"m-b-xlg",justify:"center"},i.createElement(M.Z,{"data-testid":"create-new-test-suite",icon:i.createElement(Q.ZP,{alt:"plus",className:"w-4 m-r-xss",icon:Q.PJ.ICON_PLUS_PRIMERY}),onClick:function(){return A(!0)}},i.createElement("span",{className:"tw-text-primary"},"Create new test suite")))),i.createElement(L.Z.Item,{noStyle:!0},i.createElement(F.Z,{className:"tw-w-full tw-justify-end",size:16},i.createElement(M.Z,{onClick:function(){S.push((0,p.DV)(f,"profiler"))}},"Cancel"),i.createElement(M.Z,{"data-testid":"next-button",htmlType:"submit",type:"primary"},"Next"))))},K=n(27914),Y=n(99017),z=n(19790),_=n(89216),j=n(30835),J=function(e){var t,n,l,o=e.initialValue,u=e.onSubmit,s=e.onCancel,d=e.table,f=(0,r.UO)(),v=f.entityTypeFQN,E=f.dashboardType,y=(0,C.p2)(v),T=E===S.xz.COLUMN,N=(0,a.CR)(L.Z.useForm(),1)[0],h=(0,i.useRef)(),g=(0,a.CR)((0,i.useState)([]),2),A=g[0],I=g[1],D=(0,a.CR)((0,i.useState)(null===(t=null==o?void 0:o.testDefinition)||void 0===t?void 0:t.id),2),Z=D[0],R=D[1],P=(0,a.CR)((0,i.useState)([]),2),U=P[0],V=P[1],k=(0,a.CR)((0,i.useState)({name:"sqlExpression",value:(null===(l=null===(n=null==o?void 0:o.parameterValues)||void 0===n?void 0:n[0])||void 0===l?void 0:l.value)||""}),2),B=k[0],Q=k[1],G=function(){var e,t,n=null!==(t=null===(e=null==o?void 0:o.testDefinition)||void 0===e?void 0:e.id)&&void 0!==t?t:Z;return A.find((function(e){return e.id===n}))},J=(0,i.useCallback)((function(){var e,t=G();if(t&&t.parameterDefinition){var n=null===(e=t.parameterDefinition[0])||void 0===e?void 0:e.name;return"sqlExpression"===n?i.createElement(L.Z.Item,{"data-testid":"sql-editor-container",key:n,label:"SQL Query",name:n,tooltip:"Queries returning 1 or more rows will result in the test failing."},i.createElement(_.Z,{className:"profiler-setting-sql-editor",mode:{name:K.Q.SQL},options:{readOnly:!1},value:B.value||"",onChange:function(e){return Q((function(t){return(0,a.pi)((0,a.pi)({},t),{value:e})}))}})):i.createElement(j.Z,{definition:t})}}),[Z,o,A,B]),W=function(e){var t,n,i=G(),r=null===(t=null==i?void 0:i.parameterDefinition)||void 0===t?void 0:t[0],l="sqlExpression"===(null==r?void 0:r.name)?[B]:Object.entries(e.params||{}).map((function(e){var t=(0,a.CR)(e,2),n=t[0],i=t[1];return{name:n,value:(null==r?void 0:r.dataType)===Y.QP.Array?JSON.stringify(i.map((function(e){return e.value}))):i}}));return{name:e.testName,entityLink:(0,z.GJ)(y,T),parameterValues:l,testDefinition:{id:e.testTypeId,type:"testDefinition"},description:null===(n=h.current)||void 0===n?void 0:n.getEditorContent(),testSuite:{}}},H=function(){var e;return null===(e=null==o?void 0:o.parameterValues)||void 0===e?void 0:e.reduce((function(e,t){var n,i,r;return(0,a.pi)((0,a.pi)({},e),((n={})[t.name||""]=(null===(r=null===(i=G())||void 0===i?void 0:i.parameterDefinition)||void 0===r?void 0:r[0].dataType)===Y.QP.Array?JSON.parse((null==t?void 0:t.value)||"[]").map((function(e){return{value:e}})):null==t?void 0:t.value,n))}),{})};return(0,i.useEffect)((function(){var e,t,n;0===A.length&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,t,n;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,(0,m.ch)({limit:p.AL,entityType:T?Y.py.Column:Y.py.Table,testPlatform:Y.EN.OpenMetadata,supportedDataType:T?null===(n=d.columns.find((function(e){return e.fullyQualifiedName===y})))||void 0===n?void 0:n.dataType:void 0})];case 1:return e=a.sent().data,I(e),[3,3];case 2:return t=a.sent(),(0,w.Eo)(t),[3,3];case 3:return[2]}}))})),(0,c.isEmpty)(U)&&(0,a.mG)(void 0,void 0,void 0,(function(){var e,t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,m.Cz)({fields:"testDefinition",limit:p.AL,entityLink:(0,z.GJ)(y,T)})];case 1:return e=n.sent().data,V(e),[3,3];case 2:return t=n.sent(),(0,w.Eo)(t),[3,3];case 3:return[2]}}))})),N.setFieldsValue({testName:(0,b.$I)(null!==(e=null==o?void 0:o.name)&&void 0!==e?e:(0,b.AY)(y)),testTypeId:null===(t=null==o?void 0:o.testDefinition)||void 0===t?void 0:t.id,params:(null===(n=null==o?void 0:o.parameterValues)||void 0===n?void 0:n.length)?H():void 0})}),[]),i.createElement(L.Z,{form:N,layout:"vertical",name:"tableTestForm",preserve:!1,onFinish:function(e){u(W(e))},onValuesChange:function(e){if(e.testTypeId){var t=A.find((function(t){return t.id===e.testTypeId}));R(e.testTypeId);var n=U.filter((function(e){return e.name.includes((0,b.AY)(y)+"_"+(null==t?void 0:t.name))})),a=(0,b.AY)(y)+"_"+(null==t?void 0:t.name)+(n.length?"_"+n.length:"");N.setFieldsValue({testName:(0,b.$I)(a)})}}},i.createElement(L.Z.Item,{label:"Name:",name:"testName",rules:[{required:!0,message:"Name is required!"},{pattern:/^[A-Za-z0-9_]*$/g,message:"Spacial character is not allowed!"},{validator:function(e,t){return U.some((function(e){return e.name===t}))?Promise.reject("Name already exist!"):Promise.resolve()}}]},i.createElement(O.Z,{placeholder:"Enter test case name"})),i.createElement(L.Z.Item,{label:"Test Type:",name:"testTypeId",rules:[{required:!0,message:"Test type is required"}]},i.createElement(x.Z,{options:A.map((function(e){return{label:e.name,value:e.id}})),placeholder:"Select test type"})),J(),i.createElement(L.Z.Item,{label:"Description:",name:"description"},i.createElement(q.Z,{initialValue:(null==o?void 0:o.description)||"",ref:h,style:{margin:0}})),i.createElement(L.Z.Item,{noStyle:!0},i.createElement(F.Z,{className:"tw-w-full tw-justify-end",size:16},i.createElement(M.Z,{onClick:function(){var e=N.getFieldsValue();s(W(e))}},"Back"),i.createElement(M.Z,{"data-testid":"submit-test",htmlType:"submit",type:"primary"},"Submit"))))},W=n(78736),H=n(45351),$=function(e){var t=e.table,n=(0,r.UO)(),l=n.entityTypeFQN,L=n.dashboardType===S.xz.COLUMN,x=(0,r.k6)(),P=(0,a.CR)((0,i.useState)(1),2),O=P[0],M=P[1],F=(0,a.CR)((0,i.useState)(),2),U=F[0],V=F[1],k=(0,a.CR)((0,i.useState)(),2),B=k[0],Q=k[1],q=(0,a.CR)((0,i.useState)(),2),K=q[0],Y=q[1],z=(0,a.CR)((0,i.useState)(),2),_=z[0],j=z[1],$=(0,a.CR)((0,i.useState)(!1),2),X=$[0],ee=$[1],te=(0,a.CR)((0,i.useState)(!1),2),ne=te[0],ae=te[1],ie=(0,i.useMemo)((function(){var e=t.service,n=t.serviceType,i=t.database,r=t.databaseSchema,o=t.fullyQualifiedName,u=void 0===o?"":o,s=[{name:(null==e?void 0:e.name)||"",url:e?(0,p.LE)(e.name||"",T.u.DATABASE_SERVICES):"",imgSrc:n?(0,g.zF)(n):void 0},{name:(0,b.Td)(u,[v.ih.Database]),url:(0,p.aY)((null==i?void 0:i.fullyQualifiedName)||"")},{name:(0,b.Td)(u,[v.ih.Schema]),url:(0,p.vh)((null==r?void 0:r.fullyQualifiedName)||"")},{name:(0,b.C_)(t),url:(0,p.DV)(l,"profiler")}];if(L){var c=[{name:(0,b.Td)((0,C.p2)(l),[v.ih.NestedColumn]),url:(0,p.DV)(l,"profiler")},{name:"Add Column Test",url:"",activeTitle:!0}];s.push.apply(s,(0,a.ev)([],(0,a.CR)(c)))}else s.push({name:"Add Table Test",url:"",activeTitle:!0});return s}),[t,l,L]),re=function(){var e;x.push((0,h.nn)((null===(e=null==U?void 0:U.data)||void 0===e?void 0:e.fullyQualifiedName)||(null==K?void 0:K.fullyQualifiedName)||""))},le=function(){return new Promise((function(e,t){(0,d.x1)().then((function(n){200===n.status?(ee(!0),e()):(ee(!1),t())})).catch((function(){ee(!1),t()}))}))},oe=function(e){Q(e),M((function(e){return e-1}))},ue=function(e){V(e),M(2)},se=function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t,n,i,r,l,o,u,s,d,p,f,v,E;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:if(Q(e),(0,c.isUndefined)(U))return[2];a.label=1;case 1:return a.trys.push([1,6,,7]),t=e.parameterValues,n=e.testDefinition,i=e.name,r=e.entityLink,l=e.description,o=U.isNewTestSuite,u=U.data,s={id:(0,b.rc)(),type:N.jc.USER},d={name:i,description:l,entityLink:r,parameterValues:t,owner:s,testDefinition:n,testSuite:{id:(null==u?void 0:u.id)||"",type:"testSuite"}},o&&(0,c.isUndefined)(K)?(p={name:U.name||"",description:U.description||"",owner:s},[4,(0,m.H6)(p)]):[3,3];case 2:return f=a.sent(),d.testSuite.id=f.id||"",Y(f),[3,4];case 3:(0,c.isUndefined)(K)||(d.testSuite.id=K.id||""),a.label=4;case 4:return[4,(0,m.rO)(d)];case 5:return v=a.sent(),M(3),j(v),[3,7];case 6:return E=a.sent(),(0,w.Eo)(E),[3,7];case 7:return[2]}}))}))},ce=(0,i.useCallback)((function(){if(2===O)return i.createElement(J,{initialValue:B,table:t,onCancel:oe,onSubmit:se});if(O>2){var e=(null==U?void 0:U.isNewTestSuite)?(null==K?void 0:K.name)+" & "+(null==_?void 0:_.name):(null==_?void 0:_.name)||"Test case",n=(null==U?void 0:U.isNewTestSuite)?void 0:i.createElement("span",null,i.createElement("span",{className:"tw-mr-1 tw-font-semibold"},'"',e,'"'),i.createElement("span",null,"has been created successfully. This will be picked up in the next run."));return i.createElement(A.Z,{handleIngestionClick:function(){return ae(!0)},handleViewServiceClick:re,isAirflowSetup:X,name:e,showIngestionButton:(null==U?void 0:U.isNewTestSuite)||!1,state:E.Y.ADD,successMessage:n,viewServiceText:"View Test Suite",onCheckAirflowStatus:le})}return i.createElement(G,{initialValue:U,onSubmit:ue})}),[O,X,_]);return(0,i.useEffect)((function(){le()}),[]),i.createElement(D.Z,{classes:"tw-max-w-full-hd tw-h-full tw-pt-4",header:i.createElement(I.Z,{titleLinks:ie}),layout:y.Q["2ColRTL"],rightPanel:i.createElement(R.Z,{data:ne?W.j$:(0,W.hY)(O,null==U?void 0:U.isNewTestSuite,{testCase:(null==B?void 0:B.name)||"",testSuite:(null==K?void 0:K.name)||""})})},ne?i.createElement(H.Z,{testSuite:(null==U?void 0:U.isNewTestSuite)?K:null==U?void 0:U.data,onCancel:function(){return ae(!1)}}):i.createElement(o.Z,{className:"tw-form-container",gutter:[16,16]},i.createElement(u.Z,{span:24},i.createElement(s.Z.Paragraph,{className:"tw-heading tw-text-base","data-testid":"header"},"Add "+(L?"Column":"Table")+" Test")),i.createElement(u.Z,{span:24},i.createElement(Z.Z,{activeStep:O,steps:f.pq})),i.createElement(u.Z,{span:24},ce())))},X=n(74380),ee=function(){var e=(0,r.UO)(),t=e.entityTypeFQN,n=e.dashboardType===S.xz.COLUMN,o=(0,a.CR)((0,i.useState)({}),2),u=o[0],s=o[1];return(0,i.useEffect)((function(){(0,a.mG)(void 0,void 0,void 0,(function(){var e,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),e=n?(0,b.S8)(t):t,[4,(0,l.gs)(e,"")];case 1:return i=a.sent(),s(i),[3,3];case 2:return r=a.sent(),(0,w.Eo)(r),[3,3];case 3:return[2]}}))}))}),[t]),i.createElement(X.Z,null,i.createElement("div",{className:"self-center"},i.createElement($,{table:u})))}}}]);